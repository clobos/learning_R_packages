<!DOCTYPE html>
<html lang="Pt-Br" xml:lang="Pt-Br">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>6 broom and dplyr | Learning R packages</title>
  <meta name="description" content="<p>This is a minimal example of using the bookdown package to write a book.
set in the _output.yml file.
The HTML output format for this example is bookdown::gitbook,</p>" />
  <meta name="generator" content="bookdown 0.30 and GitBook 2.6.7" />

  <meta property="og:title" content="6 broom and dplyr | Learning R packages" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="<p>This is a minimal example of using the bookdown package to write a book.
set in the _output.yml file.
The HTML output format for this example is bookdown::gitbook,</p>" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="6 broom and dplyr | Learning R packages" />
  
  <meta name="twitter:description" content="<p>This is a minimal example of using the bookdown package to write a book.
set in the _output.yml file.
The HTML output format for this example is bookdown::gitbook,</p>" />
  

<meta name="author" content="Cristian Villegas" />


<meta name="date" content="2023-06-16" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="tidyr.html"/>
<link rel="next" href="extra.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Learning R packages</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Intro</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#carrega-pacotes-a-serem-usados"><i class="fa fa-check"></i><b>1.1</b> Carrega pacotes a serem usados</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#alguns-atalhos-no-rstudio"><i class="fa fa-check"></i><b>1.2</b> Alguns atalhos no Rstudio</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="dplyr-60-minutos.html"><a href="dplyr-60-minutos.html"><i class="fa fa-check"></i><b>2</b> dplyr (60 minutos)</a>
<ul>
<li class="chapter" data-level="2.1" data-path="dplyr-60-minutos.html"><a href="dplyr-60-minutos.html#carrega-pacotes-a-serem-usados-1"><i class="fa fa-check"></i><b>2.1</b> Carrega pacotes a serem usados</a></li>
<li class="chapter" data-level="2.2" data-path="dplyr-60-minutos.html"><a href="dplyr-60-minutos.html#descrição-dos-dados-mpg"><i class="fa fa-check"></i><b>2.2</b> Descrição dos dados <code>mpg</code></a></li>
<li class="chapter" data-level="2.3" data-path="dplyr-60-minutos.html"><a href="dplyr-60-minutos.html#lista-de-funções-do-pacote-dplyr"><i class="fa fa-check"></i><b>2.3</b> Lista de funções do pacote dplyr</a></li>
<li class="chapter" data-level="2.4" data-path="dplyr-60-minutos.html"><a href="dplyr-60-minutos.html#operador-pipe"><i class="fa fa-check"></i><b>2.4</b> Operador Pipe</a></li>
<li class="chapter" data-level="2.5" data-path="dplyr-60-minutos.html"><a href="dplyr-60-minutos.html#select-para-colunas"><i class="fa fa-check"></i><b>2.5</b> select() para colunas</a></li>
<li class="chapter" data-level="2.6" data-path="dplyr-60-minutos.html"><a href="dplyr-60-minutos.html#rename"><i class="fa fa-check"></i><b>2.6</b> rename()</a></li>
<li class="chapter" data-level="2.7" data-path="dplyr-60-minutos.html"><a href="dplyr-60-minutos.html#mutate-para-colunas"><i class="fa fa-check"></i><b>2.7</b> mutate() para colunas</a></li>
<li class="chapter" data-level="2.8" data-path="dplyr-60-minutos.html"><a href="dplyr-60-minutos.html#transmute"><i class="fa fa-check"></i><b>2.8</b> transmute()</a></li>
<li class="chapter" data-level="2.9" data-path="dplyr-60-minutos.html"><a href="dplyr-60-minutos.html#filter-para-linhas"><i class="fa fa-check"></i><b>2.9</b> filter() para linhas</a></li>
<li class="chapter" data-level="2.10" data-path="dplyr-60-minutos.html"><a href="dplyr-60-minutos.html#slice-para-linhas"><i class="fa fa-check"></i><b>2.10</b> slice() para linhas</a></li>
<li class="chapter" data-level="2.11" data-path="dplyr-60-minutos.html"><a href="dplyr-60-minutos.html#arrange-para-linhas"><i class="fa fa-check"></i><b>2.11</b> arrange() para linhas</a></li>
<li class="chapter" data-level="2.12" data-path="dplyr-60-minutos.html"><a href="dplyr-60-minutos.html#distinct-para-linhas"><i class="fa fa-check"></i><b>2.12</b> distinct() para linhas</a></li>
<li class="chapter" data-level="2.13" data-path="dplyr-60-minutos.html"><a href="dplyr-60-minutos.html#summarise"><i class="fa fa-check"></i><b>2.13</b> summarise()</a></li>
<li class="chapter" data-level="2.14" data-path="dplyr-60-minutos.html"><a href="dplyr-60-minutos.html#group_by"><i class="fa fa-check"></i><b>2.14</b> group_by()</a></li>
<li class="chapter" data-level="2.15" data-path="dplyr-60-minutos.html"><a href="dplyr-60-minutos.html#count"><i class="fa fa-check"></i><b>2.15</b> count()</a></li>
<li class="chapter" data-level="2.16" data-path="dplyr-60-minutos.html"><a href="dplyr-60-minutos.html#sample_n"><i class="fa fa-check"></i><b>2.16</b> sample_n()</a></li>
<li class="chapter" data-level="2.17" data-path="dplyr-60-minutos.html"><a href="dplyr-60-minutos.html#sample_frac"><i class="fa fa-check"></i><b>2.17</b> sample_frac()</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="ggplot2-60-minutos.html"><a href="ggplot2-60-minutos.html"><i class="fa fa-check"></i><b>3</b> ggplot2 (60 minutos)</a>
<ul>
<li class="chapter" data-level="3.1" data-path="ggplot2-60-minutos.html"><a href="ggplot2-60-minutos.html#carrega-pacotes-a-serem-usados-2"><i class="fa fa-check"></i><b>3.1</b> Carrega pacotes a serem usados</a></li>
<li class="chapter" data-level="3.2" data-path="ggplot2-60-minutos.html"><a href="ggplot2-60-minutos.html#lista-de-funções-do-pacote-ggplot2"><i class="fa fa-check"></i><b>3.2</b> Lista de funções do pacote ggplot2</a></li>
<li class="chapter" data-level="3.3" data-path="ggplot2-60-minutos.html"><a href="ggplot2-60-minutos.html#primeiros-passos-usando-geom_point"><i class="fa fa-check"></i><b>3.3</b> Primeiros passos usando geom_point</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="ggplot2-60-minutos.html"><a href="ggplot2-60-minutos.html#mais-detalhes-sobre-geom_point"><i class="fa fa-check"></i><b>3.3.1</b> Mais detalhes sobre geom_point</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="ggplot2-60-minutos.html"><a href="ggplot2-60-minutos.html#smooth-boxplot-histogram"><i class="fa fa-check"></i><b>3.4</b> smooth, boxplot, histogram</a></li>
<li class="chapter" data-level="3.5" data-path="ggplot2-60-minutos.html"><a href="ggplot2-60-minutos.html#gridextra-e-patchwork"><i class="fa fa-check"></i><b>3.5</b> gridExtra e patchwork</a></li>
<li class="chapter" data-level="3.6" data-path="ggplot2-60-minutos.html"><a href="ggplot2-60-minutos.html#bar-col-density-density2d"><i class="fa fa-check"></i><b>3.6</b> bar, col, density, density2d</a></li>
<li class="chapter" data-level="3.7" data-path="ggplot2-60-minutos.html"><a href="ggplot2-60-minutos.html#facet_grid-facet_wrap"><i class="fa fa-check"></i><b>3.7</b> facet_grid, facet_wrap</a></li>
<li class="chapter" data-level="3.8" data-path="ggplot2-60-minutos.html"><a href="ggplot2-60-minutos.html#stat_function"><i class="fa fa-check"></i><b>3.8</b> stat_function</a></li>
<li class="chapter" data-level="3.9" data-path="ggplot2-60-minutos.html"><a href="ggplot2-60-minutos.html#stat_summary"><i class="fa fa-check"></i><b>3.9</b> stat_summary</a></li>
<li class="chapter" data-level="3.10" data-path="ggplot2-60-minutos.html"><a href="ggplot2-60-minutos.html#theme_"><i class="fa fa-check"></i><b>3.10</b> theme_*()</a></li>
<li class="chapter" data-level="3.11" data-path="ggplot2-60-minutos.html"><a href="ggplot2-60-minutos.html#gráfico-de-perfis-spaguetti-plot"><i class="fa fa-check"></i><b>3.11</b> Gráfico de perfis (Spaguetti plot)</a></li>
<li class="chapter" data-level="3.12" data-path="ggplot2-60-minutos.html"><a href="ggplot2-60-minutos.html#plotly"><i class="fa fa-check"></i><b>3.12</b> plotly</a></li>
<li class="chapter" data-level="3.13" data-path="ggplot2-60-minutos.html"><a href="ggplot2-60-minutos.html#esquisse"><i class="fa fa-check"></i><b>3.13</b> esquisse</a></li>
<li class="chapter" data-level="3.14" data-path="ggplot2-60-minutos.html"><a href="ggplot2-60-minutos.html#exemplo-esquisse"><i class="fa fa-check"></i><b>3.14</b> Exemplo esquisse</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="purrr.html"><a href="purrr.html"><i class="fa fa-check"></i><b>4</b> purrr</a>
<ul>
<li class="chapter" data-level="4.1" data-path="purrr.html"><a href="purrr.html#apply-a-function-to-each-element-of-a-list-or-atomic-vector"><i class="fa fa-check"></i><b>4.1</b> Apply a function to each element of a list or atomic vector</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="purrr.html"><a href="purrr.html#usage"><i class="fa fa-check"></i><b>4.1.1</b> Usage</a></li>
<li class="chapter" data-level="4.1.2" data-path="purrr.html"><a href="purrr.html#arguments"><i class="fa fa-check"></i><b>4.1.2</b> Arguments</a></li>
<li class="chapter" data-level="4.1.3" data-path="purrr.html"><a href="purrr.html#value"><i class="fa fa-check"></i><b>4.1.3</b> Value</a></li>
<li class="chapter" data-level="4.1.4" data-path="purrr.html"><a href="purrr.html#see-also"><i class="fa fa-check"></i><b>4.1.4</b> See Also</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="purrr.html"><a href="purrr.html#examples"><i class="fa fa-check"></i><b>4.2</b> Examples</a></li>
<li class="chapter" data-level="4.3" data-path="purrr.html"><a href="purrr.html#map-functions"><i class="fa fa-check"></i><b>4.3</b> map functions</a></li>
<li class="chapter" data-level="4.4" data-path="purrr.html"><a href="purrr.html#map2-functions"><i class="fa fa-check"></i><b>4.4</b> map2 functions</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="tidyr.html"><a href="tidyr.html"><i class="fa fa-check"></i><b>5</b> tidyr</a>
<ul>
<li class="chapter" data-level="5.1" data-path="tidyr.html"><a href="tidyr.html#nest"><i class="fa fa-check"></i><b>5.1</b> nest()</a></li>
<li class="chapter" data-level="5.2" data-path="tidyr.html"><a href="tidyr.html#unnest"><i class="fa fa-check"></i><b>5.2</b> unnest()</a></li>
<li class="chapter" data-level="5.3" data-path="tidyr.html"><a href="tidyr.html#exemplos-da-ajuda-do-r"><i class="fa fa-check"></i><b>5.3</b> Exemplos da ajuda do R</a></li>
<li class="chapter" data-level="5.4" data-path="tidyr.html"><a href="tidyr.html#mais-detalhes"><i class="fa fa-check"></i><b>5.4</b> Mais detalhes</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="broom-and-dplyr.html"><a href="broom-and-dplyr.html"><i class="fa fa-check"></i><b>6</b> broom and dplyr</a>
<ul>
<li class="chapter" data-level="6.1" data-path="broom-and-dplyr.html"><a href="broom-and-dplyr.html#tidy-bootstrapping"><i class="fa fa-check"></i><b>6.1</b> Tidy bootstrapping</a></li>
<li class="chapter" data-level="6.2" data-path="broom-and-dplyr.html"><a href="broom-and-dplyr.html#mais-detalhes-glance"><i class="fa fa-check"></i><b>6.2</b> Mais detalhes (glance)</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="broom-and-dplyr.html"><a href="broom-and-dplyr.html#lm"><i class="fa fa-check"></i><b>6.2.1</b> lm()</a></li>
<li class="chapter" data-level="6.2.2" data-path="broom-and-dplyr.html"><a href="broom-and-dplyr.html#nls"><i class="fa fa-check"></i><b>6.2.2</b> nls()</a></li>
<li class="chapter" data-level="6.2.3" data-path="broom-and-dplyr.html"><a href="broom-and-dplyr.html#glm"><i class="fa fa-check"></i><b>6.2.3</b> glm()</a></li>
<li class="chapter" data-level="6.2.4" data-path="broom-and-dplyr.html"><a href="broom-and-dplyr.html#gam"><i class="fa fa-check"></i><b>6.2.4</b> gam()</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="broom-and-dplyr.html"><a href="broom-and-dplyr.html#links"><i class="fa fa-check"></i><b>6.3</b> links</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="extra.html"><a href="extra.html"><i class="fa fa-check"></i><b>7</b> Extra</a>
<ul>
<li class="chapter" data-level="7.1" data-path="extra.html"><a href="extra.html#introduction"><i class="fa fa-check"></i><b>7.1</b> Introduction</a></li>
<li class="chapter" data-level="7.2" data-path="extra.html"><a href="extra.html#correlation"><i class="fa fa-check"></i><b>7.2</b> Correlation</a></li>
<li class="chapter" data-level="7.3" data-path="extra.html"><a href="extra.html#correlation-matrix"><i class="fa fa-check"></i><b>7.3</b> Correlation matrix</a></li>
<li class="chapter" data-level="7.4" data-path="extra.html"><a href="extra.html#testing-a-bivariate-association"><i class="fa fa-check"></i><b>7.4</b> Testing a bivariate association</a></li>
<li class="chapter" data-level="7.5" data-path="extra.html"><a href="extra.html#visualizing-the-association"><i class="fa fa-check"></i><b>7.5</b> Visualizing the association</a></li>
<li class="chapter" data-level="7.6" data-path="extra.html"><a href="extra.html#testing-the-significance-of-all-correlations-in-the-matrix"><i class="fa fa-check"></i><b>7.6</b> Testing the significance of all correlations in the matrix</a></li>
<li class="chapter" data-level="7.7" data-path="extra.html"><a href="extra.html#pretty-output"><i class="fa fa-check"></i><b>7.7</b> Pretty output</a></li>
<li class="chapter" data-level="7.8" data-path="extra.html"><a href="extra.html#keeping-the-correlations-for-further-analysis"><i class="fa fa-check"></i><b>7.8</b> Keeping the correlations for further analysis</a></li>
<li class="chapter" data-level="7.9" data-path="extra.html"><a href="extra.html#correlation-method"><i class="fa fa-check"></i><b>7.9</b> Correlation method</a></li>
<li class="chapter" data-level="7.10" data-path="extra.html"><a href="extra.html#missing-data"><i class="fa fa-check"></i><b>7.10</b> Missing data</a></li>
<li class="chapter" data-level="7.11" data-path="extra.html"><a href="extra.html#single-predictor-simple-regression"><i class="fa fa-check"></i><b>7.11</b> Single-predictor (simple) regression</a></li>
<li class="chapter" data-level="7.12" data-path="extra.html"><a href="extra.html#regression-diagnostics"><i class="fa fa-check"></i><b>7.12</b> Regression diagnostics</a></li>
<li class="chapter" data-level="7.13" data-path="extra.html"><a href="extra.html#bootstrap-estimates-and-confidence-intervals"><i class="fa fa-check"></i><b>7.13</b> Bootstrap estimates and confidence intervals</a></li>
<li class="chapter" data-level="7.14" data-path="extra.html"><a href="extra.html#multiple-regression"><i class="fa fa-check"></i><b>7.14</b> Multiple regression</a></li>
<li class="chapter" data-level="7.15" data-path="extra.html"><a href="extra.html#visualizing-regression-data"><i class="fa fa-check"></i><b>7.15</b> Visualizing regression data</a></li>
<li class="chapter" data-level="7.16" data-path="extra.html"><a href="extra.html#getting-results-into-a-tidy-useful-format"><i class="fa fa-check"></i><b>7.16</b> Getting results into a tidy, useful format</a></li>
<li class="chapter" data-level="7.17" data-path="extra.html"><a href="extra.html#modeling-interactions"><i class="fa fa-check"></i><b>7.17</b> Modeling interactions</a></li>
<li class="chapter" data-level="7.18" data-path="extra.html"><a href="extra.html#contrasts-in-regression"><i class="fa fa-check"></i><b>7.18</b> Contrasts in regression</a></li>
<li class="chapter" data-level="7.19" data-path="extra.html"><a href="extra.html#expected-means-for-protein-source"><i class="fa fa-check"></i><b>7.19</b> Expected means for protein source</a></li>
<li class="chapter" data-level="7.20" data-path="extra.html"><a href="extra.html#expected-means-for-protein-level"><i class="fa fa-check"></i><b>7.20</b> Expected means for protein level</a></li>
<li class="chapter" data-level="7.21" data-path="extra.html"><a href="extra.html#means-in-each-cell-of-the-factorial-design"><i class="fa fa-check"></i><b>7.21</b> Means in each cell of the factorial design</a></li>
<li class="chapter" data-level="7.22" data-path="extra.html"><a href="extra.html#pairwise-comparisons-among-protein-sources"><i class="fa fa-check"></i><b>7.22</b> Pairwise comparisons among protein sources</a></li>
<li class="chapter" data-level="7.23" data-path="extra.html"><a href="extra.html#pairwise-differences-and-simple-slopes-in-regression"><i class="fa fa-check"></i><b>7.23</b> Pairwise differences and simple slopes in regression</a></li>
<li class="chapter" data-level="7.24" data-path="extra.html"><a href="extra.html#a-few-other-emmeans-features"><i class="fa fa-check"></i><b>7.24</b> A few other emmeans features</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="data-science-r-packages.html"><a href="data-science-r-packages.html"><i class="fa fa-check"></i><b>8</b> Data Science r packages</a>
<ul>
<li class="chapter" data-level="8.1" data-path="data-science-r-packages.html"><a href="data-science-r-packages.html#knn"><i class="fa fa-check"></i><b>8.1</b> knn</a></li>
<li class="chapter" data-level="8.2" data-path="data-science-r-packages.html"><a href="data-science-r-packages.html#rpart"><i class="fa fa-check"></i><b>8.2</b> rpart</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>9</b> References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Learning R packages</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="broom-and-dplyr" class="section level1 hasAnchor" number="6">
<h1><span class="header-section-number">6</span> broom and dplyr<a href="broom-and-dplyr.html#broom-and-dplyr" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>While broom is useful for summarizing the result of a single analysis in a consistent format, it is really designed for high-throughput applications, where you must combine results from multiple analyses. These could be subgroups of data, analyses using different models, bootstrap replicates, permutations, and so on. In particular, it plays well with the <code>nest/unnest</code> functions in <code>tidyr</code> and the <code>map</code> function in <code>purrr</code>. First, loading necessary packages and setting some defaults:</p>
<div class="sourceCode" id="cb326"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb326-1"><a href="broom-and-dplyr.html#cb326-1" aria-hidden="true" tabindex="-1"></a><span class="co">#ls(&quot;package:tidyr&quot;)</span></span>
<span id="cb326-2"><a href="broom-and-dplyr.html#cb326-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(broom)</span>
<span id="cb326-3"><a href="broom-and-dplyr.html#cb326-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tibble)</span>
<span id="cb326-4"><a href="broom-and-dplyr.html#cb326-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb326-5"><a href="broom-and-dplyr.html#cb326-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb326-6"><a href="broom-and-dplyr.html#cb326-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb326-7"><a href="broom-and-dplyr.html#cb326-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(purrr)</span>
<span id="cb326-8"><a href="broom-and-dplyr.html#cb326-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb326-9"><a href="broom-and-dplyr.html#cb326-9" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_set</span>(<span class="fu">theme_minimal</span>())</span></code></pre></div>
<p>Let’s try this on a simple dataset, the built-in <code>Orange</code>. We start by coercing <code>Orange</code> to a <code>tibble</code>. This gives a nicer print method that will especially useful later on when we start working with list-columns.</p>
<div class="sourceCode" id="cb327"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb327-1"><a href="broom-and-dplyr.html#cb327-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(Orange)</span>
<span id="cb327-2"><a href="broom-and-dplyr.html#cb327-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb327-3"><a href="broom-and-dplyr.html#cb327-3" aria-hidden="true" tabindex="-1"></a>Orange <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(Orange)</span>
<span id="cb327-4"><a href="broom-and-dplyr.html#cb327-4" aria-hidden="true" tabindex="-1"></a>Orange</span></code></pre></div>
<pre><code>## # A tibble: 35 × 3
##    Tree    age circumference
##    &lt;ord&gt; &lt;dbl&gt;         &lt;dbl&gt;
##  1 1       118            30
##  2 1       484            58
##  3 1       664            87
##  4 1      1004           115
##  5 1      1231           120
##  6 1      1372           142
##  7 1      1582           145
##  8 2       118            33
##  9 2       484            69
## 10 2       664           111
## # … with 25 more rows</code></pre>
<p>This contains 35 observations of three variables: <code>Tree</code>, <code>age</code>, and <code>circumference</code>. <code>Tree</code> is a factor with five levels describing five trees. As might be expected, age and circumference are correlated:</p>
<div class="sourceCode" id="cb329"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb329-1"><a href="broom-and-dplyr.html#cb329-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(Orange<span class="sc">$</span>age, Orange<span class="sc">$</span>circumference)</span></code></pre></div>
<pre><code>## [1] 0.9135189</code></pre>
<div class="sourceCode" id="cb331"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb331-1"><a href="broom-and-dplyr.html#cb331-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(Orange, <span class="fu">aes</span>(age, circumference, <span class="at">color =</span> Tree)) <span class="sc">+</span></span>
<span id="cb331-2"><a href="broom-and-dplyr.html#cb331-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()</span></code></pre></div>
<p><img src="05_broom_and_dplyr_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>Suppose you want to test for correlations individually <em>within</em> each tree. You can do this with dplyr’s <code>group_by</code>:</p>
<div class="sourceCode" id="cb332"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb332-1"><a href="broom-and-dplyr.html#cb332-1" aria-hidden="true" tabindex="-1"></a>Orange <span class="sc">%&gt;%</span></span>
<span id="cb332-2"><a href="broom-and-dplyr.html#cb332-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Tree) <span class="sc">%&gt;%</span></span>
<span id="cb332-3"><a href="broom-and-dplyr.html#cb332-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">correlation =</span> <span class="fu">cor</span>(age, circumference))</span></code></pre></div>
<pre><code>## # A tibble: 5 × 2
##   Tree  correlation
##   &lt;ord&gt;       &lt;dbl&gt;
## 1 3           0.988
## 2 1           0.985
## 3 5           0.988
## 4 2           0.987
## 5 4           0.984</code></pre>
<p>(Note that the correlations are much higher than the aggregated one, and furthermore we can now see it is similar across trees).</p>
<p>Suppose that instead of simply estimating a correlation, we want to perform a hypothesis test with <code>cor.test</code>:</p>
<div class="sourceCode" id="cb334"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb334-1"><a href="broom-and-dplyr.html#cb334-1" aria-hidden="true" tabindex="-1"></a>ct <span class="ot">&lt;-</span> <span class="fu">cor.test</span>(Orange<span class="sc">$</span>age, Orange<span class="sc">$</span>circumference)</span>
<span id="cb334-2"><a href="broom-and-dplyr.html#cb334-2" aria-hidden="true" tabindex="-1"></a>ct</span></code></pre></div>
<pre><code>## 
##  Pearson&#39;s product-moment correlation
## 
## data:  Orange$age and Orange$circumference
## t = 12.9, df = 33, p-value = 1.931e-14
## alternative hypothesis: true correlation is not equal to 0
## 95 percent confidence interval:
##  0.8342364 0.9557955
## sample estimates:
##       cor 
## 0.9135189</code></pre>
<p>This contains multiple values we could want in our output. Some are vectors of length 1, such as the p-value and the estimate, and some are longer, such as the confidence interval. We can get this into a nicely organized tibble using the <code>tidy</code> function:</p>
<div class="sourceCode" id="cb336"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb336-1"><a href="broom-and-dplyr.html#cb336-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tidy</span>(ct)</span></code></pre></div>
<pre><code>## # A tibble: 1 × 8
##   estimate statistic  p.value parameter conf.low conf.high method        alter…¹
##      &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;     &lt;int&gt;    &lt;dbl&gt;     &lt;dbl&gt; &lt;chr&gt;         &lt;chr&gt;  
## 1    0.914      12.9 1.93e-14        33    0.834     0.956 Pearson&#39;s pr… two.si…
## # … with abbreviated variable name ¹​alternative</code></pre>
<p>Often, we want to perform multiple tests or fit multiple models, each on a different part of the data. In this case, we recommend a <code>nest-map-unnest</code> workflow. For example, suppose we want to perform correlation tests for each different tree. We start by <code>nest</code>ing our data based on the group of interest:</p>
<div class="sourceCode" id="cb338"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb338-1"><a href="broom-and-dplyr.html#cb338-1" aria-hidden="true" tabindex="-1"></a>nested <span class="ot">&lt;-</span> Orange <span class="sc">%&gt;%</span></span>
<span id="cb338-2"><a href="broom-and-dplyr.html#cb338-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>(<span class="at">data =</span> <span class="sc">-</span>Tree)</span></code></pre></div>
<p>Then we run a correlation test for each nested tibble using <code>purrr::map</code>:</p>
<div class="sourceCode" id="cb339"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb339-1"><a href="broom-and-dplyr.html#cb339-1" aria-hidden="true" tabindex="-1"></a>nested <span class="sc">%&gt;%</span></span>
<span id="cb339-2"><a href="broom-and-dplyr.html#cb339-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">test =</span> <span class="fu">map</span>(data, <span class="sc">~</span> <span class="fu">cor.test</span>(.x<span class="sc">$</span>age, .x<span class="sc">$</span>circumference)))</span></code></pre></div>
<pre><code>## # A tibble: 5 × 3
##   Tree  data             test   
##   &lt;ord&gt; &lt;list&gt;           &lt;list&gt; 
## 1 1     &lt;tibble [7 × 2]&gt; &lt;htest&gt;
## 2 2     &lt;tibble [7 × 2]&gt; &lt;htest&gt;
## 3 3     &lt;tibble [7 × 2]&gt; &lt;htest&gt;
## 4 4     &lt;tibble [7 × 2]&gt; &lt;htest&gt;
## 5 5     &lt;tibble [7 × 2]&gt; &lt;htest&gt;</code></pre>
<p>This results in a list-column of S3 objects. We want to tidy each of the objects, which we can also do with <code>map</code>.</p>
<div class="sourceCode" id="cb341"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb341-1"><a href="broom-and-dplyr.html#cb341-1" aria-hidden="true" tabindex="-1"></a>nested <span class="sc">%&gt;%</span></span>
<span id="cb341-2"><a href="broom-and-dplyr.html#cb341-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb341-3"><a href="broom-and-dplyr.html#cb341-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">test =</span> <span class="fu">map</span>(data, <span class="sc">~</span> <span class="fu">cor.test</span>(.x<span class="sc">$</span>age, .x<span class="sc">$</span>circumference)), <span class="co"># S3 list-col</span></span>
<span id="cb341-4"><a href="broom-and-dplyr.html#cb341-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">tidied =</span> <span class="fu">map</span>(test, tidy)</span>
<span id="cb341-5"><a href="broom-and-dplyr.html#cb341-5" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 5 × 4
##   Tree  data             test    tidied          
##   &lt;ord&gt; &lt;list&gt;           &lt;list&gt;  &lt;list&gt;          
## 1 1     &lt;tibble [7 × 2]&gt; &lt;htest&gt; &lt;tibble [1 × 8]&gt;
## 2 2     &lt;tibble [7 × 2]&gt; &lt;htest&gt; &lt;tibble [1 × 8]&gt;
## 3 3     &lt;tibble [7 × 2]&gt; &lt;htest&gt; &lt;tibble [1 × 8]&gt;
## 4 4     &lt;tibble [7 × 2]&gt; &lt;htest&gt; &lt;tibble [1 × 8]&gt;
## 5 5     &lt;tibble [7 × 2]&gt; &lt;htest&gt; &lt;tibble [1 × 8]&gt;</code></pre>
<p>Finally, we want to unnest the tidied data frames so we can see the results in a flat tibble. All together, this looks like:</p>
<div class="sourceCode" id="cb343"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb343-1"><a href="broom-and-dplyr.html#cb343-1" aria-hidden="true" tabindex="-1"></a>Orange <span class="sc">%&gt;%</span></span>
<span id="cb343-2"><a href="broom-and-dplyr.html#cb343-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>(<span class="at">data =</span> <span class="sc">-</span>Tree) <span class="sc">%&gt;%</span></span>
<span id="cb343-3"><a href="broom-and-dplyr.html#cb343-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb343-4"><a href="broom-and-dplyr.html#cb343-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">test =</span> <span class="fu">map</span>(data, <span class="sc">~</span> <span class="fu">cor.test</span>(.x<span class="sc">$</span>age, .x<span class="sc">$</span>circumference)), <span class="co"># S3 list-col</span></span>
<span id="cb343-5"><a href="broom-and-dplyr.html#cb343-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">tidied =</span> <span class="fu">map</span>(test, tidy)</span>
<span id="cb343-6"><a href="broom-and-dplyr.html#cb343-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb343-7"><a href="broom-and-dplyr.html#cb343-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(tidied)</span></code></pre></div>
<pre><code>## # A tibble: 5 × 11
##   Tree  data     test    estimate stati…¹ p.value param…² conf.…³ conf.…⁴ method
##   &lt;ord&gt; &lt;list&gt;   &lt;list&gt;     &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;int&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt; 
## 1 1     &lt;tibble&gt; &lt;htest&gt;    0.985    13.0 4.85e-5       5   0.901   0.998 Pears…
## 2 2     &lt;tibble&gt; &lt;htest&gt;    0.987    13.9 3.43e-5       5   0.914   0.998 Pears…
## 3 3     &lt;tibble&gt; &lt;htest&gt;    0.988    14.4 2.90e-5       5   0.919   0.998 Pears…
## 4 4     &lt;tibble&gt; &lt;htest&gt;    0.984    12.5 5.73e-5       5   0.895   0.998 Pears…
## 5 5     &lt;tibble&gt; &lt;htest&gt;    0.988    14.1 3.18e-5       5   0.916   0.998 Pears…
## # … with 1 more variable: alternative &lt;chr&gt;, and abbreviated variable names
## #   ¹​statistic, ²​parameter, ³​conf.low, ⁴​conf.high</code></pre>
<p>This workflow becomes even more useful when applied to regressions. Untidy output for a regression looks like:</p>
<div class="sourceCode" id="cb345"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb345-1"><a href="broom-and-dplyr.html#cb345-1" aria-hidden="true" tabindex="-1"></a>lm_fit <span class="ot">&lt;-</span> <span class="fu">lm</span>(age <span class="sc">~</span> circumference, <span class="at">data =</span> Orange)</span>
<span id="cb345-2"><a href="broom-and-dplyr.html#cb345-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(lm_fit)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = age ~ circumference, data = Orange)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -317.88 -140.90  -17.20   96.54  471.16 
## 
## Coefficients:
##               Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)    16.6036    78.1406   0.212    0.833    
## circumference   7.8160     0.6059  12.900 1.93e-14 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 203.1 on 33 degrees of freedom
## Multiple R-squared:  0.8345, Adjusted R-squared:  0.8295 
## F-statistic: 166.4 on 1 and 33 DF,  p-value: 1.931e-14</code></pre>
<p>where we tidy these results, we get multiple rows of output for each model:</p>
<div class="sourceCode" id="cb347"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb347-1"><a href="broom-and-dplyr.html#cb347-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tidy</span>(lm_fit)</span></code></pre></div>
<pre><code>## # A tibble: 2 × 5
##   term          estimate std.error statistic  p.value
##   &lt;chr&gt;            &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
## 1 (Intercept)      16.6     78.1       0.212 8.33e- 1
## 2 circumference     7.82     0.606    12.9   1.93e-14</code></pre>
<p>Now we can handle multiple regressions at once using exactly the same workflow as before:</p>
<div class="sourceCode" id="cb349"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb349-1"><a href="broom-and-dplyr.html#cb349-1" aria-hidden="true" tabindex="-1"></a>Orange <span class="sc">%&gt;%</span></span>
<span id="cb349-2"><a href="broom-and-dplyr.html#cb349-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>(<span class="at">data =</span> <span class="sc">-</span>Tree) <span class="sc">%&gt;%</span></span>
<span id="cb349-3"><a href="broom-and-dplyr.html#cb349-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb349-4"><a href="broom-and-dplyr.html#cb349-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">fit =</span> <span class="fu">map</span>(data, <span class="sc">~</span> <span class="fu">lm</span>(age <span class="sc">~</span> circumference, <span class="at">data =</span> .x)),</span>
<span id="cb349-5"><a href="broom-and-dplyr.html#cb349-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">tidied =</span> <span class="fu">map</span>(fit, tidy)</span>
<span id="cb349-6"><a href="broom-and-dplyr.html#cb349-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb349-7"><a href="broom-and-dplyr.html#cb349-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(tidied)</span></code></pre></div>
<pre><code>## # A tibble: 10 × 8
##    Tree  data             fit    term          estimate std.er…¹ stati…² p.value
##    &lt;ord&gt; &lt;list&gt;           &lt;list&gt; &lt;chr&gt;            &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
##  1 1     &lt;tibble [7 × 2]&gt; &lt;lm&gt;   (Intercept)    -265.     98.6    -2.68  4.36e-2
##  2 1     &lt;tibble [7 × 2]&gt; &lt;lm&gt;   circumference    11.9     0.919  13.0   4.85e-5
##  3 2     &lt;tibble [7 × 2]&gt; &lt;lm&gt;   (Intercept)    -132.     83.1    -1.59  1.72e-1
##  4 2     &lt;tibble [7 × 2]&gt; &lt;lm&gt;   circumference     7.80    0.560  13.9   3.43e-5
##  5 3     &lt;tibble [7 × 2]&gt; &lt;lm&gt;   (Intercept)    -210.     85.3    -2.46  5.74e-2
##  6 3     &lt;tibble [7 × 2]&gt; &lt;lm&gt;   circumference    12.0     0.835  14.4   2.90e-5
##  7 4     &lt;tibble [7 × 2]&gt; &lt;lm&gt;   (Intercept)     -76.5    88.3    -0.867 4.26e-1
##  8 4     &lt;tibble [7 × 2]&gt; &lt;lm&gt;   circumference     7.17    0.572  12.5   5.73e-5
##  9 5     &lt;tibble [7 × 2]&gt; &lt;lm&gt;   (Intercept)     -54.5    76.9    -0.709 5.10e-1
## 10 5     &lt;tibble [7 × 2]&gt; &lt;lm&gt;   circumference     8.79    0.621  14.1   3.18e-5
## # … with abbreviated variable names ¹​std.error, ²​statistic</code></pre>
<p>You can just as easily use multiple predictors in the regressions, as shown here on the <code>mtcars</code> dataset. We nest the data into automatic and manual cars (the <code>am</code> column), then perform the regression within each nested tibble.</p>
<div class="sourceCode" id="cb351"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb351-1"><a href="broom-and-dplyr.html#cb351-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(mtcars)</span>
<span id="cb351-2"><a href="broom-and-dplyr.html#cb351-2" aria-hidden="true" tabindex="-1"></a>mtcars <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(mtcars) <span class="co"># to play nicely with list-cols</span></span>
<span id="cb351-3"><a href="broom-and-dplyr.html#cb351-3" aria-hidden="true" tabindex="-1"></a>mtcars</span></code></pre></div>
<pre><code>## # A tibble: 32 × 11
##      mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb
##    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1  21       6  160    110  3.9   2.62  16.5     0     1     4     4
##  2  21       6  160    110  3.9   2.88  17.0     0     1     4     4
##  3  22.8     4  108     93  3.85  2.32  18.6     1     1     4     1
##  4  21.4     6  258    110  3.08  3.22  19.4     1     0     3     1
##  5  18.7     8  360    175  3.15  3.44  17.0     0     0     3     2
##  6  18.1     6  225    105  2.76  3.46  20.2     1     0     3     1
##  7  14.3     8  360    245  3.21  3.57  15.8     0     0     3     4
##  8  24.4     4  147.    62  3.69  3.19  20       1     0     4     2
##  9  22.8     4  141.    95  3.92  3.15  22.9     1     0     4     2
## 10  19.2     6  168.   123  3.92  3.44  18.3     1     0     4     4
## # … with 22 more rows</code></pre>
<div class="sourceCode" id="cb353"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb353-1"><a href="broom-and-dplyr.html#cb353-1" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span></span>
<span id="cb353-2"><a href="broom-and-dplyr.html#cb353-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>(<span class="at">data =</span> <span class="sc">-</span>am) <span class="sc">%&gt;%</span></span>
<span id="cb353-3"><a href="broom-and-dplyr.html#cb353-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb353-4"><a href="broom-and-dplyr.html#cb353-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">fit =</span> <span class="fu">map</span>(data, <span class="sc">~</span> <span class="fu">lm</span>(wt <span class="sc">~</span> mpg <span class="sc">+</span> qsec <span class="sc">+</span> gear, <span class="at">data =</span> .x)), <span class="co"># S3 list-col</span></span>
<span id="cb353-5"><a href="broom-and-dplyr.html#cb353-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">tidied =</span> <span class="fu">map</span>(fit, tidy)</span>
<span id="cb353-6"><a href="broom-and-dplyr.html#cb353-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb353-7"><a href="broom-and-dplyr.html#cb353-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(tidied)</span></code></pre></div>
<pre><code>## # A tibble: 8 × 8
##      am data               fit    term        estimate std.error stati…¹ p.value
##   &lt;dbl&gt; &lt;list&gt;             &lt;list&gt; &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
## 1     1 &lt;tibble [13 × 10]&gt; &lt;lm&gt;   (Intercept)   4.28      3.46    1.24   2.47e-1
## 2     1 &lt;tibble [13 × 10]&gt; &lt;lm&gt;   mpg          -0.101     0.0294 -3.43   7.50e-3
## 3     1 &lt;tibble [13 × 10]&gt; &lt;lm&gt;   qsec          0.0398    0.151   0.264  7.98e-1
## 4     1 &lt;tibble [13 × 10]&gt; &lt;lm&gt;   gear         -0.0229    0.349  -0.0656 9.49e-1
## 5     0 &lt;tibble [19 × 10]&gt; &lt;lm&gt;   (Intercept)   4.92      1.40    3.52   3.09e-3
## 6     0 &lt;tibble [19 × 10]&gt; &lt;lm&gt;   mpg          -0.192     0.0443 -4.33   5.91e-4
## 7     0 &lt;tibble [19 × 10]&gt; &lt;lm&gt;   qsec          0.0919    0.0983  0.935  3.65e-1
## 8     0 &lt;tibble [19 × 10]&gt; &lt;lm&gt;   gear          0.147     0.368   0.398  6.96e-1
## # … with abbreviated variable name ¹​statistic</code></pre>
<p>What if you want not just the <code>tidy</code> output, but the <code>augment</code> and <code>glance</code> outputs as well, while still performing each regression only once? Since we’re using list-columns, we can just fit the model once and use multiple list-columns to store the tidied, glanced and augmented outputs.</p>
<div class="sourceCode" id="cb355"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb355-1"><a href="broom-and-dplyr.html#cb355-1" aria-hidden="true" tabindex="-1"></a>regressions <span class="ot">&lt;-</span> mtcars <span class="sc">%&gt;%</span></span>
<span id="cb355-2"><a href="broom-and-dplyr.html#cb355-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>(<span class="at">data =</span> <span class="sc">-</span>am) <span class="sc">%&gt;%</span></span>
<span id="cb355-3"><a href="broom-and-dplyr.html#cb355-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb355-4"><a href="broom-and-dplyr.html#cb355-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">fit =</span> <span class="fu">map</span>(data, <span class="sc">~</span> <span class="fu">lm</span>(wt <span class="sc">~</span> mpg <span class="sc">+</span> qsec <span class="sc">+</span> gear, <span class="at">data =</span> .x)),</span>
<span id="cb355-5"><a href="broom-and-dplyr.html#cb355-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">tidied =</span> <span class="fu">map</span>(fit, tidy),</span>
<span id="cb355-6"><a href="broom-and-dplyr.html#cb355-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">glanced =</span> <span class="fu">map</span>(fit, glance),</span>
<span id="cb355-7"><a href="broom-and-dplyr.html#cb355-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">augmented =</span> <span class="fu">map</span>(fit, augment)</span>
<span id="cb355-8"><a href="broom-and-dplyr.html#cb355-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb355-9"><a href="broom-and-dplyr.html#cb355-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb355-10"><a href="broom-and-dplyr.html#cb355-10" aria-hidden="true" tabindex="-1"></a>regressions <span class="sc">%&gt;%</span></span>
<span id="cb355-11"><a href="broom-and-dplyr.html#cb355-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(tidied)</span></code></pre></div>
<pre><code>## # A tibble: 8 × 10
##      am data     fit    term   estim…¹ std.e…² stati…³ p.value glanced  augmen…⁴
##   &lt;dbl&gt; &lt;list&gt;   &lt;list&gt; &lt;chr&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;list&gt;   &lt;list&gt;  
## 1     1 &lt;tibble&gt; &lt;lm&gt;   (Inte…  4.28    3.46    1.24   2.47e-1 &lt;tibble&gt; &lt;tibble&gt;
## 2     1 &lt;tibble&gt; &lt;lm&gt;   mpg    -0.101   0.0294 -3.43   7.50e-3 &lt;tibble&gt; &lt;tibble&gt;
## 3     1 &lt;tibble&gt; &lt;lm&gt;   qsec    0.0398  0.151   0.264  7.98e-1 &lt;tibble&gt; &lt;tibble&gt;
## 4     1 &lt;tibble&gt; &lt;lm&gt;   gear   -0.0229  0.349  -0.0656 9.49e-1 &lt;tibble&gt; &lt;tibble&gt;
## 5     0 &lt;tibble&gt; &lt;lm&gt;   (Inte…  4.92    1.40    3.52   3.09e-3 &lt;tibble&gt; &lt;tibble&gt;
## 6     0 &lt;tibble&gt; &lt;lm&gt;   mpg    -0.192   0.0443 -4.33   5.91e-4 &lt;tibble&gt; &lt;tibble&gt;
## 7     0 &lt;tibble&gt; &lt;lm&gt;   qsec    0.0919  0.0983  0.935  3.65e-1 &lt;tibble&gt; &lt;tibble&gt;
## 8     0 &lt;tibble&gt; &lt;lm&gt;   gear    0.147   0.368   0.398  6.96e-1 &lt;tibble&gt; &lt;tibble&gt;
## # … with abbreviated variable names ¹​estimate, ²​std.error, ³​statistic,
## #   ⁴​augmented</code></pre>
<div class="sourceCode" id="cb357"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb357-1"><a href="broom-and-dplyr.html#cb357-1" aria-hidden="true" tabindex="-1"></a>regressions <span class="sc">%&gt;%</span></span>
<span id="cb357-2"><a href="broom-and-dplyr.html#cb357-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(glanced)</span></code></pre></div>
<pre><code>## # A tibble: 2 × 17
##      am data     fit    tidied   r.squared adj.r.s…¹ sigma stati…² p.value    df
##   &lt;dbl&gt; &lt;list&gt;   &lt;list&gt; &lt;list&gt;       &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;
## 1     1 &lt;tibble&gt; &lt;lm&gt;   &lt;tibble&gt;     0.833     0.778 0.291   15.0  7.59e-4     3
## 2     0 &lt;tibble&gt; &lt;lm&gt;   &lt;tibble&gt;     0.625     0.550 0.522    8.32 1.70e-3     3
## # … with 7 more variables: logLik &lt;dbl&gt;, AIC &lt;dbl&gt;, BIC &lt;dbl&gt;, deviance &lt;dbl&gt;,
## #   df.residual &lt;int&gt;, nobs &lt;int&gt;, augmented &lt;list&gt;, and abbreviated variable
## #   names ¹​adj.r.squared, ²​statistic</code></pre>
<div class="sourceCode" id="cb359"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb359-1"><a href="broom-and-dplyr.html#cb359-1" aria-hidden="true" tabindex="-1"></a>regressions <span class="sc">%&gt;%</span></span>
<span id="cb359-2"><a href="broom-and-dplyr.html#cb359-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(augmented)</span></code></pre></div>
<pre><code>## # A tibble: 32 × 15
##       am data     fit    tidied   glanced     wt   mpg  qsec  gear .fitted
##    &lt;dbl&gt; &lt;list&gt;   &lt;list&gt; &lt;list&gt;   &lt;list&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
##  1     1 &lt;tibble&gt; &lt;lm&gt;   &lt;tibble&gt; &lt;tibble&gt;  2.62  21    16.5     4    2.73
##  2     1 &lt;tibble&gt; &lt;lm&gt;   &lt;tibble&gt; &lt;tibble&gt;  2.88  21    17.0     4    2.75
##  3     1 &lt;tibble&gt; &lt;lm&gt;   &lt;tibble&gt; &lt;tibble&gt;  2.32  22.8  18.6     4    2.63
##  4     1 &lt;tibble&gt; &lt;lm&gt;   &lt;tibble&gt; &lt;tibble&gt;  2.2   32.4  19.5     4    1.70
##  5     1 &lt;tibble&gt; &lt;lm&gt;   &lt;tibble&gt; &lt;tibble&gt;  1.62  30.4  18.5     4    1.86
##  6     1 &lt;tibble&gt; &lt;lm&gt;   &lt;tibble&gt; &lt;tibble&gt;  1.84  33.9  19.9     4    1.56
##  7     1 &lt;tibble&gt; &lt;lm&gt;   &lt;tibble&gt; &lt;tibble&gt;  1.94  27.3  18.9     4    2.19
##  8     1 &lt;tibble&gt; &lt;lm&gt;   &lt;tibble&gt; &lt;tibble&gt;  2.14  26    16.7     5    2.21
##  9     1 &lt;tibble&gt; &lt;lm&gt;   &lt;tibble&gt; &lt;tibble&gt;  1.51  30.4  16.9     5    1.77
## 10     1 &lt;tibble&gt; &lt;lm&gt;   &lt;tibble&gt; &lt;tibble&gt;  3.17  15.8  14.5     5    3.15
## # … with 22 more rows, and 5 more variables: .resid &lt;dbl&gt;, .hat &lt;dbl&gt;,
## #   .sigma &lt;dbl&gt;, .cooksd &lt;dbl&gt;, .std.resid &lt;dbl&gt;</code></pre>
<p>By combining the estimates and p-values across all groups into the same tidy data frame (instead of a list of output model objects), a new class of analyses and visualizations becomes straightforward. This includes</p>
<ul>
<li>Sorting by p-value or estimate to find the most significant terms across all tests</li>
<li>P-value histograms</li>
<li>Volcano plots comparing p-values to effect size estimates</li>
</ul>
<p>In each of these cases, we can easily filter, facet, or distinguish based on the <code>term</code> column. In short, this makes the tools of tidy data analysis available for the <em>results</em> of data analysis and models, not just the inputs.</p>
<div id="tidy-bootstrapping" class="section level2 hasAnchor" number="6.1">
<h2><span class="header-section-number">6.1</span> Tidy bootstrapping<a href="broom-and-dplyr.html#tidy-bootstrapping" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Another place where combining model fits in a tidy way becomes useful is when performing bootstrapping or permutation tests. These approaches have been explored before, for instance by <a href="http://rstudio-pubs-static.s3.amazonaws.com/19698_a4c472606e3c43e4b94720506e49bb7b.html">Andrew MacDonald here</a>, and <a href="https://github.com/hadley/dplyr/issues/269">Hadley has explored efficient support for bootstrapping</a> as a potential enhancement to dplyr. broom fits naturally with dplyr in performing these analyses.</p>
<p>Bootstrapping consists of randomly sampling a dataset with replacement, then performing the analysis individually on each bootstrapped replicate. The variation in the resulting estimate is then a reasonable approximation of the variance in our estimate.</p>
<p>Let’s say we want to fit a nonlinear model to the weight/mileage relationship in the <code>mtcars</code> dataset.</p>
<div class="sourceCode" id="cb361"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb361-1"><a href="broom-and-dplyr.html#cb361-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb361-2"><a href="broom-and-dplyr.html#cb361-2" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_set</span>(<span class="fu">theme_minimal</span>())</span>
<span id="cb361-3"><a href="broom-and-dplyr.html#cb361-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(mpg, wt)) <span class="sc">+</span> </span>
<span id="cb361-4"><a href="broom-and-dplyr.html#cb361-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="05_broom_and_dplyr_files/figure-html/unnamed-chunk-16-1.png" width="672" /></p>
<p>We might use the method of nonlinear least squares (via the <code>nls</code> function) to fit a model.</p>
<div class="sourceCode" id="cb362"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb362-1"><a href="broom-and-dplyr.html#cb362-1" aria-hidden="true" tabindex="-1"></a>nlsfit <span class="ot">&lt;-</span> <span class="fu">nls</span>(mpg <span class="sc">~</span> k <span class="sc">/</span> wt <span class="sc">+</span> b, mtcars, <span class="at">start =</span> <span class="fu">list</span>(<span class="at">k =</span> <span class="dv">1</span>, <span class="at">b =</span> <span class="dv">0</span>))</span>
<span id="cb362-2"><a href="broom-and-dplyr.html#cb362-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(nlsfit)</span></code></pre></div>
<pre><code>## 
## Formula: mpg ~ k/wt + b
## 
## Parameters:
##   Estimate Std. Error t value Pr(&gt;|t|)    
## k   45.829      4.249  10.786 7.64e-12 ***
## b    4.386      1.536   2.855  0.00774 ** 
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 2.774 on 30 degrees of freedom
## 
## Number of iterations to convergence: 1 
## Achieved convergence tolerance: 2.877e-08</code></pre>
<div class="sourceCode" id="cb364"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb364-1"><a href="broom-and-dplyr.html#cb364-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(wt, mpg)) <span class="sc">+</span></span>
<span id="cb364-2"><a href="broom-and-dplyr.html#cb364-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb364-3"><a href="broom-and-dplyr.html#cb364-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="fu">predict</span>(nlsfit)))</span></code></pre></div>
<p><img src="05_broom_and_dplyr_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
<p>While this does provide a p-value and confidence intervals for the parameters, these are based on model assumptions that may not hold in real data. Bootstrapping is a popular method for providing confidence intervals and predictions that are more robust to the nature of the data.</p>
<p>We can use the <code>bootstraps</code> function in the <strong>rsample</strong> package to sample bootstrap replications. First, we construct 100 bootstrap replications of the data, each of which has been randomly sampled with replacement. The resulting object is an <code>rset</code>, which is a dataframe with a column of <code>rsplit</code> objects.</p>
<p>An <code>rsplit</code> object has two main components: an analysis dataset and an assessment dataset, accessible via <code>analysis(rsplit)</code> and <code>assessment(rsplit)</code> respectively. For bootstrap samples, the analysis dataset is the bootstrap sample itself, and the assessment dataset consists of all the out of bag samples.</p>
<div class="sourceCode" id="cb365"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb365-1"><a href="broom-and-dplyr.html#cb365-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb365-2"><a href="broom-and-dplyr.html#cb365-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rsample)</span>
<span id="cb365-3"><a href="broom-and-dplyr.html#cb365-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(broom)</span>
<span id="cb365-4"><a href="broom-and-dplyr.html#cb365-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(purrr)</span>
<span id="cb365-5"><a href="broom-and-dplyr.html#cb365-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb365-6"><a href="broom-and-dplyr.html#cb365-6" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">27</span>)</span>
<span id="cb365-7"><a href="broom-and-dplyr.html#cb365-7" aria-hidden="true" tabindex="-1"></a>boots <span class="ot">&lt;-</span> <span class="fu">bootstraps</span>(mtcars, <span class="at">times =</span> <span class="dv">100</span>)</span>
<span id="cb365-8"><a href="broom-and-dplyr.html#cb365-8" aria-hidden="true" tabindex="-1"></a>boots</span></code></pre></div>
<pre><code>## # Bootstrap sampling 
## # A tibble: 100 × 2
##    splits          id          
##    &lt;list&gt;          &lt;chr&gt;       
##  1 &lt;split [32/13]&gt; Bootstrap001
##  2 &lt;split [32/10]&gt; Bootstrap002
##  3 &lt;split [32/13]&gt; Bootstrap003
##  4 &lt;split [32/11]&gt; Bootstrap004
##  5 &lt;split [32/9]&gt;  Bootstrap005
##  6 &lt;split [32/10]&gt; Bootstrap006
##  7 &lt;split [32/11]&gt; Bootstrap007
##  8 &lt;split [32/13]&gt; Bootstrap008
##  9 &lt;split [32/11]&gt; Bootstrap009
## 10 &lt;split [32/11]&gt; Bootstrap010
## # … with 90 more rows</code></pre>
<p>We create a helper function to fit an <code>nls</code> model on each bootstrap sample, and then use <code>purrr::map</code> to apply this function to all the bootstrap samples at once. Similarly, we create a column of tidy coefficient information by unnesting.</p>
<div class="sourceCode" id="cb367"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb367-1"><a href="broom-and-dplyr.html#cb367-1" aria-hidden="true" tabindex="-1"></a>fit_nls_on_bootstrap <span class="ot">&lt;-</span> <span class="cf">function</span>(split) {</span>
<span id="cb367-2"><a href="broom-and-dplyr.html#cb367-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">nls</span>(mpg <span class="sc">~</span> k <span class="sc">/</span> wt <span class="sc">+</span> b, <span class="fu">analysis</span>(split), <span class="at">start =</span> <span class="fu">list</span>(<span class="at">k =</span> <span class="dv">1</span>, <span class="at">b =</span> <span class="dv">0</span>))</span>
<span id="cb367-3"><a href="broom-and-dplyr.html#cb367-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb367-4"><a href="broom-and-dplyr.html#cb367-4" aria-hidden="true" tabindex="-1"></a>boot_models <span class="ot">&lt;-</span> boots <span class="sc">%&gt;%</span> </span>
<span id="cb367-5"><a href="broom-and-dplyr.html#cb367-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">model =</span> <span class="fu">map</span>(splits, fit_nls_on_bootstrap),</span>
<span id="cb367-6"><a href="broom-and-dplyr.html#cb367-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">coef_info =</span> <span class="fu">map</span>(model, tidy))</span>
<span id="cb367-7"><a href="broom-and-dplyr.html#cb367-7" aria-hidden="true" tabindex="-1"></a>boot_models</span></code></pre></div>
<pre><code>## # Bootstrap sampling 
## # A tibble: 100 × 4
##    splits          id           model  coef_info       
##    &lt;list&gt;          &lt;chr&gt;        &lt;list&gt; &lt;list&gt;          
##  1 &lt;split [32/13]&gt; Bootstrap001 &lt;nls&gt;  &lt;tibble [2 × 5]&gt;
##  2 &lt;split [32/10]&gt; Bootstrap002 &lt;nls&gt;  &lt;tibble [2 × 5]&gt;
##  3 &lt;split [32/13]&gt; Bootstrap003 &lt;nls&gt;  &lt;tibble [2 × 5]&gt;
##  4 &lt;split [32/11]&gt; Bootstrap004 &lt;nls&gt;  &lt;tibble [2 × 5]&gt;
##  5 &lt;split [32/9]&gt;  Bootstrap005 &lt;nls&gt;  &lt;tibble [2 × 5]&gt;
##  6 &lt;split [32/10]&gt; Bootstrap006 &lt;nls&gt;  &lt;tibble [2 × 5]&gt;
##  7 &lt;split [32/11]&gt; Bootstrap007 &lt;nls&gt;  &lt;tibble [2 × 5]&gt;
##  8 &lt;split [32/13]&gt; Bootstrap008 &lt;nls&gt;  &lt;tibble [2 × 5]&gt;
##  9 &lt;split [32/11]&gt; Bootstrap009 &lt;nls&gt;  &lt;tibble [2 × 5]&gt;
## 10 &lt;split [32/11]&gt; Bootstrap010 &lt;nls&gt;  &lt;tibble [2 × 5]&gt;
## # … with 90 more rows</code></pre>
<div class="sourceCode" id="cb369"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb369-1"><a href="broom-and-dplyr.html#cb369-1" aria-hidden="true" tabindex="-1"></a>boot_coefs <span class="ot">&lt;-</span> boot_models <span class="sc">%&gt;%</span> </span>
<span id="cb369-2"><a href="broom-and-dplyr.html#cb369-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unnest</span>(coef_info)</span></code></pre></div>
<p>The unnested coefficient information contains a summary of each replication combined in a single data frame:</p>
<div class="sourceCode" id="cb370"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb370-1"><a href="broom-and-dplyr.html#cb370-1" aria-hidden="true" tabindex="-1"></a>boot_coefs</span></code></pre></div>
<pre><code>## # A tibble: 200 × 8
##    splits          id           model  term  estimate std.error stati…¹  p.value
##    &lt;list&gt;          &lt;chr&gt;        &lt;list&gt; &lt;chr&gt;    &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;
##  1 &lt;split [32/13]&gt; Bootstrap001 &lt;nls&gt;  k        42.1       4.05   10.4  1.91e-11
##  2 &lt;split [32/13]&gt; Bootstrap001 &lt;nls&gt;  b         5.39      1.43    3.78 6.93e- 4
##  3 &lt;split [32/10]&gt; Bootstrap002 &lt;nls&gt;  k        49.9       5.66    8.82 7.82e-10
##  4 &lt;split [32/10]&gt; Bootstrap002 &lt;nls&gt;  b         3.73      1.92    1.94 6.13e- 2
##  5 &lt;split [32/13]&gt; Bootstrap003 &lt;nls&gt;  k        37.8       2.68   14.1  9.01e-15
##  6 &lt;split [32/13]&gt; Bootstrap003 &lt;nls&gt;  b         6.73      1.17    5.75 2.78e- 6
##  7 &lt;split [32/11]&gt; Bootstrap004 &lt;nls&gt;  k        45.6       4.45   10.2  2.70e-11
##  8 &lt;split [32/11]&gt; Bootstrap004 &lt;nls&gt;  b         4.75      1.62    2.93 6.38e- 3
##  9 &lt;split [32/9]&gt;  Bootstrap005 &lt;nls&gt;  k        43.6       4.63    9.41 1.85e-10
## 10 &lt;split [32/9]&gt;  Bootstrap005 &lt;nls&gt;  b         5.89      1.68    3.51 1.44e- 3
## # … with 190 more rows, and abbreviated variable name ¹​statistic</code></pre>
<p>We can then calculate confidence intervals (using what is called the percentile method):</p>
<div class="sourceCode" id="cb372"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb372-1"><a href="broom-and-dplyr.html#cb372-1" aria-hidden="true" tabindex="-1"></a>alpha <span class="ot">&lt;-</span> .<span class="dv">05</span></span>
<span id="cb372-2"><a href="broom-and-dplyr.html#cb372-2" aria-hidden="true" tabindex="-1"></a>boot_coefs <span class="sc">%&gt;%</span> </span>
<span id="cb372-3"><a href="broom-and-dplyr.html#cb372-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(term) <span class="sc">%&gt;%</span></span>
<span id="cb372-4"><a href="broom-and-dplyr.html#cb372-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">low =</span> <span class="fu">quantile</span>(estimate, alpha <span class="sc">/</span> <span class="dv">2</span>),</span>
<span id="cb372-5"><a href="broom-and-dplyr.html#cb372-5" aria-hidden="true" tabindex="-1"></a>              <span class="at">high =</span> <span class="fu">quantile</span>(estimate, <span class="dv">1</span> <span class="sc">-</span> alpha <span class="sc">/</span> <span class="dv">2</span>))</span></code></pre></div>
<pre><code>## # A tibble: 2 × 3
##   term     low  high
##   &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt;
## 1 b      0.283  6.74
## 2 k     38.5   57.6</code></pre>
<p>Or we can use histograms to get a more detailed idea of the uncertainty in each estimate:</p>
<div class="sourceCode" id="cb374"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb374-1"><a href="broom-and-dplyr.html#cb374-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(boot_coefs, <span class="fu">aes</span>(estimate)) <span class="sc">+</span> </span>
<span id="cb374-2"><a href="broom-and-dplyr.html#cb374-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">2</span>) <span class="sc">+</span> </span>
<span id="cb374-3"><a href="broom-and-dplyr.html#cb374-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span> term, <span class="at">scales =</span> <span class="st">&quot;free&quot;</span>)</span></code></pre></div>
<p><img src="05_broom_and_dplyr_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>
<p>Or we can use <code>augment</code> to visualize the uncertainty in the curve:</p>
<div class="sourceCode" id="cb375"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb375-1"><a href="broom-and-dplyr.html#cb375-1" aria-hidden="true" tabindex="-1"></a>boot_aug <span class="ot">&lt;-</span> boot_models <span class="sc">%&gt;%</span> </span>
<span id="cb375-2"><a href="broom-and-dplyr.html#cb375-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">augmented =</span> <span class="fu">map</span>(model, augment)) <span class="sc">%&gt;%</span> </span>
<span id="cb375-3"><a href="broom-and-dplyr.html#cb375-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unnest</span>(augmented)</span>
<span id="cb375-4"><a href="broom-and-dplyr.html#cb375-4" aria-hidden="true" tabindex="-1"></a>boot_aug</span></code></pre></div>
<pre><code>## # A tibble: 3,200 × 8
##    splits          id           model  coef_info   mpg    wt .fitted .resid
##    &lt;list&gt;          &lt;chr&gt;        &lt;list&gt; &lt;list&gt;    &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;
##  1 &lt;split [32/13]&gt; Bootstrap001 &lt;nls&gt;  &lt;tibble&gt;   18.7  3.44    17.6  1.08 
##  2 &lt;split [32/13]&gt; Bootstrap001 &lt;nls&gt;  &lt;tibble&gt;   32.4  2.2     24.5  7.89 
##  3 &lt;split [32/13]&gt; Bootstrap001 &lt;nls&gt;  &lt;tibble&gt;   15.5  3.52    17.3 -1.84 
##  4 &lt;split [32/13]&gt; Bootstrap001 &lt;nls&gt;  &lt;tibble&gt;   22.8  3.15    18.7  4.05 
##  5 &lt;split [32/13]&gt; Bootstrap001 &lt;nls&gt;  &lt;tibble&gt;   24.4  3.19    18.6  5.82 
##  6 &lt;split [32/13]&gt; Bootstrap001 &lt;nls&gt;  &lt;tibble&gt;   30.4  1.62    31.4 -1.04 
##  7 &lt;split [32/13]&gt; Bootstrap001 &lt;nls&gt;  &lt;tibble&gt;   10.4  5.42    13.1 -2.75 
##  8 &lt;split [32/13]&gt; Bootstrap001 &lt;nls&gt;  &lt;tibble&gt;   21    2.62    21.4 -0.448
##  9 &lt;split [32/13]&gt; Bootstrap001 &lt;nls&gt;  &lt;tibble&gt;   19.2  3.84    16.3  2.87 
## 10 &lt;split [32/13]&gt; Bootstrap001 &lt;nls&gt;  &lt;tibble&gt;   21    2.62    21.4 -0.448
## # … with 3,190 more rows</code></pre>
<div class="sourceCode" id="cb377"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb377-1"><a href="broom-and-dplyr.html#cb377-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(boot_aug, <span class="fu">aes</span>(wt, mpg)) <span class="sc">+</span></span>
<span id="cb377-2"><a href="broom-and-dplyr.html#cb377-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb377-3"><a href="broom-and-dplyr.html#cb377-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> .fitted, <span class="at">group =</span> id), <span class="at">alpha=</span>.<span class="dv">2</span>)</span></code></pre></div>
<p><img src="05_broom_and_dplyr_files/figure-html/unnamed-chunk-24-1.png" width="672" /></p>
<p>With only a few small changes, we could easily perform bootstrapping with other kinds of predictive or hypothesis testing models, since the <code>tidy</code> and <code>augment</code> functions works for many statistical outputs. As another example, we could use <code>smooth.spline</code>, which fits a cubic smoothing spline to data:</p>
<div class="sourceCode" id="cb378"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb378-1"><a href="broom-and-dplyr.html#cb378-1" aria-hidden="true" tabindex="-1"></a>fit_spline_on_bootstrap <span class="ot">&lt;-</span> <span class="cf">function</span>(split) {</span>
<span id="cb378-2"><a href="broom-and-dplyr.html#cb378-2" aria-hidden="true" tabindex="-1"></a>    data <span class="ot">&lt;-</span> <span class="fu">analysis</span>(split)</span>
<span id="cb378-3"><a href="broom-and-dplyr.html#cb378-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">smooth.spline</span>(data<span class="sc">$</span>wt, data<span class="sc">$</span>mpg, <span class="at">df =</span> <span class="dv">4</span>)</span>
<span id="cb378-4"><a href="broom-and-dplyr.html#cb378-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb378-5"><a href="broom-and-dplyr.html#cb378-5" aria-hidden="true" tabindex="-1"></a>boot_splines <span class="ot">&lt;-</span> boots <span class="sc">%&gt;%</span> </span>
<span id="cb378-6"><a href="broom-and-dplyr.html#cb378-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">spline =</span> <span class="fu">map</span>(splits, fit_spline_on_bootstrap),</span>
<span id="cb378-7"><a href="broom-and-dplyr.html#cb378-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">aug_train =</span> <span class="fu">map</span>(spline, augment))</span>
<span id="cb378-8"><a href="broom-and-dplyr.html#cb378-8" aria-hidden="true" tabindex="-1"></a>splines_aug <span class="ot">&lt;-</span> boot_splines <span class="sc">%&gt;%</span> </span>
<span id="cb378-9"><a href="broom-and-dplyr.html#cb378-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unnest</span>(aug_train)</span>
<span id="cb378-10"><a href="broom-and-dplyr.html#cb378-10" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(splines_aug, <span class="fu">aes</span>(x, y)) <span class="sc">+</span></span>
<span id="cb378-11"><a href="broom-and-dplyr.html#cb378-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb378-12"><a href="broom-and-dplyr.html#cb378-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> .fitted, <span class="at">group =</span> id), <span class="at">alpha =</span> <span class="fl">0.2</span>)</span></code></pre></div>
<p><img src="05_broom_and_dplyr_files/figure-html/unnamed-chunk-25-1.png" width="672" /></p>
</div>
<div id="mais-detalhes-glance" class="section level2 hasAnchor" number="6.2">
<h2><span class="header-section-number">6.2</span> Mais detalhes (glance)<a href="broom-and-dplyr.html#mais-detalhes-glance" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="lm" class="section level3 hasAnchor" number="6.2.1">
<h3><span class="header-section-number">6.2.1</span> lm()<a href="broom-and-dplyr.html#lm" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb379"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb379-1"><a href="broom-and-dplyr.html#cb379-1" aria-hidden="true" tabindex="-1"></a>fit <span class="ot">&lt;-</span> <span class="fu">lm</span>(Volume <span class="sc">~</span> Girth <span class="sc">+</span> Height, trees)</span>
<span id="cb379-2"><a href="broom-and-dplyr.html#cb379-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tidy</span>(fit)</span></code></pre></div>
<pre><code>## # A tibble: 3 × 5
##   term        estimate std.error statistic  p.value
##   &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
## 1 (Intercept)  -58.0       8.64      -6.71 2.75e- 7
## 2 Girth          4.71      0.264     17.8  8.22e-17
## 3 Height         0.339     0.130      2.61 1.45e- 2</code></pre>
<div class="sourceCode" id="cb381"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb381-1"><a href="broom-and-dplyr.html#cb381-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glance</span>(fit)</span></code></pre></div>
<pre><code>## # A tibble: 1 × 12
##   r.squared adj.r.squa…¹ sigma stati…²  p.value    df logLik   AIC   BIC devia…³
##       &lt;dbl&gt;        &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
## 1     0.948        0.944  3.88    255. 1.07e-18     2  -84.5  177.  183.    422.
## # … with 2 more variables: df.residual &lt;int&gt;, nobs &lt;int&gt;, and abbreviated
## #   variable names ¹​adj.r.squared, ²​statistic, ³​deviance</code></pre>
<div class="sourceCode" id="cb383"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb383-1"><a href="broom-and-dplyr.html#cb383-1" aria-hidden="true" tabindex="-1"></a><span class="fu">augment</span>(fit, <span class="at">data =</span> trees)</span></code></pre></div>
<pre><code>## # A tibble: 31 × 9
##    Girth Height Volume .fitted .resid   .hat .sigma   .cooksd .std.resid
##    &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;
##  1   8.3     70   10.3    4.84  5.46  0.116    3.79 0.0978        1.50  
##  2   8.6     65   10.3    4.55  5.75  0.147    3.77 0.148         1.60  
##  3   8.8     63   10.2    4.82  5.38  0.177    3.78 0.167         1.53  
##  4  10.5     72   16.4   15.9   0.526 0.0592   3.95 0.000409      0.140 
##  5  10.7     81   18.8   19.9  -1.07  0.121    3.95 0.00394      -0.294 
##  6  10.8     83   19.7   21.0  -1.32  0.156    3.94 0.00840      -0.370 
##  7  11       66   15.6   16.2  -0.593 0.115    3.95 0.00114      -0.162 
##  8  11       75   18.2   19.2  -1.05  0.0515   3.95 0.00138      -0.277 
##  9  11.1     80   22.6   21.4   1.19  0.0920   3.95 0.00348       0.321 
## 10  11.2     75   19.9   20.2  -0.288 0.0480   3.95 0.0000968    -0.0759
## # … with 21 more rows</code></pre>
<div class="sourceCode" id="cb385"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb385-1"><a href="broom-and-dplyr.html#cb385-1" aria-hidden="true" tabindex="-1"></a><span class="fu">methods</span>(<span class="st">&quot;tidy&quot;</span>)</span></code></pre></div>
<pre><code>##   [1] tidy.aareg*                    tidy.acf*                     
##   [3] tidy.anova*                    tidy.aov*                     
##   [5] tidy.aovlist*                  tidy.Arima*                   
##   [7] tidy.betamfx*                  tidy.betareg*                 
##   [9] tidy.biglm*                    tidy.binDesign*               
##  [11] tidy.binWidth*                 tidy.boot*                    
##  [13] tidy.btergm*                   tidy.cch*                     
##  [15] tidy.character*                tidy.cld*                     
##  [17] tidy.clm*                      tidy.clmm*                    
##  [19] tidy.coeftest*                 tidy.confint.glht*            
##  [21] tidy.confusionMatrix*          tidy.coxph*                   
##  [23] tidy.crr*                      tidy.cv.glmnet*               
##  [25] tidy.data.frame*               tidy.default*                 
##  [27] tidy.density*                  tidy.dist*                    
##  [29] tidy.drc*                      tidy.durbinWatsonTest*        
##  [31] tidy.emmGrid*                  tidy.epi.2by2*                
##  [33] tidy.ergm*                     tidy.factanal*                
##  [35] tidy.felm*                     tidy.fitdistr*                
##  [37] tidy.fixest*                   tidy.ftable*                  
##  [39] tidy.gam*                      tidy.Gam*                     
##  [41] tidy.garch*                    tidy.geeglm*                  
##  [43] tidy.glht*                     tidy.glm*                     
##  [45] tidy.glmnet*                   tidy.glmrob*                  
##  [47] tidy.glmRob*                   tidy.gmm*                     
##  [49] tidy.htest*                    tidy.ivreg*                   
##  [51] tidy.kappa*                    tidy.kde*                     
##  [53] tidy.Kendall*                  tidy.kmeans*                  
##  [55] tidy.lavaan*                   tidy.leveneTest*              
##  [57] tidy.Line*                     tidy.Lines*                   
##  [59] tidy.list*                     tidy.lm*                      
##  [61] tidy.lm.beta*                  tidy.lmodel2*                 
##  [63] tidy.lmrob*                    tidy.lmRob*                   
##  [65] tidy.logical*                  tidy.logitmfx*                
##  [67] tidy.lsmobj*                   tidy.manova*                  
##  [69] tidy.map*                      tidy.margins*                 
##  [71] tidy.Mclust*                   tidy.mediate*                 
##  [73] tidy.mfx*                      tidy.mjoint*                  
##  [75] tidy.mle2*                     tidy.mlm*                     
##  [77] tidy.mlogit*                   tidy.muhaz*                   
##  [79] tidy.multinom*                 tidy.negbin*                  
##  [81] tidy.negbinmfx*                tidy.nested_cv*               
##  [83] tidy.nlrq*                     tidy.nls*                     
##  [85] tidy.NULL*                     tidy.numeric*                 
##  [87] tidy.orcutt*                   tidy.pairwise.htest*          
##  [89] tidy.pam*                      tidy.plm*                     
##  [91] tidy.poissonmfx*               tidy.poLCA*                   
##  [93] tidy.polr*                     tidy.Polygon*                 
##  [95] tidy.Polygons*                 tidy.power.htest*             
##  [97] tidy.prcomp*                   tidy.probitmfx*               
##  [99] tidy.pyears*                   tidy.rcorr*                   
## [101] tidy.ref.grid*                 tidy.regsubsets*              
## [103] tidy.ridgelm*                  tidy.rlm*                     
## [105] tidy.rma*                      tidy.roc*                     
## [107] tidy.rq*                       tidy.rqs*                     
## [109] tidy.rset*                     tidy.rsplit*                  
## [111] tidy.sarlm*                    tidy.Sarlm*                   
## [113] tidy.SpatialLinesDataFrame*    tidy.SpatialPolygons*         
## [115] tidy.SpatialPolygonsDataFrame* tidy.spec*                    
## [117] tidy.speedglm*                 tidy.speedlm*                 
## [119] tidy.summary.glht*             tidy.summary.lm*              
## [121] tidy.summary.plm*              tidy.summary_emm*             
## [123] tidy.summaryDefault*           tidy.survdiff*                
## [125] tidy.survexp*                  tidy.survfit*                 
## [127] tidy.survreg*                  tidy.svyglm*                  
## [129] tidy.svyolr*                   tidy.systemfit*               
## [131] tidy.table*                    tidy.tobit*                   
## [133] tidy.ts*                       tidy.TukeyHSD*                
## [135] tidy.varest*                   tidy.vfold_cv*                
## [137] tidy.zoo*                     
## see &#39;?methods&#39; for accessing help and source code</code></pre>
<div class="sourceCode" id="cb387"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb387-1"><a href="broom-and-dplyr.html#cb387-1" aria-hidden="true" tabindex="-1"></a><span class="fu">methods</span>(<span class="st">&quot;glance&quot;</span>)</span></code></pre></div>
<pre><code>##  [1] glance.aareg*            glance.anova*            glance.aov*             
##  [4] glance.Arima*            glance.betamfx*          glance.betareg*         
##  [7] glance.biglm*            glance.binDesign*        glance.cch*             
## [10] glance.clm*              glance.clmm*             glance.coeftest*        
## [13] glance.coxph*            glance.crr*              glance.cv.glmnet*       
## [16] glance.data.frame*       glance.default*          glance.drc*             
## [19] glance.durbinWatsonTest* glance.ergm*             glance.factanal*        
## [22] glance.felm*             glance.fitdistr*         glance.fixest*          
## [25] glance.gam*              glance.Gam*              glance.garch*           
## [28] glance.geeglm*           glance.glm*              glance.glmnet*          
## [31] glance.glmRob*           glance.gmm*              glance.htest*           
## [34] glance.ivreg*            glance.kmeans*           glance.lavaan*          
## [37] glance.list*             glance.lm*               glance.lmodel2*         
## [40] glance.lmrob*            glance.lmRob*            glance.logitmfx*        
## [43] glance.margins*          glance.Mclust*           glance.mfx*             
## [46] glance.mjoint*           glance.mlogit*           glance.muhaz*           
## [49] glance.multinom*         glance.negbin*           glance.negbinmfx*       
## [52] glance.nlrq*             glance.nls*              glance.NULL*            
## [55] glance.orcutt*           glance.pam*              glance.plm*             
## [58] glance.poissonmfx*       glance.poLCA*            glance.polr*            
## [61] glance.probitmfx*        glance.pyears*           glance.ridgelm*         
## [64] glance.rlm*              glance.rma*              glance.rq*              
## [67] glance.rqs*              glance.sarlm*            glance.Sarlm*           
## [70] glance.smooth.spline*    glance.speedglm*         glance.speedlm*         
## [73] glance.summary.lm*       glance.summaryDefault*   glance.survdiff*        
## [76] glance.survexp*          glance.survfit*          glance.survreg*         
## [79] glance.svyglm*           glance.svyolr*           glance.tbl_df*          
## [82] glance.varest*          
## see &#39;?methods&#39; for accessing help and source code</code></pre>
<div class="sourceCode" id="cb389"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb389-1"><a href="broom-and-dplyr.html#cb389-1" aria-hidden="true" tabindex="-1"></a><span class="fu">methods</span>(<span class="st">&quot;augment&quot;</span>)</span></code></pre></div>
<pre><code>##  [1] augment.betamfx*       augment.betareg*       augment.clm*          
##  [4] augment.coxph*         augment.data.frame*    augment.decomposed.ts*
##  [7] augment.default*       augment.drc*           augment.factanal*     
## [10] augment.felm*          augment.fixest*        augment.gam*          
## [13] augment.glm*           augment.glmrob*        augment.glmRob*       
## [16] augment.htest*         augment.ivreg*         augment.kmeans*       
## [19] augment.lm*            augment.lmrob*         augment.lmRob*        
## [22] augment.loess*         augment.logitmfx*      augment.margins*      
## [25] augment.Mclust*        augment.mfx*           augment.mjoint*       
## [28] augment.mlogit*        augment.negbinmfx*     augment.nlrq*         
## [31] augment.nls*           augment.NULL*          augment.pam*          
## [34] augment.plm*           augment.poissonmfx*    augment.poLCA*        
## [37] augment.polr*          augment.prcomp*        augment.probitmfx*    
## [40] augment.rlm*           augment.rma*           augment.rq*           
## [43] augment.rqs*           augment.sarlm*         augment.Sarlm*        
## [46] augment.smooth.spline* augment.speedglm*      augment.speedlm*      
## [49] augment.stl*           augment.survreg*      
## see &#39;?methods&#39; for accessing help and source code</code></pre>
<div class="sourceCode" id="cb391"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb391-1"><a href="broom-and-dplyr.html#cb391-1" aria-hidden="true" tabindex="-1"></a><span class="co">#tirei da ajuda do R!</span></span>
<span id="cb391-2"><a href="broom-and-dplyr.html#cb391-2" aria-hidden="true" tabindex="-1"></a><span class="co"># fit models</span></span>
<span id="cb391-3"><a href="broom-and-dplyr.html#cb391-3" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">lm</span>(mpg <span class="sc">~</span> wt <span class="sc">+</span> qsec <span class="sc">+</span> disp, mtcars)</span>
<span id="cb391-4"><a href="broom-and-dplyr.html#cb391-4" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="fu">lm</span>(mpg <span class="sc">~</span> wt <span class="sc">+</span> qsec, mtcars)</span>
<span id="cb391-5"><a href="broom-and-dplyr.html#cb391-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb391-6"><a href="broom-and-dplyr.html#cb391-6" aria-hidden="true" tabindex="-1"></a>mod <span class="ot">&lt;-</span> <span class="fu">anova</span>(a, b)</span>
<span id="cb391-7"><a href="broom-and-dplyr.html#cb391-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb391-8"><a href="broom-and-dplyr.html#cb391-8" aria-hidden="true" tabindex="-1"></a><span class="co"># summarize model fit with tidiers</span></span>
<span id="cb391-9"><a href="broom-and-dplyr.html#cb391-9" aria-hidden="true" tabindex="-1"></a><span class="fu">tidy</span>(mod)</span></code></pre></div>
<pre><code>## # A tibble: 2 × 7
##   term                   df.residual   rss    df    sumsq statistic p.value
##   &lt;chr&gt;                        &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;
## 1 mpg ~ wt + qsec + disp          28  195.    NA NA       NA         NA    
## 2 mpg ~ wt + qsec                 29  195.    -1 -0.00102  0.000147   0.990</code></pre>
<div class="sourceCode" id="cb393"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb393-1"><a href="broom-and-dplyr.html#cb393-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glance</span>(mod)</span></code></pre></div>
<pre><code>## # A tibble: 1 × 2
##   deviance df.residual
##      &lt;dbl&gt;       &lt;dbl&gt;
## 1     195.          29</code></pre>
<div class="sourceCode" id="cb395"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb395-1"><a href="broom-and-dplyr.html#cb395-1" aria-hidden="true" tabindex="-1"></a><span class="co"># car::linearHypothesis() example</span></span>
<span id="cb395-2"><a href="broom-and-dplyr.html#cb395-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(car)</span>
<span id="cb395-3"><a href="broom-and-dplyr.html#cb395-3" aria-hidden="true" tabindex="-1"></a>mod_lht <span class="ot">&lt;-</span> <span class="fu">linearHypothesis</span>(a, <span class="st">&quot;wt - disp&quot;</span>)</span>
<span id="cb395-4"><a href="broom-and-dplyr.html#cb395-4" aria-hidden="true" tabindex="-1"></a><span class="fu">tidy</span>(mod_lht)</span></code></pre></div>
<pre><code>## # A tibble: 1 × 10
##   term      null.value estim…¹ std.e…² stati…³ p.value df.re…⁴   rss    df sumsq
##   &lt;chr&gt;          &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 wt - disp          0   -5.03    1.23    16.6 3.39e-4      28  195.     1  116.
## # … with abbreviated variable names ¹​estimate, ²​std.error, ³​statistic,
## #   ⁴​df.residual</code></pre>
<div class="sourceCode" id="cb397"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb397-1"><a href="broom-and-dplyr.html#cb397-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glance</span>(mod_lht)</span></code></pre></div>
<pre><code>## # A tibble: 1 × 2
##   deviance df.residual
##      &lt;dbl&gt;       &lt;dbl&gt;
## 1     195.          28</code></pre>
</div>
<div id="nls" class="section level3 hasAnchor" number="6.2.2">
<h3><span class="header-section-number">6.2.2</span> nls()<a href="broom-and-dplyr.html#nls" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb399"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb399-1"><a href="broom-and-dplyr.html#cb399-1" aria-hidden="true" tabindex="-1"></a><span class="co"># fit model</span></span>
<span id="cb399-2"><a href="broom-and-dplyr.html#cb399-2" aria-hidden="true" tabindex="-1"></a>nn <span class="ot">&lt;-</span> <span class="fu">nls</span>(mpg <span class="sc">~</span> k <span class="sc">*</span> e<span class="sc">^</span>wt, <span class="at">data =</span> mtcars, <span class="at">start =</span> <span class="fu">list</span>(<span class="at">k =</span> <span class="dv">1</span>, <span class="at">e =</span> <span class="dv">2</span>))</span>
<span id="cb399-3"><a href="broom-and-dplyr.html#cb399-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb399-4"><a href="broom-and-dplyr.html#cb399-4" aria-hidden="true" tabindex="-1"></a><span class="co"># summarize model fit with tidiers + visualization</span></span>
<span id="cb399-5"><a href="broom-and-dplyr.html#cb399-5" aria-hidden="true" tabindex="-1"></a><span class="fu">tidy</span>(nn)</span></code></pre></div>
<pre><code>## # A tibble: 2 × 5
##   term  estimate std.error statistic  p.value
##   &lt;chr&gt;    &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
## 1 k       49.7      3.79        13.1 5.96e-14
## 2 e        0.746    0.0199      37.5 8.86e-27</code></pre>
<div class="sourceCode" id="cb401"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb401-1"><a href="broom-and-dplyr.html#cb401-1" aria-hidden="true" tabindex="-1"></a><span class="fu">augment</span>(nn)</span></code></pre></div>
<pre><code>## # A tibble: 32 × 4
##      mpg    wt .fitted .resid
##    &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;
##  1  21    2.62    23.0 -2.01 
##  2  21    2.88    21.4 -0.352
##  3  22.8  2.32    25.1 -2.33 
##  4  21.4  3.22    19.3  2.08 
##  5  18.7  3.44    18.1  0.611
##  6  18.1  3.46    18.0  0.117
##  7  14.3  3.57    17.4 -3.11 
##  8  24.4  3.19    19.5  4.93 
##  9  22.8  3.15    19.7  3.10 
## 10  19.2  3.44    18.1  1.11 
## # … with 22 more rows</code></pre>
<div class="sourceCode" id="cb403"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb403-1"><a href="broom-and-dplyr.html#cb403-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glance</span>(nn)</span></code></pre></div>
<pre><code>## # A tibble: 1 × 9
##   sigma isConv     finTol logLik   AIC   BIC deviance df.residual  nobs
##   &lt;dbl&gt; &lt;lgl&gt;       &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;       &lt;int&gt; &lt;int&gt;
## 1  2.67 TRUE   0.00000204  -75.8  158.  162.     214.          30    32</code></pre>
<div class="sourceCode" id="cb405"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb405-1"><a href="broom-and-dplyr.html#cb405-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">augment</span>(nn), <span class="fu">aes</span>(wt, mpg)) <span class="sc">+</span></span>
<span id="cb405-2"><a href="broom-and-dplyr.html#cb405-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb405-3"><a href="broom-and-dplyr.html#cb405-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> .fitted))</span></code></pre></div>
<p><img src="05_broom_and_dplyr_files/figure-html/unnamed-chunk-27-1.png" width="672" /></p>
<div class="sourceCode" id="cb406"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb406-1"><a href="broom-and-dplyr.html#cb406-1" aria-hidden="true" tabindex="-1"></a>newdata <span class="ot">&lt;-</span> <span class="fu">head</span>(mtcars)</span>
<span id="cb406-2"><a href="broom-and-dplyr.html#cb406-2" aria-hidden="true" tabindex="-1"></a>newdata<span class="sc">$</span>wt <span class="ot">&lt;-</span> newdata<span class="sc">$</span>wt <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb406-3"><a href="broom-and-dplyr.html#cb406-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb406-4"><a href="broom-and-dplyr.html#cb406-4" aria-hidden="true" tabindex="-1"></a><span class="fu">augment</span>(nn, <span class="at">newdata =</span> newdata)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 12
##     mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb .fitted
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
## 1  21       6   160   110  3.9   3.62  16.5     0     1     4     4    17.2
## 2  21       6   160   110  3.9   3.88  17.0     0     1     4     4    15.9
## 3  22.8     4   108    93  3.85  3.32  18.6     1     1     4     1    18.7
## 4  21.4     6   258   110  3.08  4.22  19.4     1     0     3     1    14.4
## 5  18.7     8   360   175  3.15  4.44  17.0     0     0     3     2    13.5
## 6  18.1     6   225   105  2.76  4.46  20.2     1     0     3     1    13.4</code></pre>
</div>
<div id="glm" class="section level3 hasAnchor" number="6.2.3">
<h3><span class="header-section-number">6.2.3</span> glm()<a href="broom-and-dplyr.html#glm" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb408"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb408-1"><a href="broom-and-dplyr.html#cb408-1" aria-hidden="true" tabindex="-1"></a>g <span class="ot">&lt;-</span> <span class="fu">glm</span>(am <span class="sc">~</span> mpg, mtcars, <span class="at">family =</span> <span class="st">&quot;binomial&quot;</span>)</span>
<span id="cb408-2"><a href="broom-and-dplyr.html#cb408-2" aria-hidden="true" tabindex="-1"></a>g</span></code></pre></div>
<pre><code>## 
## Call:  glm(formula = am ~ mpg, family = &quot;binomial&quot;, data = mtcars)
## 
## Coefficients:
## (Intercept)          mpg  
##      -6.604        0.307  
## 
## Degrees of Freedom: 31 Total (i.e. Null);  30 Residual
## Null Deviance:       43.23 
## Residual Deviance: 29.68     AIC: 33.68</code></pre>
<div class="sourceCode" id="cb410"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb410-1"><a href="broom-and-dplyr.html#cb410-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glance</span>(g)</span></code></pre></div>
<pre><code>## # A tibble: 1 × 8
##   null.deviance df.null logLik   AIC   BIC deviance df.residual  nobs
##           &lt;dbl&gt;   &lt;int&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;       &lt;int&gt; &lt;int&gt;
## 1          43.2      31  -14.8  33.7  36.6     29.7          30    32</code></pre>
</div>
<div id="gam" class="section level3 hasAnchor" number="6.2.4">
<h3><span class="header-section-number">6.2.4</span> gam()<a href="broom-and-dplyr.html#gam" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb412"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb412-1"><a href="broom-and-dplyr.html#cb412-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load libraries for models and data</span></span>
<span id="cb412-2"><a href="broom-and-dplyr.html#cb412-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mgcv)</span>
<span id="cb412-3"><a href="broom-and-dplyr.html#cb412-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb412-4"><a href="broom-and-dplyr.html#cb412-4" aria-hidden="true" tabindex="-1"></a><span class="co"># fit model</span></span>
<span id="cb412-5"><a href="broom-and-dplyr.html#cb412-5" aria-hidden="true" tabindex="-1"></a>g <span class="ot">&lt;-</span> <span class="fu">gam</span>(mpg <span class="sc">~</span> <span class="fu">s</span>(hp) <span class="sc">+</span> am <span class="sc">+</span> qsec, <span class="at">data =</span> mtcars)</span>
<span id="cb412-6"><a href="broom-and-dplyr.html#cb412-6" aria-hidden="true" tabindex="-1"></a>g</span></code></pre></div>
<pre><code>## 
## Family: gaussian 
## Link function: identity 
## 
## Formula:
## mpg ~ s(hp) + am + qsec
## 
## Estimated degrees of freedom:
## 2.36  total = 5.36 
## 
## GCV score: 8.837538</code></pre>
<div class="sourceCode" id="cb414"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb414-1"><a href="broom-and-dplyr.html#cb414-1" aria-hidden="true" tabindex="-1"></a><span class="co"># summarize model fit with tidiers</span></span>
<span id="cb414-2"><a href="broom-and-dplyr.html#cb414-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tidy</span>(g)</span></code></pre></div>
<pre><code>## # A tibble: 1 × 5
##   term    edf ref.df statistic p.value
##   &lt;chr&gt; &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;
## 1 s(hp)  2.36   3.02      6.34 0.00218</code></pre>
<div class="sourceCode" id="cb416"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb416-1"><a href="broom-and-dplyr.html#cb416-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tidy</span>(g, <span class="at">parametric =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## # A tibble: 3 × 5
##   term        estimate std.error statistic p.value
##   &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;
## 1 (Intercept)  16.7        9.83      1.70  0.101  
## 2 am            4.37       1.56      2.81  0.00918
## 3 qsec          0.0904     0.525     0.172 0.865</code></pre>
<div class="sourceCode" id="cb418"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb418-1"><a href="broom-and-dplyr.html#cb418-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glance</span>(g)</span></code></pre></div>
<pre><code>## # A tibble: 1 × 7
##      df logLik   AIC   BIC deviance df.residual  nobs
##   &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;       &lt;dbl&gt; &lt;int&gt;
## 1  5.36  -74.4  162.  171.     196.        26.6    32</code></pre>
<div class="sourceCode" id="cb420"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb420-1"><a href="broom-and-dplyr.html#cb420-1" aria-hidden="true" tabindex="-1"></a><span class="fu">augment</span>(g)</span></code></pre></div>
<pre><code>## # A tibble: 32 × 10
##      mpg    am  qsec    hp .fitted .se.fit .resid   .hat .sigma  .cooksd
##    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;lgl&gt;     &lt;dbl&gt;
##  1  21       1  16.5   110    24.3   1.03  -3.25  0.145  NA     0.0529  
##  2  21       1  17.0   110    24.3   0.925 -3.30  0.116  NA     0.0411  
##  3  22.8     1  18.6    93    26.0   0.894 -3.22  0.109  NA     0.0359  
##  4  21.4     0  19.4   110    20.2   0.827  1.25  0.0930 NA     0.00448 
##  5  18.7     0  17.0   175    15.7   0.815  3.02  0.0902 NA     0.0251  
##  6  18.1     0  20.2   105    20.7   0.914 -2.56  0.113  NA     0.0240  
##  7  14.3     0  15.8   245    12.7   1.11   1.63  0.167  NA     0.0162  
##  8  24.4     0  20      62    25.0   1.45  -0.618 0.287  NA     0.00545 
##  9  22.8     0  22.9    95    21.8   1.81   0.959 0.446  NA     0.0340  
## 10  19.2     0  18.3   123    19.0   0.864  0.211 0.102  NA     0.000142
## # … with 22 more rows</code></pre>
</div>
</div>
<div id="links" class="section level2 hasAnchor" number="6.3">
<h2><span class="header-section-number">6.3</span> links<a href="broom-and-dplyr.html#links" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="https://www.youtube.com/watch?v=1bnhT8tlCJQ&amp;list=PLBnFxG6owe1F-3y0_aphRZ5YHH06Qr1Kj" class="uri">https://www.youtube.com/watch?v=1bnhT8tlCJQ&amp;list=PLBnFxG6owe1F-3y0_aphRZ5YHH06Qr1Kj</a></p>
<p><a href="https://bookdown.org/bruno_lucian_costa/CursoIntermediarioR/tidyr.html" class="uri">https://bookdown.org/bruno_lucian_costa/CursoIntermediarioR/tidyr.html</a></p>
<p><a href="https://bookdown.org/Maxine/r4ds/nesting.html" class="uri">https://bookdown.org/Maxine/r4ds/nesting.html</a></p>
<p><a href="https://livro.curso-r.com/7-3-tidyr.html" class="uri">https://livro.curso-r.com/7-3-tidyr.html</a></p>
<p><a href="http://leg.ufpr.br/~walmes/cursoR/data-vis/slides/04-tidyr.pdf" class="uri">http://leg.ufpr.br/~walmes/cursoR/data-vis/slides/04-tidyr.pdf</a></p>
<p>Ver como citar referências <span class="citation">Wickham et al. (<a href="#ref-tidyverse2019" role="doc-biblioref">2019</a>)</span>, <span class="citation">Wickham (<a href="#ref-R-tidyverse" role="doc-biblioref">2023</a>)</span>, <span class="citation">Wickham, Vaughan, e Girlich (<a href="#ref-R-tidyr" role="doc-biblioref">2023</a>)</span>, <span class="citation">Wickham, Chang, et al. (<a href="#ref-R-ggplot2" role="doc-biblioref">2023</a>)</span>, <span class="citation">Wickham e Henry (<a href="#ref-R-purrr" role="doc-biblioref">2023</a>)</span>, <span class="citation">Wickham, François, et al. (<a href="#ref-R-dplyr" role="doc-biblioref">2023</a>)</span>, <span class="citation">Xie (<a href="#ref-R-knitr" role="doc-biblioref">2023b</a>)</span>, <span class="citation">Xie (<a href="#ref-R-bookdown" role="doc-biblioref">2023a</a>)</span></p>

</div>
</div>
<h3> References<a href="references.html#references" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-R-tidyverse" class="csl-entry">
Wickham, Hadley. 2023. <em>tidyverse: Easily Install and Load the Tidyverse</em>. <a href="https://CRAN.R-project.org/package=tidyverse">https://CRAN.R-project.org/package=tidyverse</a>.
</div>
<div id="ref-tidyverse2019" class="csl-entry">
Wickham, Hadley, Mara Averick, Jennifer Bryan, Winston Chang, Lucy D’Agostino McGowan, Romain François, Garrett Grolemund, et al. 2019. <span>"Welcome to the <span>tidyverse</span>"</span>. <em>Journal of Open Source Software</em> 4 (43): 1686. <a href="https://doi.org/10.21105/joss.01686">https://doi.org/10.21105/joss.01686</a>.
</div>
<div id="ref-R-ggplot2" class="csl-entry">
Wickham, Hadley, Winston Chang, Lionel Henry, Thomas Lin Pedersen, Kohske Takahashi, Claus Wilke, Kara Woo, Hiroaki Yutani, e Dewey Dunnington. 2023. <em>ggplot2: Create Elegant Data Visualisations Using the Grammar of Graphics</em>. <a href="https://CRAN.R-project.org/package=ggplot2">https://CRAN.R-project.org/package=ggplot2</a>.
</div>
<div id="ref-R-dplyr" class="csl-entry">
Wickham, Hadley, Romain François, Lionel Henry, Kirill Müller, e Davis Vaughan. 2023. <em>dplyr: A Grammar of Data Manipulation</em>. <a href="https://CRAN.R-project.org/package=dplyr">https://CRAN.R-project.org/package=dplyr</a>.
</div>
<div id="ref-R-purrr" class="csl-entry">
Wickham, Hadley, e Lionel Henry. 2023. <em>purrr: Functional Programming Tools</em>. <a href="https://CRAN.R-project.org/package=purrr">https://CRAN.R-project.org/package=purrr</a>.
</div>
<div id="ref-R-tidyr" class="csl-entry">
Wickham, Hadley, Davis Vaughan, e Maximilian Girlich. 2023. <em>tidyr: Tidy Messy Data</em>. <a href="https://CRAN.R-project.org/package=tidyr">https://CRAN.R-project.org/package=tidyr</a>.
</div>
<div id="ref-R-bookdown" class="csl-entry">
Xie, Yihui. 2023a. <em>bookdown: Authoring Books and Technical Documents with R Markdown</em>. <a href="https://CRAN.R-project.org/package=bookdown">https://CRAN.R-project.org/package=bookdown</a>.
</div>
<div id="ref-R-knitr" class="csl-entry">
———. 2023b. <em>knitr: A General-Purpose Package for Dynamic Report Generation in R</em>. <a href="https://yihui.org/knitr/">https://yihui.org/knitr/</a>.
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="tidyr.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="extra.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/05_broom_and_dplyr.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["learning_R.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
