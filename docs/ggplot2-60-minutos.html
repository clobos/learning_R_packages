<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 ggplot2 (60 minutos) | Learning R packages</title>
  <meta name="description" content="<p>This is a minimal example of using the bookdown package to write a book.
set in the _output.yml file.
The HTML output format for this example is bookdown::gitbook,</p>" />
  <meta name="generator" content="bookdown 0.30 and GitBook 2.6.7" />

  <meta property="og:title" content="3 ggplot2 (60 minutos) | Learning R packages" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="<p>This is a minimal example of using the bookdown package to write a book.
set in the _output.yml file.
The HTML output format for this example is bookdown::gitbook,</p>" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 ggplot2 (60 minutos) | Learning R packages" />
  
  <meta name="twitter:description" content="<p>This is a minimal example of using the bookdown package to write a book.
set in the _output.yml file.
The HTML output format for this example is bookdown::gitbook,</p>" />
  

<meta name="author" content="Cristian Villegas" />


<meta name="date" content="2023-05-11" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="dplyr-60-minutos.html"/>
<link rel="next" href="broom-and-dplyr.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Learning R packages</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Intro</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#carrega-pacotes-a-serem-usados"><i class="fa fa-check"></i><b>1.1</b> Carrega pacotes a serem usados</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#alguns-atalhos-no-rstudio"><i class="fa fa-check"></i><b>1.2</b> Alguns atalhos no Rstudio</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="dplyr-60-minutos.html"><a href="dplyr-60-minutos.html"><i class="fa fa-check"></i><b>2</b> dplyr (60 minutos)</a>
<ul>
<li class="chapter" data-level="2.1" data-path="dplyr-60-minutos.html"><a href="dplyr-60-minutos.html#carrega-pacotes-a-serem-usados-1"><i class="fa fa-check"></i><b>2.1</b> Carrega pacotes a serem usados</a></li>
<li class="chapter" data-level="2.2" data-path="dplyr-60-minutos.html"><a href="dplyr-60-minutos.html#descrição-dos-dados-mpg"><i class="fa fa-check"></i><b>2.2</b> Descrição dos dados <code>mpg</code></a></li>
<li class="chapter" data-level="2.3" data-path="dplyr-60-minutos.html"><a href="dplyr-60-minutos.html#lista-de-funções-do-pacote-dplyr"><i class="fa fa-check"></i><b>2.3</b> Lista de funções do pacote dplyr</a></li>
<li class="chapter" data-level="2.4" data-path="dplyr-60-minutos.html"><a href="dplyr-60-minutos.html#operador-pipe"><i class="fa fa-check"></i><b>2.4</b> Operador Pipe</a></li>
<li class="chapter" data-level="2.5" data-path="dplyr-60-minutos.html"><a href="dplyr-60-minutos.html#select-para-colunas"><i class="fa fa-check"></i><b>2.5</b> select() para colunas</a></li>
<li class="chapter" data-level="2.6" data-path="dplyr-60-minutos.html"><a href="dplyr-60-minutos.html#rename"><i class="fa fa-check"></i><b>2.6</b> rename()</a></li>
<li class="chapter" data-level="2.7" data-path="dplyr-60-minutos.html"><a href="dplyr-60-minutos.html#mutate-para-colunas"><i class="fa fa-check"></i><b>2.7</b> mutate() para colunas</a></li>
<li class="chapter" data-level="2.8" data-path="dplyr-60-minutos.html"><a href="dplyr-60-minutos.html#transmute"><i class="fa fa-check"></i><b>2.8</b> transmute()</a></li>
<li class="chapter" data-level="2.9" data-path="dplyr-60-minutos.html"><a href="dplyr-60-minutos.html#filter-para-linhas"><i class="fa fa-check"></i><b>2.9</b> filter() para linhas</a></li>
<li class="chapter" data-level="2.10" data-path="dplyr-60-minutos.html"><a href="dplyr-60-minutos.html#slice-para-linhas"><i class="fa fa-check"></i><b>2.10</b> slice() para linhas</a></li>
<li class="chapter" data-level="2.11" data-path="dplyr-60-minutos.html"><a href="dplyr-60-minutos.html#arrange-para-linhas"><i class="fa fa-check"></i><b>2.11</b> arrange() para linhas</a></li>
<li class="chapter" data-level="2.12" data-path="dplyr-60-minutos.html"><a href="dplyr-60-minutos.html#distinct-para-linhas"><i class="fa fa-check"></i><b>2.12</b> distinct() para linhas</a></li>
<li class="chapter" data-level="2.13" data-path="dplyr-60-minutos.html"><a href="dplyr-60-minutos.html#summarise"><i class="fa fa-check"></i><b>2.13</b> summarise()</a></li>
<li class="chapter" data-level="2.14" data-path="dplyr-60-minutos.html"><a href="dplyr-60-minutos.html#group_by"><i class="fa fa-check"></i><b>2.14</b> group_by()</a></li>
<li class="chapter" data-level="2.15" data-path="dplyr-60-minutos.html"><a href="dplyr-60-minutos.html#count"><i class="fa fa-check"></i><b>2.15</b> count()</a></li>
<li class="chapter" data-level="2.16" data-path="dplyr-60-minutos.html"><a href="dplyr-60-minutos.html#sample_n"><i class="fa fa-check"></i><b>2.16</b> sample_n()</a></li>
<li class="chapter" data-level="2.17" data-path="dplyr-60-minutos.html"><a href="dplyr-60-minutos.html#sample_frac"><i class="fa fa-check"></i><b>2.17</b> sample_frac()</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="ggplot2-60-minutos.html"><a href="ggplot2-60-minutos.html"><i class="fa fa-check"></i><b>3</b> ggplot2 (60 minutos)</a>
<ul>
<li class="chapter" data-level="3.1" data-path="ggplot2-60-minutos.html"><a href="ggplot2-60-minutos.html#carrega-pacotes-a-serem-usados-2"><i class="fa fa-check"></i><b>3.1</b> Carrega pacotes a serem usados</a></li>
<li class="chapter" data-level="3.2" data-path="ggplot2-60-minutos.html"><a href="ggplot2-60-minutos.html#lista-de-funções-do-pacote-ggplot2"><i class="fa fa-check"></i><b>3.2</b> Lista de funções do pacote ggplot2</a></li>
<li class="chapter" data-level="3.3" data-path="ggplot2-60-minutos.html"><a href="ggplot2-60-minutos.html#primeiros-passos-usando-geom_point"><i class="fa fa-check"></i><b>3.3</b> Primeiros passos usando geom_point</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="ggplot2-60-minutos.html"><a href="ggplot2-60-minutos.html#mais-detalhes-sobre-geom_point"><i class="fa fa-check"></i><b>3.3.1</b> Mais detalhes sobre geom_point</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="ggplot2-60-minutos.html"><a href="ggplot2-60-minutos.html#smooth-boxplot-histogram"><i class="fa fa-check"></i><b>3.4</b> smooth, boxplot, histogram</a></li>
<li class="chapter" data-level="3.5" data-path="ggplot2-60-minutos.html"><a href="ggplot2-60-minutos.html#gridextra-e-patchwork"><i class="fa fa-check"></i><b>3.5</b> gridExtra e patchwork</a></li>
<li class="chapter" data-level="3.6" data-path="ggplot2-60-minutos.html"><a href="ggplot2-60-minutos.html#bar-col-density-density2d"><i class="fa fa-check"></i><b>3.6</b> bar, col, density, density2d</a></li>
<li class="chapter" data-level="3.7" data-path="ggplot2-60-minutos.html"><a href="ggplot2-60-minutos.html#facet_grid-facet_wrap"><i class="fa fa-check"></i><b>3.7</b> facet_grid, facet_wrap</a></li>
<li class="chapter" data-level="3.8" data-path="ggplot2-60-minutos.html"><a href="ggplot2-60-minutos.html#stat_function"><i class="fa fa-check"></i><b>3.8</b> stat_function</a></li>
<li class="chapter" data-level="3.9" data-path="ggplot2-60-minutos.html"><a href="ggplot2-60-minutos.html#stat_summary"><i class="fa fa-check"></i><b>3.9</b> stat_summary</a></li>
<li class="chapter" data-level="3.10" data-path="ggplot2-60-minutos.html"><a href="ggplot2-60-minutos.html#theme_"><i class="fa fa-check"></i><b>3.10</b> theme_*()</a></li>
<li class="chapter" data-level="3.11" data-path="ggplot2-60-minutos.html"><a href="ggplot2-60-minutos.html#gráfico-de-perfis-spaguetti-plot"><i class="fa fa-check"></i><b>3.11</b> Gráfico de perfis (Spaguetti plot)</a></li>
<li class="chapter" data-level="3.12" data-path="ggplot2-60-minutos.html"><a href="ggplot2-60-minutos.html#plotly"><i class="fa fa-check"></i><b>3.12</b> plotly</a></li>
<li class="chapter" data-level="3.13" data-path="ggplot2-60-minutos.html"><a href="ggplot2-60-minutos.html#esquisse"><i class="fa fa-check"></i><b>3.13</b> esquisse</a></li>
<li class="chapter" data-level="3.14" data-path="ggplot2-60-minutos.html"><a href="ggplot2-60-minutos.html#exemplo-esquisse"><i class="fa fa-check"></i><b>3.14</b> Exemplo esquisse</a></li>
<li class="chapter" data-level="3.15" data-path="ggplot2-60-minutos.html"><a href="ggplot2-60-minutos.html#apply-a-function-to-each-element-of-a-list-or-atomic-vector"><i class="fa fa-check"></i><b>3.15</b> Apply a function to each element of a list or atomic vector</a>
<ul>
<li class="chapter" data-level="3.15.1" data-path="ggplot2-60-minutos.html"><a href="ggplot2-60-minutos.html#usage"><i class="fa fa-check"></i><b>3.15.1</b> Usage</a></li>
<li class="chapter" data-level="3.15.2" data-path="ggplot2-60-minutos.html"><a href="ggplot2-60-minutos.html#arguments"><i class="fa fa-check"></i><b>3.15.2</b> Arguments</a></li>
<li class="chapter" data-level="3.15.3" data-path="ggplot2-60-minutos.html"><a href="ggplot2-60-minutos.html#value"><i class="fa fa-check"></i><b>3.15.3</b> Value</a></li>
<li class="chapter" data-level="3.15.4" data-path="ggplot2-60-minutos.html"><a href="ggplot2-60-minutos.html#see-also"><i class="fa fa-check"></i><b>3.15.4</b> See Also</a></li>
</ul></li>
<li class="chapter" data-level="3.16" data-path="ggplot2-60-minutos.html"><a href="ggplot2-60-minutos.html#examples"><i class="fa fa-check"></i><b>3.16</b> Examples</a></li>
<li class="chapter" data-level="3.17" data-path="ggplot2-60-minutos.html"><a href="ggplot2-60-minutos.html#map-functions"><i class="fa fa-check"></i><b>3.17</b> map functions</a></li>
<li class="chapter" data-level="3.18" data-path="ggplot2-60-minutos.html"><a href="ggplot2-60-minutos.html#map2-functions"><i class="fa fa-check"></i><b>3.18</b> map2 functions</a></li>
<li class="chapter" data-level="3.19" data-path="ggplot2-60-minutos.html"><a href="ggplot2-60-minutos.html#apply-a-function-to-each-element-of-a-list-or-atomic-vector-1"><i class="fa fa-check"></i><b>3.19</b> Apply a function to each element of a list or atomic vector</a>
<ul>
<li class="chapter" data-level="3.19.1" data-path="ggplot2-60-minutos.html"><a href="ggplot2-60-minutos.html#usage-1"><i class="fa fa-check"></i><b>3.19.1</b> Usage</a></li>
<li class="chapter" data-level="3.19.2" data-path="ggplot2-60-minutos.html"><a href="ggplot2-60-minutos.html#arguments-1"><i class="fa fa-check"></i><b>3.19.2</b> Arguments</a></li>
<li class="chapter" data-level="3.19.3" data-path="ggplot2-60-minutos.html"><a href="ggplot2-60-minutos.html#value-1"><i class="fa fa-check"></i><b>3.19.3</b> Value</a></li>
<li class="chapter" data-level="3.19.4" data-path="ggplot2-60-minutos.html"><a href="ggplot2-60-minutos.html#see-also-1"><i class="fa fa-check"></i><b>3.19.4</b> See Also</a></li>
</ul></li>
<li class="chapter" data-level="3.20" data-path="ggplot2-60-minutos.html"><a href="ggplot2-60-minutos.html#examples-1"><i class="fa fa-check"></i><b>3.20</b> Examples</a></li>
<li class="chapter" data-level="3.21" data-path="ggplot2-60-minutos.html"><a href="ggplot2-60-minutos.html#map-functions-1"><i class="fa fa-check"></i><b>3.21</b> map functions</a></li>
<li class="chapter" data-level="3.22" data-path="ggplot2-60-minutos.html"><a href="ggplot2-60-minutos.html#map2-functions-1"><i class="fa fa-check"></i><b>3.22</b> map2 functions</a></li>
<li class="chapter" data-level="3.23" data-path="ggplot2-60-minutos.html"><a href="ggplot2-60-minutos.html#nest"><i class="fa fa-check"></i><b>3.23</b> nest()</a></li>
<li class="chapter" data-level="3.24" data-path="ggplot2-60-minutos.html"><a href="ggplot2-60-minutos.html#unnest"><i class="fa fa-check"></i><b>3.24</b> unnest()</a></li>
<li class="chapter" data-level="3.25" data-path="ggplot2-60-minutos.html"><a href="ggplot2-60-minutos.html#exemplos-da-ajuda-do-r"><i class="fa fa-check"></i><b>3.25</b> Exemplos da ajuda do R</a></li>
<li class="chapter" data-level="3.26" data-path="ggplot2-60-minutos.html"><a href="ggplot2-60-minutos.html#mais-detalhes"><i class="fa fa-check"></i><b>3.26</b> Mais detalhes</a></li>
<li class="chapter" data-level="3.27" data-path="ggplot2-60-minutos.html"><a href="ggplot2-60-minutos.html#nest-1"><i class="fa fa-check"></i><b>3.27</b> nest()</a></li>
<li class="chapter" data-level="3.28" data-path="ggplot2-60-minutos.html"><a href="ggplot2-60-minutos.html#unnest-1"><i class="fa fa-check"></i><b>3.28</b> unnest()</a></li>
<li class="chapter" data-level="3.29" data-path="ggplot2-60-minutos.html"><a href="ggplot2-60-minutos.html#exemplos-da-ajuda-do-r-1"><i class="fa fa-check"></i><b>3.29</b> Exemplos da ajuda do R</a></li>
<li class="chapter" data-level="3.30" data-path="ggplot2-60-minutos.html"><a href="ggplot2-60-minutos.html#mais-detalhes-1"><i class="fa fa-check"></i><b>3.30</b> Mais detalhes</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="broom-and-dplyr.html"><a href="broom-and-dplyr.html"><i class="fa fa-check"></i><b>4</b> broom and dplyr</a>
<ul>
<li class="chapter" data-level="4.1" data-path="broom-and-dplyr.html"><a href="broom-and-dplyr.html#links"><i class="fa fa-check"></i><b>4.1</b> links</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="broom-and-dplyr-1.html"><a href="broom-and-dplyr-1.html"><i class="fa fa-check"></i><b>5</b> broom and dplyr</a>
<ul>
<li class="chapter" data-level="5.1" data-path="broom-and-dplyr-1.html"><a href="broom-and-dplyr-1.html#links-1"><i class="fa fa-check"></i><b>5.1</b> links</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="chapter" data-level="" data-path="references-1.html"><a href="references-1.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Learning R packages</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="ggplot2-60-minutos" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">3</span> ggplot2 (60 minutos)<a href="ggplot2-60-minutos.html#ggplot2-60-minutos" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="carrega-pacotes-a-serem-usados-2" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Carrega pacotes a serem usados<a href="ggplot2-60-minutos.html#carrega-pacotes-a-serem-usados-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="ggplot2-60-minutos.html#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages(&quot;tidyverse&quot;) </span></span>
<span id="cb136-2"><a href="ggplot2-60-minutos.html#cb136-2" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages(&quot;dplyr&quot;)     </span></span>
<span id="cb136-3"><a href="ggplot2-60-minutos.html#cb136-3" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages(&quot;tidyr&quot;)     </span></span>
<span id="cb136-4"><a href="ggplot2-60-minutos.html#cb136-4" aria-hidden="true" tabindex="-1"></a><span class="co">#install.packages(&quot;ggplot2&quot;)   </span></span>
<span id="cb136-5"><a href="ggplot2-60-minutos.html#cb136-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-6"><a href="ggplot2-60-minutos.html#cb136-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb136-7"><a href="ggplot2-60-minutos.html#cb136-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Manipulação de dados</span></span>
<span id="cb136-8"><a href="ggplot2-60-minutos.html#cb136-8" aria-hidden="true" tabindex="-1"></a><span class="co">#library(dplyr)</span></span>
<span id="cb136-9"><a href="ggplot2-60-minutos.html#cb136-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-10"><a href="ggplot2-60-minutos.html#cb136-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualização de gráficos</span></span>
<span id="cb136-11"><a href="ggplot2-60-minutos.html#cb136-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb136-12"><a href="ggplot2-60-minutos.html#cb136-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gridExtra)</span>
<span id="cb136-13"><a href="ggplot2-60-minutos.html#cb136-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb136-14"><a href="ggplot2-60-minutos.html#cb136-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb136-15"><a href="ggplot2-60-minutos.html#cb136-15" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(esquisse)</span>
<span id="cb136-16"><a href="ggplot2-60-minutos.html#cb136-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-17"><a href="ggplot2-60-minutos.html#cb136-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Para dados gráfico de perfis</span></span>
<span id="cb136-18"><a href="ggplot2-60-minutos.html#cb136-18" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(nlme)</span></code></pre></div>
<p>Alguns links</p>
<p><a href="https://r-graph-gallery.com/">The R Graph Gallery</a></p>
<p><a href="https://exts.ggplot2.tidyverse.org/gallery/">120 registered extensions available to explore</a></p>
<p><a href="https://patchwork.data-imaginist.com/articles/guides/assembly.html">link 1: patchwork</a></p>
<p><a href="https://patchwork.data-imaginist.com/articles/patchwork.html">link 2: patchwork</a></p>
</div>
<div id="lista-de-funções-do-pacote-ggplot2" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Lista de funções do pacote ggplot2<a href="ggplot2-60-minutos.html#lista-de-funções-do-pacote-ggplot2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="ggplot2-60-minutos.html#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span>(<span class="st">&quot;package:ggplot2&quot;</span>)</span></code></pre></div>
</div>
<div id="primeiros-passos-usando-geom_point" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> Primeiros passos usando geom_point<a href="ggplot2-60-minutos.html#primeiros-passos-usando-geom_point" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="ggplot2-60-minutos.html#cb138-1" aria-hidden="true" tabindex="-1"></a>dados <span class="ot">&lt;-</span> mpg</span>
<span id="cb138-2"><a href="ggplot2-60-minutos.html#cb138-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dados)</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="ggplot2-60-minutos.html#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dados, <span class="fu">aes</span>(<span class="at">x =</span> cty, <span class="at">y =</span> hwy))</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-3-2.png" width="672" /></p>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="ggplot2-60-minutos.html#cb140-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Alternativas</span></span>
<span id="cb140-2"><a href="ggplot2-60-minutos.html#cb140-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dados, <span class="fu">aes</span>(<span class="at">x =</span> cty, <span class="at">y =</span> hwy)) <span class="sc">+</span> </span>
<span id="cb140-3"><a href="ggplot2-60-minutos.html#cb140-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-3-3.png" width="672" /></p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="ggplot2-60-minutos.html#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dados) <span class="sc">+</span> </span>
<span id="cb141-2"><a href="ggplot2-60-minutos.html#cb141-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> cty, <span class="at">y =</span> hwy))</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-3-4.png" width="672" /></p>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="ggplot2-60-minutos.html#cb142-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb142-2"><a href="ggplot2-60-minutos.html#cb142-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> dados, <span class="fu">aes</span>(<span class="at">x =</span> cty, <span class="at">y =</span> hwy))</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-3-5.png" width="672" /></p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="ggplot2-60-minutos.html#cb143-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fim </span></span>
<span id="cb143-2"><a href="ggplot2-60-minutos.html#cb143-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb143-3"><a href="ggplot2-60-minutos.html#cb143-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dados, <span class="fu">aes</span>(<span class="at">x =</span> cty, <span class="at">y =</span> hwy)) <span class="sc">+</span> </span>
<span id="cb143-4"><a href="ggplot2-60-minutos.html#cb143-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">colour =</span> <span class="st">&quot;red&quot;</span>)</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-3-6.png" width="672" /></p>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="ggplot2-60-minutos.html#cb144-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dados, <span class="fu">aes</span>(<span class="at">x =</span> cty, <span class="at">y =</span> hwy)) <span class="sc">+</span> </span>
<span id="cb144-2"><a href="ggplot2-60-minutos.html#cb144-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">colour =</span> <span class="st">&quot;red&quot;</span>, <span class="at">size =</span> <span class="dv">6</span>)</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-3-7.png" width="672" /></p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="ggplot2-60-minutos.html#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dados, <span class="fu">aes</span>(<span class="at">x =</span> cty, <span class="at">y =</span> hwy)) <span class="sc">+</span> </span>
<span id="cb145-2"><a href="ggplot2-60-minutos.html#cb145-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">colour =</span> <span class="st">&quot;red&quot;</span>, <span class="at">size =</span> <span class="dv">6</span>, <span class="at">shape =</span> <span class="dv">10</span>)</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-3-8.png" width="672" /></p>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="ggplot2-60-minutos.html#cb146-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Alternativa</span></span>
<span id="cb146-2"><a href="ggplot2-60-minutos.html#cb146-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dados, <span class="fu">aes</span>(<span class="at">x =</span> cty, <span class="at">y =</span> hwy)) <span class="sc">+</span> </span>
<span id="cb146-3"><a href="ggplot2-60-minutos.html#cb146-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">colour =</span> <span class="st">&quot;red&quot;</span>, <span class="at">size =</span> <span class="dv">6</span>, <span class="at">shape =</span> <span class="st">&quot;circle plus&quot;</span>)</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-3-9.png" width="672" /></p>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="ggplot2-60-minutos.html#cb147-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dados, <span class="fu">aes</span>(<span class="at">x =</span> cty, <span class="at">y =</span> hwy)) <span class="sc">+</span> </span>
<span id="cb147-2"><a href="ggplot2-60-minutos.html#cb147-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">colour =</span> <span class="st">&quot;red&quot;</span>, <span class="at">size =</span> <span class="dv">6</span>, <span class="at">shape =</span> <span class="dv">10</span>)<span class="sc">+</span></span>
<span id="cb147-3"><a href="ggplot2-60-minutos.html#cb147-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;cty (city miles per gallon hwy)&quot;</span>, </span>
<span id="cb147-4"><a href="ggplot2-60-minutos.html#cb147-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;hwy (highway miles per gallon)&quot;</span>, </span>
<span id="cb147-5"><a href="ggplot2-60-minutos.html#cb147-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&quot;Pensar em algum título...&quot;</span>, </span>
<span id="cb147-6"><a href="ggplot2-60-minutos.html#cb147-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Escrever alguma coisa&quot;</span>)</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-3-10.png" width="672" /></p>
<div id="mais-detalhes-sobre-geom_point" class="section level3 hasAnchor" number="3.3.1">
<h3><span class="header-section-number">3.3.1</span> Mais detalhes sobre geom_point<a href="ggplot2-60-minutos.html#mais-detalhes-sobre-geom_point" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<blockquote>
<p>geom_point() understands the following aesthetics (required aesthetics are in bold):</p>
</blockquote>
<ul>
<li><p>x</p></li>
<li><p>y</p></li>
<li><p>alpha</p></li>
<li><p>colour</p></li>
<li><p>fill</p></li>
<li><p>group</p></li>
<li><p>shape</p></li>
<li><p>size</p></li>
<li><p>stroke</p></li>
</ul>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="ggplot2-60-minutos.html#cb148-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dados, <span class="fu">aes</span>(<span class="at">x =</span> cty, <span class="at">y =</span> hwy)) <span class="sc">+</span> </span>
<span id="cb148-2"><a href="ggplot2-60-minutos.html#cb148-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="ggplot2-60-minutos.html#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dados, <span class="fu">aes</span>(<span class="at">x =</span> cty, <span class="at">y =</span> hwy, <span class="at">col =</span> <span class="fu">factor</span>(year))) <span class="sc">+</span> </span>
<span id="cb149-2"><a href="ggplot2-60-minutos.html#cb149-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb149-3"><a href="ggplot2-60-minutos.html#cb149-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">col =</span> <span class="st">&quot;year&quot;</span>)</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-4-2.png" width="672" /></p>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="ggplot2-60-minutos.html#cb150-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Alternativa</span></span>
<span id="cb150-2"><a href="ggplot2-60-minutos.html#cb150-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dados, <span class="fu">aes</span>(<span class="at">x =</span> cty, <span class="at">y =</span> hwy, <span class="at">col =</span> <span class="fu">factor</span>(class))) <span class="sc">+</span> </span>
<span id="cb150-3"><a href="ggplot2-60-minutos.html#cb150-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb150-4"><a href="ggplot2-60-minutos.html#cb150-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">col =</span> <span class="st">&quot;class&quot;</span>)<span class="sc">+</span></span>
<span id="cb150-5"><a href="ggplot2-60-minutos.html#cb150-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">type =</span> <span class="st">&quot;qual&quot;</span>)</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-4-3.png" width="672" /></p>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="ggplot2-60-minutos.html#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dados, <span class="fu">aes</span>(<span class="at">x =</span> cty, <span class="at">y =</span> hwy, <span class="at">col =</span> <span class="fu">factor</span>(class))) <span class="sc">+</span> </span>
<span id="cb151-2"><a href="ggplot2-60-minutos.html#cb151-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb151-3"><a href="ggplot2-60-minutos.html#cb151-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">col =</span> <span class="st">&quot;class&quot;</span>)<span class="sc">+</span></span>
<span id="cb151-4"><a href="ggplot2-60-minutos.html#cb151-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">type =</span> <span class="st">&quot;div&quot;</span>)</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-4-4.png" width="672" /></p>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="ggplot2-60-minutos.html#cb152-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dados, <span class="fu">aes</span>(<span class="at">x =</span> cty, <span class="at">y =</span> hwy, <span class="at">col =</span> <span class="fu">factor</span>(class))) <span class="sc">+</span> </span>
<span id="cb152-2"><a href="ggplot2-60-minutos.html#cb152-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb152-3"><a href="ggplot2-60-minutos.html#cb152-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">col =</span> <span class="st">&quot;class&quot;</span>)<span class="sc">+</span></span>
<span id="cb152-4"><a href="ggplot2-60-minutos.html#cb152-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">&quot;Set1&quot;</span>, <span class="at">name =</span> <span class="st">&quot;Tipo de carro&quot;</span>)<span class="sc">+</span></span>
<span id="cb152-5"><a href="ggplot2-60-minutos.html#cb152-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">10</span>,<span class="dv">60</span>,<span class="dv">3</span>))<span class="sc">+</span></span>
<span id="cb152-6"><a href="ggplot2-60-minutos.html#cb152-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">10</span>,<span class="dv">40</span>,<span class="dv">3</span>))<span class="sc">+</span></span>
<span id="cb152-7"><a href="ggplot2-60-minutos.html#cb152-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-4-5.png" width="672" /></p>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="ggplot2-60-minutos.html#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dados, <span class="fu">aes</span>(<span class="at">x =</span> cty, <span class="at">y =</span> hwy, <span class="at">alpha =</span> <span class="fu">factor</span>(year))) <span class="sc">+</span> </span>
<span id="cb153-2"><a href="ggplot2-60-minutos.html#cb153-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb153-3"><a href="ggplot2-60-minutos.html#cb153-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">alpha =</span> <span class="st">&quot;year&quot;</span>)</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-4-6.png" width="672" /></p>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="ggplot2-60-minutos.html#cb154-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dados, <span class="fu">aes</span>(<span class="at">x =</span> cty, <span class="at">y =</span> hwy, <span class="at">size =</span> <span class="fu">factor</span>(year))) <span class="sc">+</span> </span>
<span id="cb154-2"><a href="ggplot2-60-minutos.html#cb154-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb154-3"><a href="ggplot2-60-minutos.html#cb154-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">size =</span> <span class="st">&quot;year&quot;</span>)</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-4-7.png" width="672" /></p>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="ggplot2-60-minutos.html#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Alternativa</span></span>
<span id="cb155-2"><a href="ggplot2-60-minutos.html#cb155-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dados, <span class="fu">aes</span>(<span class="at">x =</span> cty, <span class="at">y =</span> hwy, <span class="at">col =</span> cty <span class="sc">&lt;=</span> <span class="dv">20</span>)) <span class="sc">+</span> </span>
<span id="cb155-3"><a href="ggplot2-60-minutos.html#cb155-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb155-4"><a href="ggplot2-60-minutos.html#cb155-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">20</span>)<span class="sc">+</span></span>
<span id="cb155-5"><a href="ggplot2-60-minutos.html#cb155-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">col =</span> <span class="st">&quot;year&quot;</span>)</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-4-8.png" width="672" /></p>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="ggplot2-60-minutos.html#cb156-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Erro comum</span></span>
<span id="cb156-2"><a href="ggplot2-60-minutos.html#cb156-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dados, <span class="fu">aes</span>(<span class="at">x =</span> cty, <span class="at">y =</span> hwy, <span class="at">col =</span> <span class="st">&quot;red&quot;</span>)) <span class="sc">+</span> </span>
<span id="cb156-3"><a href="ggplot2-60-minutos.html#cb156-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()<span class="sc">+</span></span>
<span id="cb156-4"><a href="ggplot2-60-minutos.html#cb156-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">col =</span> <span class="st">&quot;year&quot;</span>)</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-4-9.png" width="672" /></p>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="ggplot2-60-minutos.html#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dados, <span class="fu">aes</span>(<span class="at">x =</span> cty, <span class="at">y =</span> hwy)) <span class="sc">+</span> </span>
<span id="cb157-2"><a href="ggplot2-60-minutos.html#cb157-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">col =</span> <span class="st">&quot;red&quot;</span>)<span class="sc">+</span></span>
<span id="cb157-3"><a href="ggplot2-60-minutos.html#cb157-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">col =</span> <span class="st">&quot;year&quot;</span>)</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-4-10.png" width="672" /></p>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="ggplot2-60-minutos.html#cb158-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fim  Erro comum</span></span>
<span id="cb158-2"><a href="ggplot2-60-minutos.html#cb158-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb158-3"><a href="ggplot2-60-minutos.html#cb158-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dados, <span class="fu">aes</span>(<span class="at">x =</span> cty, <span class="at">y =</span> hwy, <span class="at">shape =</span> <span class="fu">factor</span>(year))) <span class="sc">+</span> </span>
<span id="cb158-4"><a href="ggplot2-60-minutos.html#cb158-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">col =</span> <span class="st">&quot;red&quot;</span>) <span class="sc">+</span> </span>
<span id="cb158-5"><a href="ggplot2-60-minutos.html#cb158-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">shape =</span> <span class="st">&quot;year&quot;</span>)</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-4-11.png" width="672" /></p>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="ggplot2-60-minutos.html#cb159-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dados, <span class="fu">aes</span>(<span class="at">x =</span> cty, <span class="at">y =</span> hwy, <span class="at">size =</span> class)) <span class="sc">+</span> </span>
<span id="cb159-2"><a href="ggplot2-60-minutos.html#cb159-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb159-3"><a href="ggplot2-60-minutos.html#cb159-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">size =</span> <span class="st">&quot;class&quot;</span>)</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-4-12.png" width="672" /></p>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="ggplot2-60-minutos.html#cb160-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dados, <span class="fu">aes</span>(<span class="at">x =</span> cty, <span class="at">y =</span> hwy, </span>
<span id="cb160-2"><a href="ggplot2-60-minutos.html#cb160-2" aria-hidden="true" tabindex="-1"></a>                  <span class="at">size =</span> class, </span>
<span id="cb160-3"><a href="ggplot2-60-minutos.html#cb160-3" aria-hidden="true" tabindex="-1"></a>                  <span class="at">col =</span> class)) <span class="sc">+</span> </span>
<span id="cb160-4"><a href="ggplot2-60-minutos.html#cb160-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb160-5"><a href="ggplot2-60-minutos.html#cb160-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">colour =</span> <span class="fu">guide_legend</span>(<span class="st">&quot;Tipo de carro (color)&quot;</span>),</span>
<span id="cb160-6"><a href="ggplot2-60-minutos.html#cb160-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">size =</span> <span class="fu">guide_legend</span>(<span class="st">&quot;Tipo de carro (size)&quot;</span>))</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-4-13.png" width="672" /></p>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="ggplot2-60-minutos.html#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dados, <span class="fu">aes</span>(<span class="at">x =</span> cty, <span class="at">y =</span> hwy, </span>
<span id="cb161-2"><a href="ggplot2-60-minutos.html#cb161-2" aria-hidden="true" tabindex="-1"></a>                  <span class="at">size =</span> class, </span>
<span id="cb161-3"><a href="ggplot2-60-minutos.html#cb161-3" aria-hidden="true" tabindex="-1"></a>                  <span class="at">col =</span> class)) <span class="sc">+</span> </span>
<span id="cb161-4"><a href="ggplot2-60-minutos.html#cb161-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb161-5"><a href="ggplot2-60-minutos.html#cb161-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">col =</span> <span class="st">&quot;Tipo de Carro&quot;</span>, <span class="at">size =</span> <span class="st">&quot;Tipo de Carro&quot;</span>)<span class="sc">+</span></span>
<span id="cb161-6"><a href="ggplot2-60-minutos.html#cb161-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">col =</span> <span class="st">&quot;legend&quot;</span>)</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-4-14.png" width="672" /></p>
</div>
</div>
<div id="smooth-boxplot-histogram" class="section level2 hasAnchor" number="3.4">
<h2><span class="header-section-number">3.4</span> smooth, boxplot, histogram<a href="ggplot2-60-minutos.html#smooth-boxplot-histogram" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="ggplot2-60-minutos.html#cb162-1" aria-hidden="true" tabindex="-1"></a>v1<span class="ot">&lt;-</span> <span class="fu">ggplot</span>(dados, <span class="fu">aes</span>(<span class="at">x =</span> cty, <span class="at">y =</span> hwy)) <span class="sc">+</span> </span>
<span id="cb162-2"><a href="ggplot2-60-minutos.html#cb162-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">col =</span> <span class="st">&quot;blue&quot;</span>)<span class="sc">+</span></span>
<span id="cb162-3"><a href="ggplot2-60-minutos.html#cb162-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> mgcv<span class="sc">::</span>gam,</span>
<span id="cb162-4"><a href="ggplot2-60-minutos.html#cb162-4" aria-hidden="true" tabindex="-1"></a>              <span class="at">formula =</span> y <span class="sc">~</span> <span class="fu">s</span>(x, <span class="at">bs =</span> <span class="st">&quot;cs&quot;</span>) ,</span>
<span id="cb162-5"><a href="ggplot2-60-minutos.html#cb162-5" aria-hidden="true" tabindex="-1"></a>              <span class="at">col =</span> <span class="st">&quot;red&quot;</span>, </span>
<span id="cb162-6"><a href="ggplot2-60-minutos.html#cb162-6" aria-hidden="true" tabindex="-1"></a>              <span class="at">se =</span> <span class="cn">FALSE</span>)</span>
<span id="cb162-7"><a href="ggplot2-60-minutos.html#cb162-7" aria-hidden="true" tabindex="-1"></a>v1</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="ggplot2-60-minutos.html#cb163-1" aria-hidden="true" tabindex="-1"></a>v2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(dados, <span class="fu">aes</span>(<span class="at">x =</span> cty)) <span class="sc">+</span> </span>
<span id="cb163-2"><a href="ggplot2-60-minutos.html#cb163-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">fill =</span> <span class="st">&quot;red&quot;</span>)</span>
<span id="cb163-3"><a href="ggplot2-60-minutos.html#cb163-3" aria-hidden="true" tabindex="-1"></a>v2</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-5-2.png" width="672" /></p>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="ggplot2-60-minutos.html#cb164-1" aria-hidden="true" tabindex="-1"></a>v3 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(dados, <span class="fu">aes</span>(<span class="at">x =</span> cty)) <span class="sc">+</span> </span>
<span id="cb164-2"><a href="ggplot2-60-minutos.html#cb164-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">10</span>, <span class="at">fill =</span> <span class="st">&quot;red&quot;</span>, <span class="at">col =</span> <span class="st">&quot;blue&quot;</span>, <span class="at">lwd=</span><span class="dv">2</span>)</span>
<span id="cb164-3"><a href="ggplot2-60-minutos.html#cb164-3" aria-hidden="true" tabindex="-1"></a>v3</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-5-3.png" width="672" /></p>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="ggplot2-60-minutos.html#cb165-1" aria-hidden="true" tabindex="-1"></a>v4<span class="ot">&lt;-</span> <span class="fu">ggplot</span>(dados, <span class="fu">aes</span>(<span class="at">x =</span> cty)) <span class="sc">+</span> </span>
<span id="cb165-2"><a href="ggplot2-60-minutos.html#cb165-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="fu">after_stat</span>(density)),</span>
<span id="cb165-3"><a href="ggplot2-60-minutos.html#cb165-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">bins =</span> <span class="dv">10</span>, <span class="at">fill =</span> <span class="st">&quot;yellow&quot;</span>, <span class="at">col =</span> <span class="st">&quot;red&quot;</span>) <span class="sc">+</span></span>
<span id="cb165-4"><a href="ggplot2-60-minutos.html#cb165-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">col =</span> <span class="st">&quot;blue&quot;</span>, <span class="at">lwd =</span><span class="dv">3</span>)</span>
<span id="cb165-5"><a href="ggplot2-60-minutos.html#cb165-5" aria-hidden="true" tabindex="-1"></a>v4</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-5-4.png" width="672" /></p>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="ggplot2-60-minutos.html#cb166-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Adicional (estatístic experimental)</span></span>
<span id="cb166-2"><a href="ggplot2-60-minutos.html#cb166-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dados, <span class="fu">aes</span>(<span class="at">x =</span> drv, <span class="at">y =</span> cty, <span class="at">col =</span> drv)) <span class="sc">+</span> </span>
<span id="cb166-3"><a href="ggplot2-60-minutos.html#cb166-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()<span class="sc">+</span></span>
<span id="cb166-4"><a href="ggplot2-60-minutos.html#cb166-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()<span class="sc">+</span></span>
<span id="cb166-5"><a href="ggplot2-60-minutos.html#cb166-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-5-5.png" width="672" /></p>
</div>
<div id="gridextra-e-patchwork" class="section level2 hasAnchor" number="3.5">
<h2><span class="header-section-number">3.5</span> gridExtra e patchwork<a href="ggplot2-60-minutos.html#gridextra-e-patchwork" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Alguns links</p>
<p><a href="https://patchwork.data-imaginist.com/articles/guides/assembly.html">link 1: patchwork</a></p>
<p><a href="https://patchwork.data-imaginist.com/articles/patchwork.html">link 2: patchwork</a></p>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="ggplot2-60-minutos.html#cb167-1" aria-hidden="true" tabindex="-1"></a><span class="co"># gridExtra</span></span>
<span id="cb167-2"><a href="ggplot2-60-minutos.html#cb167-2" aria-hidden="true" tabindex="-1"></a><span class="fu">grid.arrange</span>(v1, v2, v3, v4) </span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="ggplot2-60-minutos.html#cb168-1" aria-hidden="true" tabindex="-1"></a><span class="co"># patchwork</span></span>
<span id="cb168-2"><a href="ggplot2-60-minutos.html#cb168-2" aria-hidden="true" tabindex="-1"></a>v1 <span class="sc">+</span> v2</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-6-2.png" width="672" /></p>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="ggplot2-60-minutos.html#cb169-1" aria-hidden="true" tabindex="-1"></a>v1 <span class="sc">|</span> v2</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-6-3.png" width="672" /></p>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="ggplot2-60-minutos.html#cb170-1" aria-hidden="true" tabindex="-1"></a>v1 <span class="sc">/</span> v2</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-6-4.png" width="672" /></p>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="ggplot2-60-minutos.html#cb171-1" aria-hidden="true" tabindex="-1"></a>v1 <span class="sc">+</span> v2 <span class="sc">+</span> v3</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-6-5.png" width="672" /></p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="ggplot2-60-minutos.html#cb172-1" aria-hidden="true" tabindex="-1"></a>v1 <span class="sc">+</span> (v2 <span class="sc">+</span> v3)</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-6-6.png" width="672" /></p>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="ggplot2-60-minutos.html#cb173-1" aria-hidden="true" tabindex="-1"></a>v1 <span class="sc">|</span> (v2 <span class="sc">/</span> v3)</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-6-7.png" width="672" /></p>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="ggplot2-60-minutos.html#cb174-1" aria-hidden="true" tabindex="-1"></a>v1 <span class="sc">/</span> (v2 <span class="sc">+</span> v3)</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-6-8.png" width="672" /></p>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="ggplot2-60-minutos.html#cb175-1" aria-hidden="true" tabindex="-1"></a>v1 <span class="sc">+</span> v2 <span class="sc">+</span> v3 <span class="sc">+</span> v4 </span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-6-9.png" width="672" /></p>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="ggplot2-60-minutos.html#cb176-1" aria-hidden="true" tabindex="-1"></a>v1<span class="sc">/</span>(v2<span class="sc">+</span>v3<span class="sc">+</span>v4)</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-6-10.png" width="672" /></p>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="ggplot2-60-minutos.html#cb177-1" aria-hidden="true" tabindex="-1"></a>v1  <span class="sc">+</span> (v2 <span class="sc">+</span> v3 <span class="sc">+</span> v4)</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-6-11.png" width="672" /></p>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="ggplot2-60-minutos.html#cb178-1" aria-hidden="true" tabindex="-1"></a>v1  <span class="sc">+</span> v2 <span class="sc">+</span> (v3 <span class="sc">+</span> v4)</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-6-12.png" width="672" /></p>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="ggplot2-60-minutos.html#cb179-1" aria-hidden="true" tabindex="-1"></a>(v1 <span class="sc">|</span> v2 <span class="sc">|</span> v3) <span class="sc">/</span> v4</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-6-13.png" width="672" /></p>
</div>
<div id="bar-col-density-density2d" class="section level2 hasAnchor" number="3.6">
<h2><span class="header-section-number">3.6</span> bar, col, density, density2d<a href="ggplot2-60-minutos.html#bar-col-density-density2d" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="ggplot2-60-minutos.html#cb180-1" aria-hidden="true" tabindex="-1"></a>v5 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(dados , <span class="fu">aes</span>(<span class="at">x =</span> manufacturer)) <span class="sc">+</span> </span>
<span id="cb180-2"><a href="ggplot2-60-minutos.html#cb180-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>()<span class="sc">+</span> </span>
<span id="cb180-3"><a href="ggplot2-60-minutos.html#cb180-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>))</span>
<span id="cb180-4"><a href="ggplot2-60-minutos.html#cb180-4" aria-hidden="true" tabindex="-1"></a>v5</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="ggplot2-60-minutos.html#cb181-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Dúvidas no geom_col</span></span>
<span id="cb181-2"><a href="ggplot2-60-minutos.html#cb181-2" aria-hidden="true" tabindex="-1"></a>v6 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(dados , <span class="fu">aes</span>(<span class="at">x =</span> manufacturer, <span class="at">y =</span> cty)) <span class="sc">+</span> </span>
<span id="cb181-3"><a href="ggplot2-60-minutos.html#cb181-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>()<span class="sc">+</span></span>
<span id="cb181-4"><a href="ggplot2-60-minutos.html#cb181-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>))</span>
<span id="cb181-5"><a href="ggplot2-60-minutos.html#cb181-5" aria-hidden="true" tabindex="-1"></a>v6</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-7-2.png" width="672" /></p>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="ggplot2-60-minutos.html#cb182-1" aria-hidden="true" tabindex="-1"></a>dados <span class="sc">%&gt;%</span> </span>
<span id="cb182-2"><a href="ggplot2-60-minutos.html#cb182-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(manufacturer, cty) <span class="sc">%&gt;%</span> </span>
<span id="cb182-3"><a href="ggplot2-60-minutos.html#cb182-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(manufacturer) <span class="sc">%&gt;%</span> </span>
<span id="cb182-4"><a href="ggplot2-60-minutos.html#cb182-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">soma_total_cty =</span> <span class="fu">sum</span>(cty),</span>
<span id="cb182-5"><a href="ggplot2-60-minutos.html#cb182-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">n =</span> <span class="fu">n</span>())</span></code></pre></div>
<pre><code>## # A tibble: 15 × 3
##    manufacturer soma_total_cty     n
##    &lt;chr&gt;                 &lt;int&gt; &lt;int&gt;
##  1 audi                    317    18
##  2 chevrolet               285    19
##  3 dodge                   486    37
##  4 ford                    350    25
##  5 honda                   220     9
##  6 hyundai                 261    14
##  7 jeep                    108     8
##  8 land rover               46     4
##  9 lincoln                  34     3
## 10 mercury                  53     4
## 11 nissan                  235    13
## 12 pontiac                  85     5
## 13 subaru                  270    14
## 14 toyota                  630    34
## 15 volkswagen              565    27</code></pre>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="ggplot2-60-minutos.html#cb184-1" aria-hidden="true" tabindex="-1"></a><span class="co"># dados %&gt;% </span></span>
<span id="cb184-2"><a href="ggplot2-60-minutos.html#cb184-2" aria-hidden="true" tabindex="-1"></a><span class="co">#   filter(manufacturer == &quot;audi&quot;) %&gt;% </span></span>
<span id="cb184-3"><a href="ggplot2-60-minutos.html#cb184-3" aria-hidden="true" tabindex="-1"></a><span class="co">#   select(cty) %&gt;% </span></span>
<span id="cb184-4"><a href="ggplot2-60-minutos.html#cb184-4" aria-hidden="true" tabindex="-1"></a><span class="co">#   sum()</span></span>
<span id="cb184-5"><a href="ggplot2-60-minutos.html#cb184-5" aria-hidden="true" tabindex="-1"></a>v7 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(dados , <span class="fu">aes</span>(<span class="at">x =</span> cty)) <span class="sc">+</span> </span>
<span id="cb184-6"><a href="ggplot2-60-minutos.html#cb184-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>()</span>
<span id="cb184-7"><a href="ggplot2-60-minutos.html#cb184-7" aria-hidden="true" tabindex="-1"></a>v7</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-7-3.png" width="672" /></p>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="ggplot2-60-minutos.html#cb185-1" aria-hidden="true" tabindex="-1"></a>v8 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(dados, <span class="fu">aes</span>(<span class="at">x =</span> cty, <span class="at">y =</span> hwy)) <span class="sc">+</span> </span>
<span id="cb185-2"><a href="ggplot2-60-minutos.html#cb185-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density2d</span>()<span class="sc">+</span></span>
<span id="cb185-3"><a href="ggplot2-60-minutos.html#cb185-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">colour =</span> <span class="st">&quot;red&quot;</span>)</span>
<span id="cb185-4"><a href="ggplot2-60-minutos.html#cb185-4" aria-hidden="true" tabindex="-1"></a>v8</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-7-4.png" width="672" /></p>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="ggplot2-60-minutos.html#cb186-1" aria-hidden="true" tabindex="-1"></a>(v5<span class="sc">+</span>v6)<span class="sc">/</span> (v7 <span class="sc">+</span> v8)</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-7-5.png" width="672" /></p>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="ggplot2-60-minutos.html#cb187-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Deixar pra depois...</span></span>
<span id="cb187-2"><a href="ggplot2-60-minutos.html#cb187-2" aria-hidden="true" tabindex="-1"></a> dados <span class="sc">%&gt;%</span> </span>
<span id="cb187-3"><a href="ggplot2-60-minutos.html#cb187-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(manufacturer, hwy, year) <span class="sc">%&gt;%</span> </span>
<span id="cb187-4"><a href="ggplot2-60-minutos.html#cb187-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(manufacturer <span class="sc">==</span> <span class="st">&quot;audi&quot;</span>, year <span class="sc">==</span> <span class="st">&quot;1999&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb187-5"><a href="ggplot2-60-minutos.html#cb187-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">media =</span> <span class="fu">max</span>(hwy))</span></code></pre></div>
<pre><code>## # A tibble: 1 × 1
##   media
##   &lt;int&gt;
## 1    29</code></pre>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="ggplot2-60-minutos.html#cb189-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plotly</span></span>
<span id="cb189-2"><a href="ggplot2-60-minutos.html#cb189-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(</span>
<span id="cb189-3"><a href="ggplot2-60-minutos.html#cb189-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dados, <span class="fu">aes</span>(<span class="at">x =</span> manufacturer, <span class="at">y =</span> hwy, <span class="at">fill =</span> <span class="fu">factor</span>(year))) <span class="sc">+</span> </span>
<span id="cb189-4"><a href="ggplot2-60-minutos.html#cb189-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">&quot;dodge&quot;</span>) <span class="sc">+</span> </span>
<span id="cb189-5"><a href="ggplot2-60-minutos.html#cb189-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">&quot;year&quot;</span>) <span class="sc">+</span></span>
<span id="cb189-6"><a href="ggplot2-60-minutos.html#cb189-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>)))</span>
<span id="cb189-7"><a href="ggplot2-60-minutos.html#cb189-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb189-8"><a href="ggplot2-60-minutos.html#cb189-8" aria-hidden="true" tabindex="-1"></a>dados <span class="sc">%&gt;%</span> <span class="fu">select</span>(manufacturer, hwy, year) <span class="sc">%&gt;%</span> </span>
<span id="cb189-9"><a href="ggplot2-60-minutos.html#cb189-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(manufacturer, year) <span class="sc">%&gt;%</span> </span>
<span id="cb189-10"><a href="ggplot2-60-minutos.html#cb189-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">media =</span> <span class="fu">mean</span>(hwy))</span></code></pre></div>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="ggplot2-60-minutos.html#cb190-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Para pensar</span></span>
<span id="cb190-2"><a href="ggplot2-60-minutos.html#cb190-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-3"><a href="ggplot2-60-minutos.html#cb190-3" aria-hidden="true" tabindex="-1"></a>(dados_trat <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">tratamento =</span> LETTERS[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>], </span>
<span id="cb190-4"><a href="ggplot2-60-minutos.html#cb190-4" aria-hidden="true" tabindex="-1"></a>                         <span class="at">resposta =</span> <span class="fu">c</span>(<span class="fl">2.3</span>, <span class="fl">1.9</span>, <span class="fl">3.2</span>)))</span></code></pre></div>
<pre><code>##   tratamento resposta
## 1          A      2.3
## 2          B      1.9
## 3          C      3.2</code></pre>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="ggplot2-60-minutos.html#cb192-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dados_trat, <span class="fu">aes</span>(tratamento, resposta)) <span class="sc">+</span></span>
<span id="cb192-2"><a href="ggplot2-60-minutos.html#cb192-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">fill =</span> <span class="st">&quot;red&quot;</span>)</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="ggplot2-60-minutos.html#cb193-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Mais detalhes...</span></span>
<span id="cb193-2"><a href="ggplot2-60-minutos.html#cb193-2" aria-hidden="true" tabindex="-1"></a>dados <span class="sc">%&gt;%</span> <span class="fu">select</span>(manufacturer, hwy, year) <span class="sc">%&gt;%</span> </span>
<span id="cb193-3"><a href="ggplot2-60-minutos.html#cb193-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(manufacturer, year) <span class="sc">%&gt;%</span> </span>
<span id="cb193-4"><a href="ggplot2-60-minutos.html#cb193-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">media =</span> <span class="fu">mean</span>(hwy), <span class="at">.groups =</span> <span class="st">&quot;drop&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb193-5"><a href="ggplot2-60-minutos.html#cb193-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> manufacturer, <span class="at">y =</span> media, <span class="at">fill =</span> <span class="fu">factor</span>(year)))<span class="sc">+</span></span>
<span id="cb193-6"><a href="ggplot2-60-minutos.html#cb193-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">&quot;dodge&quot;</span>)<span class="sc">+</span></span>
<span id="cb193-7"><a href="ggplot2-60-minutos.html#cb193-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">&quot;year&quot;</span>) <span class="sc">+</span></span>
<span id="cb193-8"><a href="ggplot2-60-minutos.html#cb193-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>))</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-9-2.png" width="672" /></p>
</div>
<div id="facet_grid-facet_wrap" class="section level2 hasAnchor" number="3.7">
<h2><span class="header-section-number">3.7</span> facet_grid, facet_wrap<a href="ggplot2-60-minutos.html#facet_grid-facet_wrap" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="ggplot2-60-minutos.html#cb194-1" aria-hidden="true" tabindex="-1"></a>p1<span class="ot">&lt;-</span> <span class="fu">ggplot</span>(dados, <span class="fu">aes</span>(<span class="at">x =</span> cty, <span class="at">y =</span> hwy)) <span class="sc">+</span></span>
<span id="cb194-2"><a href="ggplot2-60-minutos.html#cb194-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span>
<span id="cb194-3"><a href="ggplot2-60-minutos.html#cb194-3" aria-hidden="true" tabindex="-1"></a>p1</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="ggplot2-60-minutos.html#cb195-1" aria-hidden="true" tabindex="-1"></a>p1 <span class="sc">+</span> <span class="fu">facet_grid</span>(<span class="at">rows =</span> <span class="fu">vars</span>(cyl))</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-10-2.png" width="672" /></p>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="ggplot2-60-minutos.html#cb196-1" aria-hidden="true" tabindex="-1"></a>p1 <span class="sc">+</span> <span class="fu">facet_grid</span>(<span class="at">cols =</span> <span class="fu">vars</span>(cyl))</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-10-3.png" width="672" /></p>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb197-1"><a href="ggplot2-60-minutos.html#cb197-1" aria-hidden="true" tabindex="-1"></a>p1 <span class="sc">+</span> <span class="fu">facet_grid</span>(<span class="sc">~</span>cyl)</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-10-4.png" width="672" /></p>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="ggplot2-60-minutos.html#cb198-1" aria-hidden="true" tabindex="-1"></a>p1 <span class="sc">+</span> <span class="fu">facet_grid</span>(<span class="at">rows =</span> <span class="fu">vars</span>(year), <span class="at">cols =</span><span class="fu">vars</span>(cyl))</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-10-5.png" width="672" /></p>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="ggplot2-60-minutos.html#cb199-1" aria-hidden="true" tabindex="-1"></a>p1 <span class="sc">+</span> <span class="fu">facet_grid</span>(year<span class="sc">~</span>cyl)</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-10-6.png" width="672" /></p>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb200-1"><a href="ggplot2-60-minutos.html#cb200-1" aria-hidden="true" tabindex="-1"></a>p1 <span class="sc">+</span> <span class="fu">facet_wrap</span>(year <span class="sc">~</span> cyl)</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-10-7.png" width="672" /></p>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="ggplot2-60-minutos.html#cb201-1" aria-hidden="true" tabindex="-1"></a>p1 <span class="sc">+</span> <span class="fu">facet_wrap</span>(cyl <span class="sc">~</span> year)</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-10-8.png" width="672" /></p>
<div class="sourceCode" id="cb202"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb202-1"><a href="ggplot2-60-minutos.html#cb202-1" aria-hidden="true" tabindex="-1"></a>p1 <span class="sc">+</span> <span class="fu">facet_wrap</span>(<span class="sc">~</span>cyl <span class="sc">+</span> year)</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-10-9.png" width="672" /></p>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="ggplot2-60-minutos.html#cb203-1" aria-hidden="true" tabindex="-1"></a>p1 <span class="sc">+</span> <span class="fu">facet_wrap</span>(<span class="sc">~</span>year <span class="sc">+</span> cyl)</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-10-10.png" width="672" /></p>
<div class="sourceCode" id="cb204"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb204-1"><a href="ggplot2-60-minutos.html#cb204-1" aria-hidden="true" tabindex="-1"></a>p1 <span class="sc">+</span> <span class="fu">facet_wrap</span>(year <span class="sc">~</span> cyl, <span class="at">ncol =</span> <span class="dv">4</span>)</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-10-11.png" width="672" /></p>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb205-1"><a href="ggplot2-60-minutos.html#cb205-1" aria-hidden="true" tabindex="-1"></a>p1 <span class="sc">+</span> <span class="fu">facet_wrap</span>(cyl <span class="sc">~</span> year, <span class="at">ncol =</span> <span class="dv">4</span>)</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-10-12.png" width="672" /></p>
</div>
<div id="stat_function" class="section level2 hasAnchor" number="3.8">
<h2><span class="header-section-number">3.8</span> stat_function<a href="ggplot2-60-minutos.html#stat_function" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb206-1"><a href="ggplot2-60-minutos.html#cb206-1" aria-hidden="true" tabindex="-1"></a>a<span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">3</span> <span class="co"># média</span></span>
<span id="cb206-2"><a href="ggplot2-60-minutos.html#cb206-2" aria-hidden="true" tabindex="-1"></a>b<span class="ot">&lt;-</span> <span class="dv">4</span>  <span class="co"># desv. padrão</span></span>
<span id="cb206-3"><a href="ggplot2-60-minutos.html#cb206-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">data.frame</span>(<span class="at">x =</span> <span class="fu">c</span>(a <span class="sc">-</span> <span class="dv">3</span><span class="sc">*</span>b, a <span class="sc">+</span> <span class="dv">3</span><span class="sc">*</span>b)), <span class="fu">aes</span>(x)) <span class="sc">+</span> </span>
<span id="cb206-4"><a href="ggplot2-60-minutos.html#cb206-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_function</span>(<span class="at">fun =</span> dnorm, <span class="at">args =</span> <span class="fu">list</span>(<span class="at">mean =</span> a, <span class="at">sd =</span> b))<span class="sc">+</span></span>
<span id="cb206-5"><a href="ggplot2-60-minutos.html#cb206-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="fu">c</span>(a <span class="sc">-</span> <span class="dv">3</span><span class="sc">*</span>b, a, a <span class="sc">+</span> <span class="dv">3</span><span class="sc">*</span>b), <span class="at">col =</span> <span class="st">&quot;red&quot;</span>, <span class="at">lty =</span> <span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb206-6"><a href="ggplot2-60-minutos.html#cb206-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
</div>
<div id="stat_summary" class="section level2 hasAnchor" number="3.9">
<h2><span class="header-section-number">3.9</span> stat_summary<a href="ggplot2-60-minutos.html#stat_summary" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="ggplot2-60-minutos.html#cb207-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dados, <span class="fu">aes</span>(<span class="at">x =</span> manufacturer, <span class="at">y =</span> hwy)) <span class="sc">+</span> </span>
<span id="cb207-2"><a href="ggplot2-60-minutos.html#cb207-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()<span class="sc">+</span></span>
<span id="cb207-3"><a href="ggplot2-60-minutos.html#cb207-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">col =</span> <span class="st">&quot;red&quot;</span>, <span class="at">size=</span><span class="fl">0.8</span>)<span class="sc">+</span></span>
<span id="cb207-4"><a href="ggplot2-60-minutos.html#cb207-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun =</span> mean, <span class="at">col =</span> <span class="st">&quot;blue&quot;</span>)<span class="sc">+</span></span>
<span id="cb207-5"><a href="ggplot2-60-minutos.html#cb207-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb207-6"><a href="ggplot2-60-minutos.html#cb207-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>))</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
</div>
<div id="theme_" class="section level2 hasAnchor" number="3.10">
<h2><span class="header-section-number">3.10</span> theme_*()<a href="ggplot2-60-minutos.html#theme_" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb208-1"><a href="ggplot2-60-minutos.html#cb208-1" aria-hidden="true" tabindex="-1"></a>a1<span class="ot">&lt;-</span> p1 <span class="sc">+</span> <span class="fu">theme_bw</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;theme_bw()&quot;</span>)</span>
<span id="cb208-2"><a href="ggplot2-60-minutos.html#cb208-2" aria-hidden="true" tabindex="-1"></a>a2<span class="ot">&lt;-</span> p1 <span class="sc">+</span> <span class="fu">theme_classic</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;theme_classic()&quot;</span>)</span>
<span id="cb208-3"><a href="ggplot2-60-minutos.html#cb208-3" aria-hidden="true" tabindex="-1"></a>a3<span class="ot">&lt;-</span> p1 <span class="sc">+</span> <span class="fu">theme_light</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;theme_light()&quot;</span>)</span>
<span id="cb208-4"><a href="ggplot2-60-minutos.html#cb208-4" aria-hidden="true" tabindex="-1"></a>a4<span class="ot">&lt;-</span> p1 <span class="sc">+</span> <span class="fu">theme_minimal</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;theme_minimal()&quot;</span>)</span>
<span id="cb208-5"><a href="ggplot2-60-minutos.html#cb208-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb208-6"><a href="ggplot2-60-minutos.html#cb208-6" aria-hidden="true" tabindex="-1"></a>a1 <span class="sc">+</span> a2 <span class="sc">+</span> a3 <span class="sc">+</span> a4</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
</div>
<div id="gráfico-de-perfis-spaguetti-plot" class="section level2 hasAnchor" number="3.11">
<h2><span class="header-section-number">3.11</span> Gráfico de perfis (Spaguetti plot)<a href="ggplot2-60-minutos.html#gráfico-de-perfis-spaguetti-plot" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="ggplot2-60-minutos.html#cb209-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(Orange)</span></code></pre></div>
<pre><code>## Rows: 35
## Columns: 3
## $ Tree          &lt;ord&gt; 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 3, 3, 3, 3, 3,…
## $ age           &lt;dbl&gt; 118, 484, 664, 1004, 1231, 1372, 1582, 118, 484, 664, 10…
## $ circumference &lt;dbl&gt; 30, 58, 87, 115, 120, 142, 145, 33, 69, 111, 156, 172, 2…</code></pre>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="ggplot2-60-minutos.html#cb211-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(Orange, <span class="fu">aes</span>(<span class="at">x =</span> age, <span class="at">y =</span> circumference, <span class="at">group =</span> Tree, </span>
<span id="cb211-2"><a href="ggplot2-60-minutos.html#cb211-2" aria-hidden="true" tabindex="-1"></a>                   <span class="at">col =</span> Tree)) <span class="sc">+</span></span>
<span id="cb211-3"><a href="ggplot2-60-minutos.html#cb211-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()<span class="sc">+</span></span>
<span id="cb211-4"><a href="ggplot2-60-minutos.html#cb211-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="fu">aes</span>(<span class="at">group =</span> <span class="dv">1</span>), <span class="at">fun =</span> mean, <span class="at">col =</span> <span class="st">&quot;red&quot;</span>, </span>
<span id="cb211-5"><a href="ggplot2-60-minutos.html#cb211-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">geom =</span> <span class="st">&quot;line&quot;</span>, <span class="at">size =</span> <span class="dv">1</span>, <span class="at">show.legend =</span> <span class="cn">FALSE</span>,</span>
<span id="cb211-6"><a href="ggplot2-60-minutos.html#cb211-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">linetype =</span> <span class="dv">2</span>)<span class="sc">+</span></span>
<span id="cb211-7"><a href="ggplot2-60-minutos.html#cb211-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="dv">0</span>, <span class="dv">1600</span>)<span class="sc">+</span></span>
<span id="cb211-8"><a href="ggplot2-60-minutos.html#cb211-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="ggplot2-60-minutos.html#cb212-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(Orange, <span class="fu">aes</span>(<span class="at">x =</span> age, <span class="at">y =</span> circumference, <span class="at">group =</span> Tree)) <span class="sc">+</span></span>
<span id="cb212-2"><a href="ggplot2-60-minutos.html#cb212-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()<span class="sc">+</span></span>
<span id="cb212-3"><a href="ggplot2-60-minutos.html#cb212-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="dv">0</span>, <span class="dv">1600</span>)<span class="sc">+</span></span>
<span id="cb212-4"><a href="ggplot2-60-minutos.html#cb212-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>Tree)<span class="sc">+</span></span>
<span id="cb212-5"><a href="ggplot2-60-minutos.html#cb212-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb212-6"><a href="ggplot2-60-minutos.html#cb212-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>)</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-14-2.png" width="672" /></p>
</div>
<div id="plotly" class="section level2 hasAnchor" number="3.12">
<h2><span class="header-section-number">3.12</span> plotly<a href="ggplot2-60-minutos.html#plotly" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="https://cran.r-project.org/web/packages/plotly/index.html">plotly cran</a></p>
<p><a href="https://plotly-r.com/">Interactive web-based data visualization with R, plotly, and shiny</a></p>
<p><a href="https://plotly.com/r/">Plotly R Open Source Graphing Library</a></p>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb213-1"><a href="ggplot2-60-minutos.html#cb213-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(v1)</span>
<span id="cb213-2"><a href="ggplot2-60-minutos.html#cb213-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(v2)</span>
<span id="cb213-3"><a href="ggplot2-60-minutos.html#cb213-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(v4)</span>
<span id="cb213-4"><a href="ggplot2-60-minutos.html#cb213-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(v5)</span></code></pre></div>
</div>
<div id="esquisse" class="section level2 hasAnchor" number="3.13">
<h2><span class="header-section-number">3.13</span> esquisse<a href="ggplot2-60-minutos.html#esquisse" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Alguns links de interesse</p>
<p><a href="https://cran.r-project.org/web/packages/esquisse/vignettes/get-started.html">esquisse</a></p>
<p><a href="https://cran.r-project.org/web/packages/esquisse/vignettes/shiny-usage.html">esquisse + shiny</a></p>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="ggplot2-60-minutos.html#cb214-1" aria-hidden="true" tabindex="-1"></a><span class="fu">esquisser</span>(dados)</span></code></pre></div>
</div>
<div id="exemplo-esquisse" class="section level2 hasAnchor" number="3.14">
<h2><span class="header-section-number">3.14</span> Exemplo esquisse<a href="ggplot2-60-minutos.html#exemplo-esquisse" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="ggplot2-60-minutos.html#cb215-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dados) <span class="sc">+</span></span>
<span id="cb215-2"><a href="ggplot2-60-minutos.html#cb215-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy, <span class="at">colour =</span> drv) <span class="sc">+</span></span>
<span id="cb215-3"><a href="ggplot2-60-minutos.html#cb215-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">shape =</span> <span class="st">&quot;circle&quot;</span>, <span class="at">size =</span> <span class="fl">1.85</span>) <span class="sc">+</span></span>
<span id="cb215-4"><a href="ggplot2-60-minutos.html#cb215-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_hue</span>(<span class="at">direction =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb215-5"><a href="ggplot2-60-minutos.html#cb215-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb215-6"><a href="ggplot2-60-minutos.html#cb215-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;top&quot;</span>)</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb216-1"><a href="ggplot2-60-minutos.html#cb216-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(dados) <span class="sc">+</span></span>
<span id="cb216-2"><a href="ggplot2-60-minutos.html#cb216-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> cty, <span class="at">colour =</span> class, <span class="at">size =</span> cty) <span class="sc">+</span></span>
<span id="cb216-3"><a href="ggplot2-60-minutos.html#cb216-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">shape =</span> <span class="st">&quot;circle&quot;</span>) <span class="sc">+</span></span>
<span id="cb216-4"><a href="ggplot2-60-minutos.html#cb216-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_hue</span>(<span class="at">direction =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb216-5"><a href="ggplot2-60-minutos.html#cb216-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;top&quot;</span>) <span class="sc">+</span></span>
<span id="cb216-6"><a href="ggplot2-60-minutos.html#cb216-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(drv))</span></code></pre></div>
<p><img src="02_ggplot2_files/figure-html/unnamed-chunk-18-1.png" width="672" /></p>

<p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
# purrr</p>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb217-1"><a href="ggplot2-60-minutos.html#cb217-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb217-2"><a href="ggplot2-60-minutos.html#cb217-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span>(<span class="st">&quot;package:purrr&quot;</span>)</span></code></pre></div>
<pre><code>##   [1] &quot;%@%&quot;                 &quot;%||%&quot;                &quot;%&gt;%&quot;                
##   [4] &quot;accumulate&quot;          &quot;accumulate_right&quot;    &quot;accumulate2&quot;        
##   [7] &quot;array_branch&quot;        &quot;array_tree&quot;          &quot;as_function&quot;        
##  [10] &quot;as_mapper&quot;           &quot;as_vector&quot;           &quot;assign_in&quot;          
##  [13] &quot;at_depth&quot;            &quot;attr_getter&quot;         &quot;auto_browse&quot;        
##  [16] &quot;chuck&quot;               &quot;compact&quot;             &quot;compose&quot;            
##  [19] &quot;cross&quot;               &quot;cross_d&quot;             &quot;cross_df&quot;           
##  [22] &quot;cross_n&quot;             &quot;cross2&quot;              &quot;cross3&quot;             
##  [25] &quot;detect&quot;              &quot;detect_index&quot;        &quot;discard&quot;            
##  [28] &quot;done&quot;                &quot;every&quot;               &quot;exec&quot;               
##  [31] &quot;flatten&quot;             &quot;flatten_chr&quot;         &quot;flatten_dbl&quot;        
##  [34] &quot;flatten_df&quot;          &quot;flatten_dfc&quot;         &quot;flatten_dfr&quot;        
##  [37] &quot;flatten_int&quot;         &quot;flatten_lgl&quot;         &quot;flatten_raw&quot;        
##  [40] &quot;has_element&quot;         &quot;head_while&quot;          &quot;imap&quot;               
##  [43] &quot;imap_chr&quot;            &quot;imap_dbl&quot;            &quot;imap_dfc&quot;           
##  [46] &quot;imap_dfr&quot;            &quot;imap_int&quot;            &quot;imap_lgl&quot;           
##  [49] &quot;imap_raw&quot;            &quot;imodify&quot;             &quot;insistently&quot;        
##  [52] &quot;invoke&quot;              &quot;invoke_map&quot;          &quot;invoke_map_chr&quot;     
##  [55] &quot;invoke_map_dbl&quot;      &quot;invoke_map_df&quot;       &quot;invoke_map_dfc&quot;     
##  [58] &quot;invoke_map_dfr&quot;      &quot;invoke_map_int&quot;      &quot;invoke_map_lgl&quot;     
##  [61] &quot;invoke_map_raw&quot;      &quot;is_atomic&quot;           &quot;is_bare_atomic&quot;     
##  [64] &quot;is_bare_character&quot;   &quot;is_bare_double&quot;      &quot;is_bare_integer&quot;    
##  [67] &quot;is_bare_list&quot;        &quot;is_bare_logical&quot;     &quot;is_bare_numeric&quot;    
##  [70] &quot;is_bare_vector&quot;      &quot;is_character&quot;        &quot;is_double&quot;          
##  [73] &quot;is_empty&quot;            &quot;is_formula&quot;          &quot;is_function&quot;        
##  [76] &quot;is_integer&quot;          &quot;is_list&quot;             &quot;is_logical&quot;         
##  [79] &quot;is_null&quot;             &quot;is_numeric&quot;          &quot;is_rate&quot;            
##  [82] &quot;is_scalar_atomic&quot;    &quot;is_scalar_character&quot; &quot;is_scalar_double&quot;   
##  [85] &quot;is_scalar_integer&quot;   &quot;is_scalar_list&quot;      &quot;is_scalar_logical&quot;  
##  [88] &quot;is_scalar_numeric&quot;   &quot;is_scalar_vector&quot;    &quot;is_vector&quot;          
##  [91] &quot;iwalk&quot;               &quot;keep&quot;                &quot;lift&quot;               
##  [94] &quot;lift_dl&quot;             &quot;lift_dv&quot;             &quot;lift_ld&quot;            
##  [97] &quot;lift_lv&quot;             &quot;lift_vd&quot;             &quot;lift_vl&quot;            
## [100] &quot;list_along&quot;          &quot;list_merge&quot;          &quot;list_modify&quot;        
## [103] &quot;lmap&quot;                &quot;lmap_at&quot;             &quot;lmap_if&quot;            
## [106] &quot;map&quot;                 &quot;map_at&quot;              &quot;map_call&quot;           
## [109] &quot;map_chr&quot;             &quot;map_dbl&quot;             &quot;map_depth&quot;          
## [112] &quot;map_df&quot;              &quot;map_dfc&quot;             &quot;map_dfr&quot;            
## [115] &quot;map_if&quot;              &quot;map_int&quot;             &quot;map_lgl&quot;            
## [118] &quot;map_raw&quot;             &quot;map2&quot;                &quot;map2_chr&quot;           
## [121] &quot;map2_dbl&quot;            &quot;map2_df&quot;             &quot;map2_dfc&quot;           
## [124] &quot;map2_dfr&quot;            &quot;map2_int&quot;            &quot;map2_lgl&quot;           
## [127] &quot;map2_raw&quot;            &quot;modify&quot;              &quot;modify_at&quot;          
## [130] &quot;modify_depth&quot;        &quot;modify_if&quot;           &quot;modify_in&quot;          
## [133] &quot;modify2&quot;             &quot;negate&quot;              &quot;none&quot;               
## [136] &quot;partial&quot;             &quot;pluck&quot;               &quot;pluck&lt;-&quot;            
## [139] &quot;pmap&quot;                &quot;pmap_chr&quot;            &quot;pmap_dbl&quot;           
## [142] &quot;pmap_df&quot;             &quot;pmap_dfc&quot;            &quot;pmap_dfr&quot;           
## [145] &quot;pmap_int&quot;            &quot;pmap_lgl&quot;            &quot;pmap_raw&quot;           
## [148] &quot;possibly&quot;            &quot;prepend&quot;             &quot;pwalk&quot;              
## [151] &quot;quietly&quot;             &quot;rate_backoff&quot;        &quot;rate_delay&quot;         
## [154] &quot;rate_reset&quot;          &quot;rate_sleep&quot;          &quot;rbernoulli&quot;         
## [157] &quot;rdunif&quot;              &quot;reduce&quot;              &quot;reduce_right&quot;       
## [160] &quot;reduce2&quot;             &quot;reduce2_right&quot;       &quot;rep_along&quot;          
## [163] &quot;rerun&quot;               &quot;safely&quot;              &quot;set_names&quot;          
## [166] &quot;simplify&quot;            &quot;simplify_all&quot;        &quot;slowly&quot;             
## [169] &quot;some&quot;                &quot;splice&quot;              &quot;tail_while&quot;         
## [172] &quot;transpose&quot;           &quot;update_list&quot;         &quot;vec_depth&quot;          
## [175] &quot;walk&quot;                &quot;walk2&quot;               &quot;when&quot;               
## [178] &quot;zap&quot;</code></pre>
</div>
<div id="apply-a-function-to-each-element-of-a-list-or-atomic-vector" class="section level2 hasAnchor" number="3.15">
<h2><span class="header-section-number">3.15</span> Apply a function to each element of a list or atomic vector<a href="ggplot2-60-minutos.html#apply-a-function-to-each-element-of-a-list-or-atomic-vector" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<blockquote>
<p>The map functions transform their input by applying a function to each element of a list or atomic vector and returning an object of the same length as the input.</p>
</blockquote>
<ul>
<li><p>map() always returns a list. See the modify() family for versions that return an object of the same type as the input.</p></li>
<li><p>map_lgl(), map_int(), map_dbl() and map_chr() return an atomic vector of the indicated type (or die trying).</p></li>
<li><p>map_dfr() and map_dfc() return a data frame created by row-binding and column-binding respectively. They require dplyr to be installed.</p></li>
<li><p>The returned values of .f must be of length one for each element of .x. If .f uses an extractor function shortcut, .default can be specified to handle values that are absent or empty. See as_mapper() for more on .default.</p></li>
<li><p>walk() calls .f for its side-effect and returns the input .x.</p></li>
</ul>
<div id="usage" class="section level3 hasAnchor" number="3.15.1">
<h3><span class="header-section-number">3.15.1</span> Usage<a href="ggplot2-60-minutos.html#usage" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p>map(.x, .f, …)</p></li>
<li><p>map_lgl(.x, .f, …)</p></li>
<li><p>map_chr(.x, .f, …)</p></li>
<li><p>map_int(.x, .f, …)</p></li>
<li><p>map_dbl(.x, .f, …)</p></li>
<li><p>map_raw(.x, .f, …)</p></li>
<li><p>map_dfr(.x, .f, …, .id = NULL)</p></li>
<li><p>map_dfc(.x, .f, …)</p></li>
<li><p>walk(.x, .f, …)</p></li>
</ul>
</div>
<div id="arguments" class="section level3 hasAnchor" number="3.15.2">
<h3><span class="header-section-number">3.15.2</span> Arguments<a href="ggplot2-60-minutos.html#arguments" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p>.x A list or atomic vector.</p></li>
<li><p>.f A function, formula, or vector (not necessarily atomic).</p></li>
</ul>
<p>If a function, it is used as is.</p>
<p>If a formula, e.g. ~ .x + 2, it is converted to a function. There are three ways to refer to the arguments:</p>
<ul>
<li><p>For a single argument function, use .</p></li>
<li><p>For a two argument function, use .x and .y</p></li>
<li><p>For more arguments, use ..1, ..2, ..3 etc</p></li>
</ul>
<p>This syntax allows you to create very compact anonymous functions.</p>
<p>If character vector, numeric vector, or list, it is converted to an extractor function. Character vectors index by name and numeric vectors index by position; use a list to index by position and name at different levels. If a component is not present, the value of .default will be returned.</p>
<ul>
<li><p>… Additional arguments passed on to the mapped function.</p></li>
<li><p>.id Either a string or NULL. If a string, the output will contain a variable with that name, storing either the name (if .x is named) or the index (if .x is unnamed) of the input. If NULL, the default, no variable will be created.</p></li>
</ul>
<p>Only applies to ⁠_dfr⁠ variant.</p>
</div>
<div id="value" class="section level3 hasAnchor" number="3.15.3">
<h3><span class="header-section-number">3.15.3</span> Value<a href="ggplot2-60-minutos.html#value" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p>map() Returns a list the same length as .x.</p></li>
<li><p>map_lgl() returns a logical vector, map_int() an integer vector, map_dbl() a double vector, and map_chr() a character vector.</p></li>
<li><p>map_df(), map_dfc(), map_dfr() all return a data frame.</p></li>
<li><p>If .x has names(), the return value preserves those names.</p></li>
<li><p>The output of .f will be automatically typed upwards, e.g. logical -&gt; integer -&gt; double -&gt; character.</p></li>
<li><p>walk() returns the input .x (invisibly). This makes it easy to use in pipe.</p></li>
</ul>
</div>
<div id="see-also" class="section level3 hasAnchor" number="3.15.4">
<h3><span class="header-section-number">3.15.4</span> See Also<a href="ggplot2-60-minutos.html#see-also" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>map_if() for applying a function to only those elements of .x that meet a specified condition.</p>
<p>Other map variants: imap(), invoke(), lmap(), map2(), map_if(), modify()</p>
</div>
</div>
<div id="examples" class="section level2 hasAnchor" number="3.16">
<h2><span class="header-section-number">3.16</span> Examples<a href="ggplot2-60-minutos.html#examples" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb219-1"><a href="ggplot2-60-minutos.html#cb219-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute normal distributions from an atomic vector</span></span>
<span id="cb219-2"><a href="ggplot2-60-minutos.html#cb219-2" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">10</span> <span class="sc">%&gt;%</span></span>
<span id="cb219-3"><a href="ggplot2-60-minutos.html#cb219-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(rnorm, <span class="at">n =</span> <span class="dv">10</span>)</span></code></pre></div>
<pre><code>## [[1]]
##  [1]  2.6385665  0.9306481  1.1269237 -0.5898714  0.2058428 -0.6772337
##  [7]  2.7950672  0.8615295 -0.2351424 -2.0529198
## 
## [[2]]
##  [1] 2.1505530 0.2516289 0.6911756 2.8100376 1.8014326 1.6225670 2.3335206
##  [8] 0.7813014 2.7463969 1.4565569
## 
## [[3]]
##  [1] 3.501234 3.358048 4.466439 3.691081 1.684611 2.008729 4.274185 4.872111
##  [9] 1.679362 1.763468
## 
## [[4]]
##  [1] 4.299350 4.701526 4.563663 2.802887 2.936448 4.172293 4.493722 4.534934
##  [9] 3.671891 4.780191
## 
## [[5]]
##  [1] 3.618356 4.382113 4.620189 5.712996 4.016946 4.898041 5.321194 4.357548
##  [9] 5.473501 5.677256
## 
## [[6]]
##  [1] 5.547755 5.266566 5.948882 5.530761 6.832234 4.400889 5.615572 5.448438
##  [9] 3.699474 6.901163
## 
## [[7]]
##  [1] 4.682380 7.968351 7.477201 9.337055 6.630268 5.400870 8.522704 7.617731
##  [9] 7.410772 7.644136
## 
## [[8]]
##  [1] 8.807855 8.590553 9.332446 7.087403 7.147457 7.675507 9.470776 8.304897
##  [9] 7.563840 8.158660
## 
## [[9]]
##  [1]  9.247456  9.177706  9.371173  9.183912  7.198303 10.844286  9.914848
##  [8]  8.437981  9.667493  7.783263
## 
## [[10]]
##  [1] 11.586295 11.643919  9.327234  9.878989  8.519738 10.394865 10.984047
##  [8] 11.699706  9.862019 10.424229</code></pre>
<div class="sourceCode" id="cb221"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb221-1"><a href="ggplot2-60-minutos.html#cb221-1" aria-hidden="true" tabindex="-1"></a><span class="co"># You can also use an anonymous function</span></span>
<span id="cb221-2"><a href="ggplot2-60-minutos.html#cb221-2" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">10</span> <span class="sc">%&gt;%</span></span>
<span id="cb221-3"><a href="ggplot2-60-minutos.html#cb221-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="cf">function</span>(x) <span class="fu">rnorm</span>(<span class="dv">10</span>, x))</span></code></pre></div>
<pre><code>## [[1]]
##  [1]  2.2429327  2.0629768  2.3713814  0.3916663  0.6717193  0.3115191
##  [7] -0.9276165  2.0606560  0.9927143  1.0222344
## 
## [[2]]
##  [1]  1.7137281  2.9356432  4.5978655 -0.5286947  2.8337327  4.0880154
##  [7]  1.2742213  2.6998118  2.3527015  1.7446090
## 
## [[3]]
##  [1] 3.690053 2.933756 3.026452 2.412809 1.317245 3.150460 2.965931 2.222467
##  [9] 3.001422 1.767871
## 
## [[4]]
##  [1] 3.485364 3.301292 3.807281 3.278620 5.971312 4.760887 3.540766 3.650804
##  [9] 4.248851 2.728362
## 
## [[5]]
##  [1] 5.122524 3.744201 3.069162 6.296710 4.904618 4.917230 4.054731 4.877129
##  [9] 5.669188 5.261048
## 
## [[6]]
##  [1] 7.093745 7.301259 5.210623 5.757444 6.604119 6.559381 5.770414 6.470081
##  [9] 6.307559 5.221461
## 
## [[7]]
##  [1] 6.580602 7.382897 6.848317 7.447236 6.101398 8.669176 6.215251 6.944084
##  [9] 6.912993 7.399234
## 
## [[8]]
##  [1] 8.390115 9.916458 8.192049 9.329109 8.062900 9.020701 6.985225 7.717826
##  [9] 7.901918 6.912392
## 
## [[9]]
##  [1] 10.246462  8.692342 10.005330  8.330914  7.100748  8.847435  9.185055
##  [8]  9.028537  8.110501  8.914459
## 
## [[10]]
##  [1]  9.084119 11.483784  9.676943  9.911006  8.893942  8.429307 10.035513
##  [8]  8.439820 10.768020 10.524008</code></pre>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb223-1"><a href="ggplot2-60-minutos.html#cb223-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Or a formula</span></span>
<span id="cb223-2"><a href="ggplot2-60-minutos.html#cb223-2" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">10</span> <span class="sc">%&gt;%</span></span>
<span id="cb223-3"><a href="ggplot2-60-minutos.html#cb223-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="sc">~</span> <span class="fu">rnorm</span>(<span class="dv">10</span>, .x))</span></code></pre></div>
<pre><code>## [[1]]
##  [1]  0.7115314 -0.2820944  0.7105385  0.5384687  0.6576780 -0.8414808
##  [7] -0.9524586  1.3726123  0.6429375  0.4584438
## 
## [[2]]
##  [1] 2.3918098 3.2377431 1.7264112 2.4797405 3.2372974 2.6371652 2.0652283
##  [8] 0.1710013 2.6673798 0.9858555
## 
## [[3]]
##  [1] 1.789433 2.388526 2.476775 4.373986 2.647779 3.477464 1.940519 3.420315
##  [9] 1.534931 3.278349
## 
## [[4]]
##  [1] 2.594209 3.113863 3.299147 5.385972 5.430614 4.244585 3.214138 3.967698
##  [9] 4.413164 1.798715
## 
## [[5]]
##  [1] 5.826736 4.052183 4.064857 7.363720 2.573369 3.666777 6.043892 5.713365
##  [9] 3.594904 5.260065
## 
## [[6]]
##  [1] 7.001881 6.668009 6.338709 6.212157 3.840737 6.722385 6.703579 4.663475
##  [9] 7.430278 6.411852
## 
## [[7]]
##  [1] 8.309749 4.427988 6.896513 6.303007 6.972883 7.180822 6.583214 6.391303
##  [9] 6.811549 6.826768
## 
## [[8]]
##  [1]  8.296688  6.898260  6.379455  8.986417  7.987964 10.041097  7.879265
##  [8]  7.309684  6.774480  8.178791
## 
## [[9]]
##  [1]  6.283803  8.939177  9.096994  9.582340  8.421446 10.510542  8.167727
##  [8]  6.703427  9.181597  8.935818
## 
## [[10]]
##  [1] 10.160817  7.328246 10.176810  9.796377  9.239890  9.798183  9.731020
##  [8] 10.136640  9.619663  9.894516</code></pre>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="ggplot2-60-minutos.html#cb225-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Simplify output to a vector instead of a list by computing the mean of the distributions</span></span>
<span id="cb225-2"><a href="ggplot2-60-minutos.html#cb225-2" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">10</span> <span class="sc">%&gt;%</span></span>
<span id="cb225-3"><a href="ggplot2-60-minutos.html#cb225-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(rnorm, <span class="at">n =</span> <span class="dv">10</span>) <span class="sc">%&gt;%</span>  <span class="co"># output a list</span></span>
<span id="cb225-4"><a href="ggplot2-60-minutos.html#cb225-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_dbl</span>(mean)           <span class="co"># output an atomic vector</span></span></code></pre></div>
<pre><code>##  [1] 1.357433 2.372553 2.738382 3.727900 4.551048 5.988597 7.855043 8.073817
##  [9] 8.784191 9.980013</code></pre>
<div class="sourceCode" id="cb227"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb227-1"><a href="ggplot2-60-minutos.html#cb227-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Using set_names() with character vectors is handy to keep track</span></span>
<span id="cb227-2"><a href="ggplot2-60-minutos.html#cb227-2" aria-hidden="true" tabindex="-1"></a><span class="co"># of the original inputs:</span></span>
<span id="cb227-3"><a href="ggplot2-60-minutos.html#cb227-3" aria-hidden="true" tabindex="-1"></a><span class="fu">set_names</span>(<span class="fu">c</span>(<span class="st">&quot;foo&quot;</span>, <span class="st">&quot;bar&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb227-4"><a href="ggplot2-60-minutos.html#cb227-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_chr</span>(paste0, <span class="st">&quot;:suffix&quot;</span>)</span></code></pre></div>
<pre><code>##          foo          bar 
## &quot;foo:suffix&quot; &quot;bar:suffix&quot;</code></pre>
<div class="sourceCode" id="cb229"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb229-1"><a href="ggplot2-60-minutos.html#cb229-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Working with lists</span></span>
<span id="cb229-2"><a href="ggplot2-60-minutos.html#cb229-2" aria-hidden="true" tabindex="-1"></a>favorite_desserts <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">Sophia =</span> <span class="st">&quot;banana bread&quot;</span>, <span class="at">Eliott =</span> <span class="st">&quot;pancakes&quot;</span>, <span class="at">Karina =</span> <span class="st">&quot;chocolate cake&quot;</span>)</span>
<span id="cb229-3"><a href="ggplot2-60-minutos.html#cb229-3" aria-hidden="true" tabindex="-1"></a>favorite_desserts</span></code></pre></div>
<pre><code>## $Sophia
## [1] &quot;banana bread&quot;
## 
## $Eliott
## [1] &quot;pancakes&quot;
## 
## $Karina
## [1] &quot;chocolate cake&quot;</code></pre>
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb231-1"><a href="ggplot2-60-minutos.html#cb231-1" aria-hidden="true" tabindex="-1"></a>favorite_desserts <span class="sc">%&gt;%</span> </span>
<span id="cb231-2"><a href="ggplot2-60-minutos.html#cb231-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_chr</span>(<span class="sc">~</span> <span class="fu">paste</span>(.x, <span class="st">&quot;rocks!&quot;</span>))</span></code></pre></div>
<pre><code>##                  Sophia                  Eliott                  Karina 
##   &quot;banana bread rocks!&quot;       &quot;pancakes rocks!&quot; &quot;chocolate cake rocks!&quot;</code></pre>
<div class="sourceCode" id="cb233"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb233-1"><a href="ggplot2-60-minutos.html#cb233-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract by name or position</span></span>
<span id="cb233-2"><a href="ggplot2-60-minutos.html#cb233-2" aria-hidden="true" tabindex="-1"></a><span class="co"># .default specifies value for elements that are missing or NULL</span></span>
<span id="cb233-3"><a href="ggplot2-60-minutos.html#cb233-3" aria-hidden="true" tabindex="-1"></a>l1 <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="fu">list</span>(<span class="at">a =</span> 1L), </span>
<span id="cb233-4"><a href="ggplot2-60-minutos.html#cb233-4" aria-hidden="true" tabindex="-1"></a>           <span class="fu">list</span>(<span class="at">a =</span> <span class="cn">NULL</span>, <span class="at">b =</span> 2L), </span>
<span id="cb233-5"><a href="ggplot2-60-minutos.html#cb233-5" aria-hidden="true" tabindex="-1"></a>           <span class="fu">list</span>(<span class="at">b =</span> 3L))</span>
<span id="cb233-6"><a href="ggplot2-60-minutos.html#cb233-6" aria-hidden="true" tabindex="-1"></a>l1</span></code></pre></div>
<pre><code>## [[1]]
## [[1]]$a
## [1] 1
## 
## 
## [[2]]
## [[2]]$a
## NULL
## 
## [[2]]$b
## [1] 2
## 
## 
## [[3]]
## [[3]]$b
## [1] 3</code></pre>
<div class="sourceCode" id="cb235"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb235-1"><a href="ggplot2-60-minutos.html#cb235-1" aria-hidden="true" tabindex="-1"></a>l1 <span class="sc">%&gt;%</span> </span>
<span id="cb235-2"><a href="ggplot2-60-minutos.html#cb235-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="st">&quot;a&quot;</span>, <span class="at">.default =</span> <span class="st">&quot;???&quot;</span>)</span></code></pre></div>
<pre><code>## [[1]]
## [1] 1
## 
## [[2]]
## [1] &quot;???&quot;
## 
## [[3]]
## [1] &quot;???&quot;</code></pre>
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb237-1"><a href="ggplot2-60-minutos.html#cb237-1" aria-hidden="true" tabindex="-1"></a>l1 <span class="sc">%&gt;%</span> </span>
<span id="cb237-2"><a href="ggplot2-60-minutos.html#cb237-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_int</span>(<span class="st">&quot;b&quot;</span>, <span class="at">.default =</span> <span class="cn">NA</span>)</span></code></pre></div>
<pre><code>## [1] NA  2  3</code></pre>
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb239-1"><a href="ggplot2-60-minutos.html#cb239-1" aria-hidden="true" tabindex="-1"></a>l1 <span class="sc">%&gt;%</span> </span>
<span id="cb239-2"><a href="ggplot2-60-minutos.html#cb239-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_int</span>(<span class="dv">2</span>, <span class="at">.default =</span> <span class="cn">NA</span>)</span></code></pre></div>
<pre><code>## [1] NA  2 NA</code></pre>
<div class="sourceCode" id="cb241"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb241-1"><a href="ggplot2-60-minutos.html#cb241-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Supply multiple values to index deeply into a list</span></span>
<span id="cb241-2"><a href="ggplot2-60-minutos.html#cb241-2" aria-hidden="true" tabindex="-1"></a>l2 <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb241-3"><a href="ggplot2-60-minutos.html#cb241-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(<span class="at">num =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>,     letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>]),</span>
<span id="cb241-4"><a href="ggplot2-60-minutos.html#cb241-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(<span class="at">num =</span> <span class="dv">101</span><span class="sc">:</span><span class="dv">103</span>, letters[<span class="dv">4</span><span class="sc">:</span><span class="dv">6</span>]),</span>
<span id="cb241-5"><a href="ggplot2-60-minutos.html#cb241-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>())</span>
<span id="cb241-6"><a href="ggplot2-60-minutos.html#cb241-6" aria-hidden="true" tabindex="-1"></a>l2</span></code></pre></div>
<pre><code>## [[1]]
## [[1]]$num
## [1] 1 2 3
## 
## [[1]][[2]]
## [1] &quot;a&quot; &quot;b&quot; &quot;c&quot;
## 
## 
## [[2]]
## [[2]]$num
## [1] 101 102 103
## 
## [[2]][[2]]
## [1] &quot;d&quot; &quot;e&quot; &quot;f&quot;
## 
## 
## [[3]]
## list()</code></pre>
<div class="sourceCode" id="cb243"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb243-1"><a href="ggplot2-60-minutos.html#cb243-1" aria-hidden="true" tabindex="-1"></a>l2 <span class="sc">%&gt;%</span> </span>
<span id="cb243-2"><a href="ggplot2-60-minutos.html#cb243-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">2</span>))</span></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;b&quot;
## 
## [[2]]
## [1] &quot;e&quot;
## 
## [[3]]
## NULL</code></pre>
<div class="sourceCode" id="cb245"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb245-1"><a href="ggplot2-60-minutos.html#cb245-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use a list to build an extractor that mixes numeric indices and names,</span></span>
<span id="cb245-2"><a href="ggplot2-60-minutos.html#cb245-2" aria-hidden="true" tabindex="-1"></a><span class="co"># and .default to provide a default value if the element does not exist</span></span>
<span id="cb245-3"><a href="ggplot2-60-minutos.html#cb245-3" aria-hidden="true" tabindex="-1"></a>l2 <span class="sc">%&gt;%</span> </span>
<span id="cb245-4"><a href="ggplot2-60-minutos.html#cb245-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="fu">list</span>(<span class="st">&quot;num&quot;</span>, <span class="dv">3</span>))</span></code></pre></div>
<pre><code>## [[1]]
## [1] 3
## 
## [[2]]
## [1] 103
## 
## [[3]]
## NULL</code></pre>
<div class="sourceCode" id="cb247"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb247-1"><a href="ggplot2-60-minutos.html#cb247-1" aria-hidden="true" tabindex="-1"></a>l2 <span class="sc">%&gt;%</span> </span>
<span id="cb247-2"><a href="ggplot2-60-minutos.html#cb247-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_int</span>(<span class="fu">list</span>(<span class="st">&quot;num&quot;</span>, <span class="dv">3</span>), <span class="at">.default =</span> <span class="cn">NA</span>)</span></code></pre></div>
<pre><code>## [1]   3 103  NA</code></pre>
<div class="sourceCode" id="cb249"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb249-1"><a href="ggplot2-60-minutos.html#cb249-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Working with data frames</span></span>
<span id="cb249-2"><a href="ggplot2-60-minutos.html#cb249-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Use map_lgl(), map_dbl(), etc to return a vector instead of a list:</span></span>
<span id="cb249-3"><a href="ggplot2-60-minutos.html#cb249-3" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span> </span>
<span id="cb249-4"><a href="ggplot2-60-minutos.html#cb249-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_dbl</span>(sum)</span></code></pre></div>
<pre><code>##      mpg      cyl     disp       hp     drat       wt     qsec       vs 
##  642.900  198.000 7383.100 4694.000  115.090  102.952  571.160   14.000 
##       am     gear     carb 
##   13.000  118.000   90.000</code></pre>
<div class="sourceCode" id="cb251"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb251-1"><a href="ggplot2-60-minutos.html#cb251-1" aria-hidden="true" tabindex="-1"></a><span class="co"># A more realistic example: split a data frame into pieces, fit a</span></span>
<span id="cb251-2"><a href="ggplot2-60-minutos.html#cb251-2" aria-hidden="true" tabindex="-1"></a><span class="co"># model to each piece, summarise and extract R^2</span></span>
<span id="cb251-3"><a href="ggplot2-60-minutos.html#cb251-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb251-4"><a href="ggplot2-60-minutos.html#cb251-4" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span> </span>
<span id="cb251-5"><a href="ggplot2-60-minutos.html#cb251-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(cyl) </span></code></pre></div>
<pre><code>##                     cyl
## Mazda RX4             6
## Mazda RX4 Wag         6
## Datsun 710            4
## Hornet 4 Drive        6
## Hornet Sportabout     8
## Valiant               6
## Duster 360            8
## Merc 240D             4
## Merc 230              4
## Merc 280              6
## Merc 280C             6
## Merc 450SE            8
## Merc 450SL            8
## Merc 450SLC           8
## Cadillac Fleetwood    8
## Lincoln Continental   8
## Chrysler Imperial     8
## Fiat 128              4
## Honda Civic           4
## Toyota Corolla        4
## Toyota Corona         4
## Dodge Challenger      8
## AMC Javelin           8
## Camaro Z28            8
## Pontiac Firebird      8
## Fiat X1-9             4
## Porsche 914-2         4
## Lotus Europa          4
## Ford Pantera L        8
## Ferrari Dino          6
## Maserati Bora         8
## Volvo 142E            4</code></pre>
<div class="sourceCode" id="cb253"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb253-1"><a href="ggplot2-60-minutos.html#cb253-1" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span></span>
<span id="cb253-2"><a href="ggplot2-60-minutos.html#cb253-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">split</span>(.<span class="sc">$</span>cyl) </span></code></pre></div>
<pre><code>## $`4`
##                 mpg cyl  disp  hp drat    wt  qsec vs am gear carb
## Datsun 710     22.8   4 108.0  93 3.85 2.320 18.61  1  1    4    1
## Merc 240D      24.4   4 146.7  62 3.69 3.190 20.00  1  0    4    2
## Merc 230       22.8   4 140.8  95 3.92 3.150 22.90  1  0    4    2
## Fiat 128       32.4   4  78.7  66 4.08 2.200 19.47  1  1    4    1
## Honda Civic    30.4   4  75.7  52 4.93 1.615 18.52  1  1    4    2
## Toyota Corolla 33.9   4  71.1  65 4.22 1.835 19.90  1  1    4    1
## Toyota Corona  21.5   4 120.1  97 3.70 2.465 20.01  1  0    3    1
## Fiat X1-9      27.3   4  79.0  66 4.08 1.935 18.90  1  1    4    1
## Porsche 914-2  26.0   4 120.3  91 4.43 2.140 16.70  0  1    5    2
## Lotus Europa   30.4   4  95.1 113 3.77 1.513 16.90  1  1    5    2
## Volvo 142E     21.4   4 121.0 109 4.11 2.780 18.60  1  1    4    2
## 
## $`6`
##                 mpg cyl  disp  hp drat    wt  qsec vs am gear carb
## Mazda RX4      21.0   6 160.0 110 3.90 2.620 16.46  0  1    4    4
## Mazda RX4 Wag  21.0   6 160.0 110 3.90 2.875 17.02  0  1    4    4
## Hornet 4 Drive 21.4   6 258.0 110 3.08 3.215 19.44  1  0    3    1
## Valiant        18.1   6 225.0 105 2.76 3.460 20.22  1  0    3    1
## Merc 280       19.2   6 167.6 123 3.92 3.440 18.30  1  0    4    4
## Merc 280C      17.8   6 167.6 123 3.92 3.440 18.90  1  0    4    4
## Ferrari Dino   19.7   6 145.0 175 3.62 2.770 15.50  0  1    5    6
## 
## $`8`
##                      mpg cyl  disp  hp drat    wt  qsec vs am gear carb
## Hornet Sportabout   18.7   8 360.0 175 3.15 3.440 17.02  0  0    3    2
## Duster 360          14.3   8 360.0 245 3.21 3.570 15.84  0  0    3    4
## Merc 450SE          16.4   8 275.8 180 3.07 4.070 17.40  0  0    3    3
## Merc 450SL          17.3   8 275.8 180 3.07 3.730 17.60  0  0    3    3
## Merc 450SLC         15.2   8 275.8 180 3.07 3.780 18.00  0  0    3    3
## Cadillac Fleetwood  10.4   8 472.0 205 2.93 5.250 17.98  0  0    3    4
## Lincoln Continental 10.4   8 460.0 215 3.00 5.424 17.82  0  0    3    4
## Chrysler Imperial   14.7   8 440.0 230 3.23 5.345 17.42  0  0    3    4
## Dodge Challenger    15.5   8 318.0 150 2.76 3.520 16.87  0  0    3    2
## AMC Javelin         15.2   8 304.0 150 3.15 3.435 17.30  0  0    3    2
## Camaro Z28          13.3   8 350.0 245 3.73 3.840 15.41  0  0    3    4
## Pontiac Firebird    19.2   8 400.0 175 3.08 3.845 17.05  0  0    3    2
## Ford Pantera L      15.8   8 351.0 264 4.22 3.170 14.50  0  1    5    4
## Maserati Bora       15.0   8 301.0 335 3.54 3.570 14.60  0  1    5    8</code></pre>
<div class="sourceCode" id="cb255"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb255-1"><a href="ggplot2-60-minutos.html#cb255-1" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span></span>
<span id="cb255-2"><a href="ggplot2-60-minutos.html#cb255-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">split</span>(.<span class="sc">$</span>cyl) <span class="sc">%&gt;%</span></span>
<span id="cb255-3"><a href="ggplot2-60-minutos.html#cb255-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="sc">~</span> <span class="fu">lm</span>(mpg <span class="sc">~</span> wt, <span class="at">data =</span> .x)) </span></code></pre></div>
<pre><code>## $`4`
## 
## Call:
## lm(formula = mpg ~ wt, data = .x)
## 
## Coefficients:
## (Intercept)           wt  
##      39.571       -5.647  
## 
## 
## $`6`
## 
## Call:
## lm(formula = mpg ~ wt, data = .x)
## 
## Coefficients:
## (Intercept)           wt  
##       28.41        -2.78  
## 
## 
## $`8`
## 
## Call:
## lm(formula = mpg ~ wt, data = .x)
## 
## Coefficients:
## (Intercept)           wt  
##      23.868       -2.192</code></pre>
<div class="sourceCode" id="cb257"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb257-1"><a href="ggplot2-60-minutos.html#cb257-1" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span></span>
<span id="cb257-2"><a href="ggplot2-60-minutos.html#cb257-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">split</span>(.<span class="sc">$</span>cyl) <span class="sc">%&gt;%</span></span>
<span id="cb257-3"><a href="ggplot2-60-minutos.html#cb257-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="sc">~</span> <span class="fu">lm</span>(mpg <span class="sc">~</span> wt, <span class="at">data =</span> .x)) <span class="sc">%&gt;%</span></span>
<span id="cb257-4"><a href="ggplot2-60-minutos.html#cb257-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(summary) </span></code></pre></div>
<pre><code>## $`4`
## 
## Call:
## lm(formula = mpg ~ wt, data = .x)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -4.1513 -1.9795 -0.6272  1.9299  5.2523 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)   39.571      4.347   9.104 7.77e-06 ***
## wt            -5.647      1.850  -3.052   0.0137 *  
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 3.332 on 9 degrees of freedom
## Multiple R-squared:  0.5086, Adjusted R-squared:  0.454 
## F-statistic: 9.316 on 1 and 9 DF,  p-value: 0.01374
## 
## 
## $`6`
## 
## Call:
## lm(formula = mpg ~ wt, data = .x)
## 
## Residuals:
##      Mazda RX4  Mazda RX4 Wag Hornet 4 Drive        Valiant       Merc 280 
##        -0.1250         0.5840         1.9292        -0.6897         0.3547 
##      Merc 280C   Ferrari Dino 
##        -1.0453        -1.0080 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)   
## (Intercept)   28.409      4.184   6.789  0.00105 **
## wt            -2.780      1.335  -2.083  0.09176 . 
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 1.165 on 5 degrees of freedom
## Multiple R-squared:  0.4645, Adjusted R-squared:  0.3574 
## F-statistic: 4.337 on 1 and 5 DF,  p-value: 0.09176
## 
## 
## $`8`
## 
## Call:
## lm(formula = mpg ~ wt, data = .x)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -2.1491 -1.4664 -0.8458  1.5711  3.7619 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  23.8680     3.0055   7.942 4.05e-06 ***
## wt           -2.1924     0.7392  -2.966   0.0118 *  
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 2.024 on 12 degrees of freedom
## Multiple R-squared:  0.423,  Adjusted R-squared:  0.3749 
## F-statistic: 8.796 on 1 and 12 DF,  p-value: 0.01179</code></pre>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb259-1"><a href="ggplot2-60-minutos.html#cb259-1" aria-hidden="true" tabindex="-1"></a><span class="co"># original  </span></span>
<span id="cb259-2"><a href="ggplot2-60-minutos.html#cb259-2" aria-hidden="true" tabindex="-1"></a>  mtcars <span class="sc">%&gt;%</span></span>
<span id="cb259-3"><a href="ggplot2-60-minutos.html#cb259-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">split</span>(.<span class="sc">$</span>cyl) <span class="sc">%&gt;%</span></span>
<span id="cb259-4"><a href="ggplot2-60-minutos.html#cb259-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="sc">~</span> <span class="fu">lm</span>(mpg <span class="sc">~</span> wt, <span class="at">data =</span> .x)) <span class="sc">%&gt;%</span></span>
<span id="cb259-5"><a href="ggplot2-60-minutos.html#cb259-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(summary) <span class="sc">%&gt;%</span></span>
<span id="cb259-6"><a href="ggplot2-60-minutos.html#cb259-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_dbl</span>(<span class="st">&quot;r.squared&quot;</span>)</span></code></pre></div>
<pre><code>##         4         6         8 
## 0.5086326 0.4645102 0.4229655</code></pre>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb261-1"><a href="ggplot2-60-minutos.html#cb261-1" aria-hidden="true" tabindex="-1"></a><span class="co"># If each element of the output is a data frame, use</span></span>
<span id="cb261-2"><a href="ggplot2-60-minutos.html#cb261-2" aria-hidden="true" tabindex="-1"></a><span class="co"># map_dfr to row-bind them together:</span></span>
<span id="cb261-3"><a href="ggplot2-60-minutos.html#cb261-3" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span></span>
<span id="cb261-4"><a href="ggplot2-60-minutos.html#cb261-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">split</span>(.<span class="sc">$</span>cyl) <span class="sc">%&gt;%</span></span>
<span id="cb261-5"><a href="ggplot2-60-minutos.html#cb261-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="sc">~</span> <span class="fu">lm</span>(mpg <span class="sc">~</span> wt, <span class="at">data =</span> .x)) <span class="sc">%&gt;%</span></span>
<span id="cb261-6"><a href="ggplot2-60-minutos.html#cb261-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_dfr</span>(<span class="sc">~</span> <span class="fu">as.data.frame</span>(<span class="fu">t</span>(<span class="fu">as.matrix</span>(<span class="fu">coef</span>(.)))))</span></code></pre></div>
<pre><code>##   (Intercept)        wt
## 1    39.57120 -5.647025
## 2    28.40884 -2.780106
## 3    23.86803 -2.192438</code></pre>
<div class="sourceCode" id="cb263"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb263-1"><a href="ggplot2-60-minutos.html#cb263-1" aria-hidden="true" tabindex="-1"></a><span class="co"># (if you also want to preserve the variable names see</span></span>
<span id="cb263-2"><a href="ggplot2-60-minutos.html#cb263-2" aria-hidden="true" tabindex="-1"></a><span class="co"># the broom package)</span></span>
<span id="cb263-3"><a href="ggplot2-60-minutos.html#cb263-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb263-4"><a href="ggplot2-60-minutos.html#cb263-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb263-5"><a href="ggplot2-60-minutos.html#cb263-5" aria-hidden="true" tabindex="-1"></a><span class="co">#nest, unest() estudar!</span></span>
<span id="cb263-6"><a href="ggplot2-60-minutos.html#cb263-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb263-7"><a href="ggplot2-60-minutos.html#cb263-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb263-8"><a href="ggplot2-60-minutos.html#cb263-8" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span> </span>
<span id="cb263-9"><a href="ggplot2-60-minutos.html#cb263-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(cyl) <span class="sc">%&gt;%</span> </span>
<span id="cb263-10"><a href="ggplot2-60-minutos.html#cb263-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>()</span></code></pre></div>
<pre><code>## # A tibble: 3 × 2
## # Groups:   cyl [3]
##     cyl data              
##   &lt;dbl&gt; &lt;list&gt;            
## 1     6 &lt;tibble [7 × 10]&gt; 
## 2     4 &lt;tibble [11 × 10]&gt;
## 3     8 &lt;tibble [14 × 10]&gt;</code></pre>
<div class="sourceCode" id="cb265"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb265-1"><a href="ggplot2-60-minutos.html#cb265-1" aria-hidden="true" tabindex="-1"></a><span class="co">#mtcars %&gt;% </span></span>
<span id="cb265-2"><a href="ggplot2-60-minutos.html#cb265-2" aria-hidden="true" tabindex="-1"></a><span class="co">#  group_by(cyl) %&gt;% </span></span>
<span id="cb265-3"><a href="ggplot2-60-minutos.html#cb265-3" aria-hidden="true" tabindex="-1"></a><span class="co">#  nest() %&gt;%</span></span>
<span id="cb265-4"><a href="ggplot2-60-minutos.html#cb265-4" aria-hidden="true" tabindex="-1"></a><span class="co">#  map(~ lm(mpg ~ wt, data = .x)) </span></span></code></pre></div>
</div>
<div id="map-functions" class="section level2 hasAnchor" number="3.17">
<h2><span class="header-section-number">3.17</span> map functions<a href="ggplot2-60-minutos.html#map-functions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb266"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb266-1"><a href="ggplot2-60-minutos.html#cb266-1" aria-hidden="true" tabindex="-1"></a><span class="fu">example</span>(<span class="st">&quot;map&quot;</span>)</span>
<span id="cb266-2"><a href="ggplot2-60-minutos.html#cb266-2" aria-hidden="true" tabindex="-1"></a><span class="fu">example</span>(<span class="st">&quot;map_at&quot;</span>)</span>
<span id="cb266-3"><a href="ggplot2-60-minutos.html#cb266-3" aria-hidden="true" tabindex="-1"></a><span class="fu">example</span>(<span class="st">&quot;map_chr&quot;</span>)</span>
<span id="cb266-4"><a href="ggplot2-60-minutos.html#cb266-4" aria-hidden="true" tabindex="-1"></a><span class="fu">example</span>(<span class="st">&quot;map_dbl&quot;</span>)</span>
<span id="cb266-5"><a href="ggplot2-60-minutos.html#cb266-5" aria-hidden="true" tabindex="-1"></a><span class="fu">example</span>(<span class="st">&quot;map_df&quot;</span>)</span>
<span id="cb266-6"><a href="ggplot2-60-minutos.html#cb266-6" aria-hidden="true" tabindex="-1"></a><span class="fu">example</span>(<span class="st">&quot;map_dfc&quot;</span>)</span>
<span id="cb266-7"><a href="ggplot2-60-minutos.html#cb266-7" aria-hidden="true" tabindex="-1"></a><span class="fu">example</span>(<span class="st">&quot;map_dfr&quot;</span>)</span>
<span id="cb266-8"><a href="ggplot2-60-minutos.html#cb266-8" aria-hidden="true" tabindex="-1"></a><span class="fu">example</span>(<span class="st">&quot;map_int&quot;</span>)</span>
<span id="cb266-9"><a href="ggplot2-60-minutos.html#cb266-9" aria-hidden="true" tabindex="-1"></a><span class="fu">example</span>(<span class="st">&quot;map_lgl&quot;</span>)</span>
<span id="cb266-10"><a href="ggplot2-60-minutos.html#cb266-10" aria-hidden="true" tabindex="-1"></a><span class="fu">example</span>(<span class="st">&quot;map_vec&quot;</span>)</span></code></pre></div>
</div>
<div id="map2-functions" class="section level2 hasAnchor" number="3.18">
<h2><span class="header-section-number">3.18</span> map2 functions<a href="ggplot2-60-minutos.html#map2-functions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb267"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb267-1"><a href="ggplot2-60-minutos.html#cb267-1" aria-hidden="true" tabindex="-1"></a><span class="fu">example</span>(<span class="st">&quot;map2&quot;</span>)</span>
<span id="cb267-2"><a href="ggplot2-60-minutos.html#cb267-2" aria-hidden="true" tabindex="-1"></a><span class="fu">example</span>(<span class="st">&quot;map2_chr&quot;</span>)</span>
<span id="cb267-3"><a href="ggplot2-60-minutos.html#cb267-3" aria-hidden="true" tabindex="-1"></a><span class="fu">example</span>(<span class="st">&quot;map2_dbl&quot;</span>)</span>
<span id="cb267-4"><a href="ggplot2-60-minutos.html#cb267-4" aria-hidden="true" tabindex="-1"></a><span class="fu">example</span>(<span class="st">&quot;map2_df&quot;</span>)</span>
<span id="cb267-5"><a href="ggplot2-60-minutos.html#cb267-5" aria-hidden="true" tabindex="-1"></a><span class="fu">example</span>(<span class="st">&quot;map2_dfc&quot;</span>)</span>
<span id="cb267-6"><a href="ggplot2-60-minutos.html#cb267-6" aria-hidden="true" tabindex="-1"></a><span class="fu">example</span>(<span class="st">&quot;map2_dfr&quot;</span>)</span>
<span id="cb267-7"><a href="ggplot2-60-minutos.html#cb267-7" aria-hidden="true" tabindex="-1"></a><span class="fu">example</span>(<span class="st">&quot;map2_int&quot;</span>)</span>
<span id="cb267-8"><a href="ggplot2-60-minutos.html#cb267-8" aria-hidden="true" tabindex="-1"></a><span class="fu">example</span>(<span class="st">&quot;map2_lgl&quot;</span>)</span>
<span id="cb267-9"><a href="ggplot2-60-minutos.html#cb267-9" aria-hidden="true" tabindex="-1"></a><span class="fu">example</span>(<span class="st">&quot;map2_raw&quot;</span>)</span>
<span id="cb267-10"><a href="ggplot2-60-minutos.html#cb267-10" aria-hidden="true" tabindex="-1"></a><span class="fu">example</span>(<span class="st">&quot;map2_vec&quot;</span>)</span></code></pre></div>
<p>=======
# purrr</p>
<div class="sourceCode" id="cb268"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb268-1"><a href="ggplot2-60-minutos.html#cb268-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb268-2"><a href="ggplot2-60-minutos.html#cb268-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span>(<span class="st">&quot;package:purrr&quot;</span>)</span></code></pre></div>
<pre><code>##   [1] &quot;%@%&quot;                 &quot;%||%&quot;                &quot;%&gt;%&quot;                
##   [4] &quot;accumulate&quot;          &quot;accumulate_right&quot;    &quot;accumulate2&quot;        
##   [7] &quot;array_branch&quot;        &quot;array_tree&quot;          &quot;as_function&quot;        
##  [10] &quot;as_mapper&quot;           &quot;as_vector&quot;           &quot;assign_in&quot;          
##  [13] &quot;at_depth&quot;            &quot;attr_getter&quot;         &quot;auto_browse&quot;        
##  [16] &quot;chuck&quot;               &quot;compact&quot;             &quot;compose&quot;            
##  [19] &quot;cross&quot;               &quot;cross_d&quot;             &quot;cross_df&quot;           
##  [22] &quot;cross_n&quot;             &quot;cross2&quot;              &quot;cross3&quot;             
##  [25] &quot;detect&quot;              &quot;detect_index&quot;        &quot;discard&quot;            
##  [28] &quot;done&quot;                &quot;every&quot;               &quot;exec&quot;               
##  [31] &quot;flatten&quot;             &quot;flatten_chr&quot;         &quot;flatten_dbl&quot;        
##  [34] &quot;flatten_df&quot;          &quot;flatten_dfc&quot;         &quot;flatten_dfr&quot;        
##  [37] &quot;flatten_int&quot;         &quot;flatten_lgl&quot;         &quot;flatten_raw&quot;        
##  [40] &quot;has_element&quot;         &quot;head_while&quot;          &quot;imap&quot;               
##  [43] &quot;imap_chr&quot;            &quot;imap_dbl&quot;            &quot;imap_dfc&quot;           
##  [46] &quot;imap_dfr&quot;            &quot;imap_int&quot;            &quot;imap_lgl&quot;           
##  [49] &quot;imap_raw&quot;            &quot;imodify&quot;             &quot;insistently&quot;        
##  [52] &quot;invoke&quot;              &quot;invoke_map&quot;          &quot;invoke_map_chr&quot;     
##  [55] &quot;invoke_map_dbl&quot;      &quot;invoke_map_df&quot;       &quot;invoke_map_dfc&quot;     
##  [58] &quot;invoke_map_dfr&quot;      &quot;invoke_map_int&quot;      &quot;invoke_map_lgl&quot;     
##  [61] &quot;invoke_map_raw&quot;      &quot;is_atomic&quot;           &quot;is_bare_atomic&quot;     
##  [64] &quot;is_bare_character&quot;   &quot;is_bare_double&quot;      &quot;is_bare_integer&quot;    
##  [67] &quot;is_bare_list&quot;        &quot;is_bare_logical&quot;     &quot;is_bare_numeric&quot;    
##  [70] &quot;is_bare_vector&quot;      &quot;is_character&quot;        &quot;is_double&quot;          
##  [73] &quot;is_empty&quot;            &quot;is_formula&quot;          &quot;is_function&quot;        
##  [76] &quot;is_integer&quot;          &quot;is_list&quot;             &quot;is_logical&quot;         
##  [79] &quot;is_null&quot;             &quot;is_numeric&quot;          &quot;is_rate&quot;            
##  [82] &quot;is_scalar_atomic&quot;    &quot;is_scalar_character&quot; &quot;is_scalar_double&quot;   
##  [85] &quot;is_scalar_integer&quot;   &quot;is_scalar_list&quot;      &quot;is_scalar_logical&quot;  
##  [88] &quot;is_scalar_numeric&quot;   &quot;is_scalar_vector&quot;    &quot;is_vector&quot;          
##  [91] &quot;iwalk&quot;               &quot;keep&quot;                &quot;lift&quot;               
##  [94] &quot;lift_dl&quot;             &quot;lift_dv&quot;             &quot;lift_ld&quot;            
##  [97] &quot;lift_lv&quot;             &quot;lift_vd&quot;             &quot;lift_vl&quot;            
## [100] &quot;list_along&quot;          &quot;list_merge&quot;          &quot;list_modify&quot;        
## [103] &quot;lmap&quot;                &quot;lmap_at&quot;             &quot;lmap_if&quot;            
## [106] &quot;map&quot;                 &quot;map_at&quot;              &quot;map_call&quot;           
## [109] &quot;map_chr&quot;             &quot;map_dbl&quot;             &quot;map_depth&quot;          
## [112] &quot;map_df&quot;              &quot;map_dfc&quot;             &quot;map_dfr&quot;            
## [115] &quot;map_if&quot;              &quot;map_int&quot;             &quot;map_lgl&quot;            
## [118] &quot;map_raw&quot;             &quot;map2&quot;                &quot;map2_chr&quot;           
## [121] &quot;map2_dbl&quot;            &quot;map2_df&quot;             &quot;map2_dfc&quot;           
## [124] &quot;map2_dfr&quot;            &quot;map2_int&quot;            &quot;map2_lgl&quot;           
## [127] &quot;map2_raw&quot;            &quot;modify&quot;              &quot;modify_at&quot;          
## [130] &quot;modify_depth&quot;        &quot;modify_if&quot;           &quot;modify_in&quot;          
## [133] &quot;modify2&quot;             &quot;negate&quot;              &quot;none&quot;               
## [136] &quot;partial&quot;             &quot;pluck&quot;               &quot;pluck&lt;-&quot;            
## [139] &quot;pmap&quot;                &quot;pmap_chr&quot;            &quot;pmap_dbl&quot;           
## [142] &quot;pmap_df&quot;             &quot;pmap_dfc&quot;            &quot;pmap_dfr&quot;           
## [145] &quot;pmap_int&quot;            &quot;pmap_lgl&quot;            &quot;pmap_raw&quot;           
## [148] &quot;possibly&quot;            &quot;prepend&quot;             &quot;pwalk&quot;              
## [151] &quot;quietly&quot;             &quot;rate_backoff&quot;        &quot;rate_delay&quot;         
## [154] &quot;rate_reset&quot;          &quot;rate_sleep&quot;          &quot;rbernoulli&quot;         
## [157] &quot;rdunif&quot;              &quot;reduce&quot;              &quot;reduce_right&quot;       
## [160] &quot;reduce2&quot;             &quot;reduce2_right&quot;       &quot;rep_along&quot;          
## [163] &quot;rerun&quot;               &quot;safely&quot;              &quot;set_names&quot;          
## [166] &quot;simplify&quot;            &quot;simplify_all&quot;        &quot;slowly&quot;             
## [169] &quot;some&quot;                &quot;splice&quot;              &quot;tail_while&quot;         
## [172] &quot;transpose&quot;           &quot;update_list&quot;         &quot;vec_depth&quot;          
## [175] &quot;walk&quot;                &quot;walk2&quot;               &quot;when&quot;               
## [178] &quot;zap&quot;</code></pre>
</div>
<div id="apply-a-function-to-each-element-of-a-list-or-atomic-vector-1" class="section level2 hasAnchor" number="3.19">
<h2><span class="header-section-number">3.19</span> Apply a function to each element of a list or atomic vector<a href="ggplot2-60-minutos.html#apply-a-function-to-each-element-of-a-list-or-atomic-vector-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<blockquote>
<p>The map functions transform their input by applying a function to each element of a list or atomic vector and returning an object of the same length as the input.</p>
</blockquote>
<ul>
<li><p>map() always returns a list. See the modify() family for versions that return an object of the same type as the input.</p></li>
<li><p>map_lgl(), map_int(), map_dbl() and map_chr() return an atomic vector of the indicated type (or die trying).</p></li>
<li><p>map_dfr() and map_dfc() return a data frame created by row-binding and column-binding respectively. They require dplyr to be installed.</p></li>
<li><p>The returned values of .f must be of length one for each element of .x. If .f uses an extractor function shortcut, .default can be specified to handle values that are absent or empty. See as_mapper() for more on .default.</p></li>
<li><p>walk() calls .f for its side-effect and returns the input .x.</p></li>
</ul>
<div id="usage-1" class="section level3 hasAnchor" number="3.19.1">
<h3><span class="header-section-number">3.19.1</span> Usage<a href="ggplot2-60-minutos.html#usage-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p>map(.x, .f, …)</p></li>
<li><p>map_lgl(.x, .f, …)</p></li>
<li><p>map_chr(.x, .f, …)</p></li>
<li><p>map_int(.x, .f, …)</p></li>
<li><p>map_dbl(.x, .f, …)</p></li>
<li><p>map_raw(.x, .f, …)</p></li>
<li><p>map_dfr(.x, .f, …, .id = NULL)</p></li>
<li><p>map_dfc(.x, .f, …)</p></li>
<li><p>walk(.x, .f, …)</p></li>
</ul>
</div>
<div id="arguments-1" class="section level3 hasAnchor" number="3.19.2">
<h3><span class="header-section-number">3.19.2</span> Arguments<a href="ggplot2-60-minutos.html#arguments-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p>.x A list or atomic vector.</p></li>
<li><p>.f A function, formula, or vector (not necessarily atomic).</p></li>
</ul>
<p>If a function, it is used as is.</p>
<p>If a formula, e.g. ~ .x + 2, it is converted to a function. There are three ways to refer to the arguments:</p>
<ul>
<li><p>For a single argument function, use .</p></li>
<li><p>For a two argument function, use .x and .y</p></li>
<li><p>For more arguments, use ..1, ..2, ..3 etc</p></li>
</ul>
<p>This syntax allows you to create very compact anonymous functions.</p>
<p>If character vector, numeric vector, or list, it is converted to an extractor function. Character vectors index by name and numeric vectors index by position; use a list to index by position and name at different levels. If a component is not present, the value of .default will be returned.</p>
<ul>
<li><p>… Additional arguments passed on to the mapped function.</p></li>
<li><p>.id Either a string or NULL. If a string, the output will contain a variable with that name, storing either the name (if .x is named) or the index (if .x is unnamed) of the input. If NULL, the default, no variable will be created.</p></li>
</ul>
<p>Only applies to ⁠_dfr⁠ variant.</p>
</div>
<div id="value-1" class="section level3 hasAnchor" number="3.19.3">
<h3><span class="header-section-number">3.19.3</span> Value<a href="ggplot2-60-minutos.html#value-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p>map() Returns a list the same length as .x.</p></li>
<li><p>map_lgl() returns a logical vector, map_int() an integer vector, map_dbl() a double vector, and map_chr() a character vector.</p></li>
<li><p>map_df(), map_dfc(), map_dfr() all return a data frame.</p></li>
<li><p>If .x has names(), the return value preserves those names.</p></li>
<li><p>The output of .f will be automatically typed upwards, e.g. logical -&gt; integer -&gt; double -&gt; character.</p></li>
<li><p>walk() returns the input .x (invisibly). This makes it easy to use in pipe.</p></li>
</ul>
</div>
<div id="see-also-1" class="section level3 hasAnchor" number="3.19.4">
<h3><span class="header-section-number">3.19.4</span> See Also<a href="ggplot2-60-minutos.html#see-also-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>map_if() for applying a function to only those elements of .x that meet a specified condition.</p>
<p>Other map variants: imap(), invoke(), lmap(), map2(), map_if(), modify()</p>
</div>
</div>
<div id="examples-1" class="section level2 hasAnchor" number="3.20">
<h2><span class="header-section-number">3.20</span> Examples<a href="ggplot2-60-minutos.html#examples-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb270"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb270-1"><a href="ggplot2-60-minutos.html#cb270-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute normal distributions from an atomic vector</span></span>
<span id="cb270-2"><a href="ggplot2-60-minutos.html#cb270-2" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">10</span> <span class="sc">%&gt;%</span></span>
<span id="cb270-3"><a href="ggplot2-60-minutos.html#cb270-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(rnorm, <span class="at">n =</span> <span class="dv">10</span>)</span></code></pre></div>
<pre><code>## [[1]]
##  [1]  1.80254743  2.30508809 -0.27613256  2.41280796 -0.35209712 -0.53288613
##  [7]  1.43445973  0.93681832  1.18776516 -0.09493179
## 
## [[2]]
##  [1] 3.179840 2.503918 3.470357 2.625086 2.038004 2.570075 1.684134 1.079856
##  [9] 2.329130 1.849692
## 
## [[3]]
##  [1] 1.734155 2.559865 4.106706 3.177322 1.885433 1.255561 2.766932 2.231115
##  [9] 2.389102 2.342929
## 
## [[4]]
##  [1] 4.974235 3.075890 5.183983 3.664343 4.161446 4.605528 3.631992 4.125412
##  [9] 4.769660 2.704741
## 
## [[5]]
##  [1] 5.416529 4.866660 5.245892 4.575261 3.471834 6.413171 6.903200 2.805538
##  [9] 4.309424 4.251240
## 
## [[6]]
##  [1] 6.142951 7.507827 5.838810 6.704438 5.755162 5.563908 7.030896 5.664118
##  [9] 6.554526 5.912720
## 
## [[7]]
##  [1] 8.192310 6.693818 5.522197 5.466459 5.631744 6.168921 6.416307 5.916012
##  [9] 5.033931 8.402404
## 
## [[8]]
##  [1] 8.988674 8.924974 8.702544 7.389264 7.893635 7.734048 8.085103 8.235354
##  [9] 8.625961 6.555866
## 
## [[9]]
##  [1]  8.370911 11.658092  8.492117  8.425444 10.739784  8.025798  9.356985
##  [8]  8.050090  9.088838  7.701986
## 
## [[10]]
##  [1] 10.231003  8.943909  9.808967 12.989638 10.206715 10.079664 10.288640
##  [8]  9.865263 10.672802 10.417758</code></pre>
<div class="sourceCode" id="cb272"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb272-1"><a href="ggplot2-60-minutos.html#cb272-1" aria-hidden="true" tabindex="-1"></a><span class="co"># You can also use an anonymous function</span></span>
<span id="cb272-2"><a href="ggplot2-60-minutos.html#cb272-2" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">10</span> <span class="sc">%&gt;%</span></span>
<span id="cb272-3"><a href="ggplot2-60-minutos.html#cb272-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="cf">function</span>(x) <span class="fu">rnorm</span>(<span class="dv">10</span>, x))</span></code></pre></div>
<pre><code>## [[1]]
##  [1]  0.10720614  1.07082126 -0.71379738  0.77084618  0.02216006 -0.51312947
##  [7]  0.92709828  0.07772268  0.03904844 -0.68291491
## 
## [[2]]
##  [1]  1.33468780  2.41175048  0.25704991  3.24435268  1.49113165  1.28144597
##  [7] -0.02395172  2.69722900  2.67565126  2.14916283
## 
## [[3]]
##  [1] 3.221478 5.043132 4.389011 2.205937 4.180943 2.339432 3.784662 3.747620
##  [9] 3.693041 1.661424
## 
## [[4]]
##  [1] 3.188869 3.462855 5.721702 3.806334 3.041728 4.538110 2.908060 4.136132
##  [9] 2.652177 4.342794
## 
## [[5]]
##  [1] 5.722228 7.101386 4.836274 4.517060 4.495546 6.058099 3.948650 3.575278
##  [9] 4.180479 7.613427
## 
## [[6]]
##  [1] 5.004273 4.803293 5.770924 4.164740 5.283258 4.065410 6.272640 7.141982
##  [9] 8.123660 5.916438
## 
## [[7]]
##  [1] 8.349059 6.174917 5.071596 7.327875 6.057670 6.512026 6.614803 7.602509
##  [9] 8.061792 6.601951
## 
## [[8]]
##  [1] 9.373075 8.012508 6.514988 8.410610 8.196544 8.353472 7.532504 9.257401
##  [9] 7.727892 7.143325
## 
## [[9]]
##  [1]  7.993999  8.568887  8.056586 10.940740 10.460899  8.777342  9.271609
##  [8] 10.112538  9.823503  9.059331
## 
## [[10]]
##  [1] 10.399124  9.247957  7.912243  9.844686 11.108992  9.304061  9.594754
##  [8]  9.822248 11.176414 10.901645</code></pre>
<div class="sourceCode" id="cb274"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb274-1"><a href="ggplot2-60-minutos.html#cb274-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Or a formula</span></span>
<span id="cb274-2"><a href="ggplot2-60-minutos.html#cb274-2" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">10</span> <span class="sc">%&gt;%</span></span>
<span id="cb274-3"><a href="ggplot2-60-minutos.html#cb274-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="sc">~</span> <span class="fu">rnorm</span>(<span class="dv">10</span>, .x))</span></code></pre></div>
<pre><code>## [[1]]
##  [1]  0.59732667  1.22519547 -0.02776522  0.96976384 -0.56829711  1.85336336
##  [7] -0.42814438 -0.02860893 -0.55617527  1.71871385
## 
## [[2]]
##  [1]  0.7016332  2.3469805 -0.5174146  2.7602208  1.1696766  1.3873953
##  [7]  1.6655948  1.2072724  1.2398505  1.9078502
## 
## [[3]]
##  [1] 2.086246 2.350220 3.112183 2.090939 2.668664 3.370832 4.689483 2.364628
##  [9] 3.304682 5.716367
## 
## [[4]]
##  [1] 3.529888 2.330601 4.964508 2.550126 3.140688 3.496452 3.884039 2.881584
##  [9] 4.235399 4.691943
## 
## [[5]]
##  [1] 5.133947 5.633246 4.657285 5.272937 5.510136 4.405777 4.890739 3.482351
##  [9] 6.278393 3.537965
## 
## [[6]]
##  [1] 5.831756 6.875476 6.057022 4.773859 6.930041 5.577406 7.579629 7.239675
##  [9] 4.269273 5.071470
## 
## [[7]]
##  [1] 6.364612 7.123848 7.766442 5.809868 8.117784 7.878885 6.531868 7.096092
##  [9] 6.742171 7.612890
## 
## [[8]]
##  [1] 8.299036 7.718766 7.763624 7.503825 8.525118 8.071850 7.830942 8.065977
##  [9] 8.653838 8.875624
## 
## [[9]]
##  [1]  9.466699  6.889557  7.860614  8.739747 10.067888  9.056601  8.919178
##  [8] 11.234196  8.785775  8.048816
## 
## [[10]]
##  [1]  9.804484 10.402647  9.133288 11.300388 11.250302 10.626525  9.529414
##  [8] 11.308285  9.250094 10.467390</code></pre>
<div class="sourceCode" id="cb276"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb276-1"><a href="ggplot2-60-minutos.html#cb276-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Simplify output to a vector instead of a list by computing the mean of the distributions</span></span>
<span id="cb276-2"><a href="ggplot2-60-minutos.html#cb276-2" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">10</span> <span class="sc">%&gt;%</span></span>
<span id="cb276-3"><a href="ggplot2-60-minutos.html#cb276-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(rnorm, <span class="at">n =</span> <span class="dv">10</span>) <span class="sc">%&gt;%</span>  <span class="co"># output a list</span></span>
<span id="cb276-4"><a href="ggplot2-60-minutos.html#cb276-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_dbl</span>(mean)           <span class="co"># output an atomic vector</span></span></code></pre></div>
<pre><code>##  [1]  1.100206  1.917894  2.885084  4.309608  4.412686  5.384202  7.062764
##  [8]  8.160474  8.526070 10.615097</code></pre>
<div class="sourceCode" id="cb278"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb278-1"><a href="ggplot2-60-minutos.html#cb278-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Using set_names() with character vectors is handy to keep track</span></span>
<span id="cb278-2"><a href="ggplot2-60-minutos.html#cb278-2" aria-hidden="true" tabindex="-1"></a><span class="co"># of the original inputs:</span></span>
<span id="cb278-3"><a href="ggplot2-60-minutos.html#cb278-3" aria-hidden="true" tabindex="-1"></a><span class="fu">set_names</span>(<span class="fu">c</span>(<span class="st">&quot;foo&quot;</span>, <span class="st">&quot;bar&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb278-4"><a href="ggplot2-60-minutos.html#cb278-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_chr</span>(paste0, <span class="st">&quot;:suffix&quot;</span>)</span></code></pre></div>
<pre><code>##          foo          bar 
## &quot;foo:suffix&quot; &quot;bar:suffix&quot;</code></pre>
<div class="sourceCode" id="cb280"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb280-1"><a href="ggplot2-60-minutos.html#cb280-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Working with lists</span></span>
<span id="cb280-2"><a href="ggplot2-60-minutos.html#cb280-2" aria-hidden="true" tabindex="-1"></a>favorite_desserts <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">Sophia =</span> <span class="st">&quot;banana bread&quot;</span>, <span class="at">Eliott =</span> <span class="st">&quot;pancakes&quot;</span>, <span class="at">Karina =</span> <span class="st">&quot;chocolate cake&quot;</span>)</span>
<span id="cb280-3"><a href="ggplot2-60-minutos.html#cb280-3" aria-hidden="true" tabindex="-1"></a>favorite_desserts</span></code></pre></div>
<pre><code>## $Sophia
## [1] &quot;banana bread&quot;
## 
## $Eliott
## [1] &quot;pancakes&quot;
## 
## $Karina
## [1] &quot;chocolate cake&quot;</code></pre>
<div class="sourceCode" id="cb282"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb282-1"><a href="ggplot2-60-minutos.html#cb282-1" aria-hidden="true" tabindex="-1"></a>favorite_desserts <span class="sc">%&gt;%</span> </span>
<span id="cb282-2"><a href="ggplot2-60-minutos.html#cb282-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_chr</span>(<span class="sc">~</span> <span class="fu">paste</span>(.x, <span class="st">&quot;rocks!&quot;</span>))</span></code></pre></div>
<pre><code>##                  Sophia                  Eliott                  Karina 
##   &quot;banana bread rocks!&quot;       &quot;pancakes rocks!&quot; &quot;chocolate cake rocks!&quot;</code></pre>
<div class="sourceCode" id="cb284"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb284-1"><a href="ggplot2-60-minutos.html#cb284-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract by name or position</span></span>
<span id="cb284-2"><a href="ggplot2-60-minutos.html#cb284-2" aria-hidden="true" tabindex="-1"></a><span class="co"># .default specifies value for elements that are missing or NULL</span></span>
<span id="cb284-3"><a href="ggplot2-60-minutos.html#cb284-3" aria-hidden="true" tabindex="-1"></a>l1 <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="fu">list</span>(<span class="at">a =</span> 1L), </span>
<span id="cb284-4"><a href="ggplot2-60-minutos.html#cb284-4" aria-hidden="true" tabindex="-1"></a>           <span class="fu">list</span>(<span class="at">a =</span> <span class="cn">NULL</span>, <span class="at">b =</span> 2L), </span>
<span id="cb284-5"><a href="ggplot2-60-minutos.html#cb284-5" aria-hidden="true" tabindex="-1"></a>           <span class="fu">list</span>(<span class="at">b =</span> 3L))</span>
<span id="cb284-6"><a href="ggplot2-60-minutos.html#cb284-6" aria-hidden="true" tabindex="-1"></a>l1</span></code></pre></div>
<pre><code>## [[1]]
## [[1]]$a
## [1] 1
## 
## 
## [[2]]
## [[2]]$a
## NULL
## 
## [[2]]$b
## [1] 2
## 
## 
## [[3]]
## [[3]]$b
## [1] 3</code></pre>
<div class="sourceCode" id="cb286"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb286-1"><a href="ggplot2-60-minutos.html#cb286-1" aria-hidden="true" tabindex="-1"></a>l1 <span class="sc">%&gt;%</span> </span>
<span id="cb286-2"><a href="ggplot2-60-minutos.html#cb286-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="st">&quot;a&quot;</span>, <span class="at">.default =</span> <span class="st">&quot;???&quot;</span>)</span></code></pre></div>
<pre><code>## [[1]]
## [1] 1
## 
## [[2]]
## [1] &quot;???&quot;
## 
## [[3]]
## [1] &quot;???&quot;</code></pre>
<div class="sourceCode" id="cb288"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb288-1"><a href="ggplot2-60-minutos.html#cb288-1" aria-hidden="true" tabindex="-1"></a>l1 <span class="sc">%&gt;%</span> </span>
<span id="cb288-2"><a href="ggplot2-60-minutos.html#cb288-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_int</span>(<span class="st">&quot;b&quot;</span>, <span class="at">.default =</span> <span class="cn">NA</span>)</span></code></pre></div>
<pre><code>## [1] NA  2  3</code></pre>
<div class="sourceCode" id="cb290"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb290-1"><a href="ggplot2-60-minutos.html#cb290-1" aria-hidden="true" tabindex="-1"></a>l1 <span class="sc">%&gt;%</span> </span>
<span id="cb290-2"><a href="ggplot2-60-minutos.html#cb290-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_int</span>(<span class="dv">2</span>, <span class="at">.default =</span> <span class="cn">NA</span>)</span></code></pre></div>
<pre><code>## [1] NA  2 NA</code></pre>
<div class="sourceCode" id="cb292"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb292-1"><a href="ggplot2-60-minutos.html#cb292-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Supply multiple values to index deeply into a list</span></span>
<span id="cb292-2"><a href="ggplot2-60-minutos.html#cb292-2" aria-hidden="true" tabindex="-1"></a>l2 <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb292-3"><a href="ggplot2-60-minutos.html#cb292-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(<span class="at">num =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>,     letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>]),</span>
<span id="cb292-4"><a href="ggplot2-60-minutos.html#cb292-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(<span class="at">num =</span> <span class="dv">101</span><span class="sc">:</span><span class="dv">103</span>, letters[<span class="dv">4</span><span class="sc">:</span><span class="dv">6</span>]),</span>
<span id="cb292-5"><a href="ggplot2-60-minutos.html#cb292-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>())</span>
<span id="cb292-6"><a href="ggplot2-60-minutos.html#cb292-6" aria-hidden="true" tabindex="-1"></a>l2</span></code></pre></div>
<pre><code>## [[1]]
## [[1]]$num
## [1] 1 2 3
## 
## [[1]][[2]]
## [1] &quot;a&quot; &quot;b&quot; &quot;c&quot;
## 
## 
## [[2]]
## [[2]]$num
## [1] 101 102 103
## 
## [[2]][[2]]
## [1] &quot;d&quot; &quot;e&quot; &quot;f&quot;
## 
## 
## [[3]]
## list()</code></pre>
<div class="sourceCode" id="cb294"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb294-1"><a href="ggplot2-60-minutos.html#cb294-1" aria-hidden="true" tabindex="-1"></a>l2 <span class="sc">%&gt;%</span> </span>
<span id="cb294-2"><a href="ggplot2-60-minutos.html#cb294-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">2</span>))</span></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;b&quot;
## 
## [[2]]
## [1] &quot;e&quot;
## 
## [[3]]
## NULL</code></pre>
<div class="sourceCode" id="cb296"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb296-1"><a href="ggplot2-60-minutos.html#cb296-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use a list to build an extractor that mixes numeric indices and names,</span></span>
<span id="cb296-2"><a href="ggplot2-60-minutos.html#cb296-2" aria-hidden="true" tabindex="-1"></a><span class="co"># and .default to provide a default value if the element does not exist</span></span>
<span id="cb296-3"><a href="ggplot2-60-minutos.html#cb296-3" aria-hidden="true" tabindex="-1"></a>l2 <span class="sc">%&gt;%</span> </span>
<span id="cb296-4"><a href="ggplot2-60-minutos.html#cb296-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="fu">list</span>(<span class="st">&quot;num&quot;</span>, <span class="dv">3</span>))</span></code></pre></div>
<pre><code>## [[1]]
## [1] 3
## 
## [[2]]
## [1] 103
## 
## [[3]]
## NULL</code></pre>
<div class="sourceCode" id="cb298"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb298-1"><a href="ggplot2-60-minutos.html#cb298-1" aria-hidden="true" tabindex="-1"></a>l2 <span class="sc">%&gt;%</span> </span>
<span id="cb298-2"><a href="ggplot2-60-minutos.html#cb298-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_int</span>(<span class="fu">list</span>(<span class="st">&quot;num&quot;</span>, <span class="dv">3</span>), <span class="at">.default =</span> <span class="cn">NA</span>)</span></code></pre></div>
<pre><code>## [1]   3 103  NA</code></pre>
<div class="sourceCode" id="cb300"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb300-1"><a href="ggplot2-60-minutos.html#cb300-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Working with data frames</span></span>
<span id="cb300-2"><a href="ggplot2-60-minutos.html#cb300-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Use map_lgl(), map_dbl(), etc to return a vector instead of a list:</span></span>
<span id="cb300-3"><a href="ggplot2-60-minutos.html#cb300-3" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span> </span>
<span id="cb300-4"><a href="ggplot2-60-minutos.html#cb300-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_dbl</span>(sum)</span></code></pre></div>
<pre><code>##      mpg      cyl     disp       hp     drat       wt     qsec       vs 
##  642.900  198.000 7383.100 4694.000  115.090  102.952  571.160   14.000 
##       am     gear     carb 
##   13.000  118.000   90.000</code></pre>
<div class="sourceCode" id="cb302"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb302-1"><a href="ggplot2-60-minutos.html#cb302-1" aria-hidden="true" tabindex="-1"></a><span class="co"># A more realistic example: split a data frame into pieces, fit a</span></span>
<span id="cb302-2"><a href="ggplot2-60-minutos.html#cb302-2" aria-hidden="true" tabindex="-1"></a><span class="co"># model to each piece, summarise and extract R^2</span></span>
<span id="cb302-3"><a href="ggplot2-60-minutos.html#cb302-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb302-4"><a href="ggplot2-60-minutos.html#cb302-4" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span> </span>
<span id="cb302-5"><a href="ggplot2-60-minutos.html#cb302-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(cyl) </span></code></pre></div>
<pre><code>##                     cyl
## Mazda RX4             6
## Mazda RX4 Wag         6
## Datsun 710            4
## Hornet 4 Drive        6
## Hornet Sportabout     8
## Valiant               6
## Duster 360            8
## Merc 240D             4
## Merc 230              4
## Merc 280              6
## Merc 280C             6
## Merc 450SE            8
## Merc 450SL            8
## Merc 450SLC           8
## Cadillac Fleetwood    8
## Lincoln Continental   8
## Chrysler Imperial     8
## Fiat 128              4
## Honda Civic           4
## Toyota Corolla        4
## Toyota Corona         4
## Dodge Challenger      8
## AMC Javelin           8
## Camaro Z28            8
## Pontiac Firebird      8
## Fiat X1-9             4
## Porsche 914-2         4
## Lotus Europa          4
## Ford Pantera L        8
## Ferrari Dino          6
## Maserati Bora         8
## Volvo 142E            4</code></pre>
<div class="sourceCode" id="cb304"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb304-1"><a href="ggplot2-60-minutos.html#cb304-1" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span></span>
<span id="cb304-2"><a href="ggplot2-60-minutos.html#cb304-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">split</span>(.<span class="sc">$</span>cyl) </span></code></pre></div>
<pre><code>## $`4`
##                 mpg cyl  disp  hp drat    wt  qsec vs am gear carb
## Datsun 710     22.8   4 108.0  93 3.85 2.320 18.61  1  1    4    1
## Merc 240D      24.4   4 146.7  62 3.69 3.190 20.00  1  0    4    2
## Merc 230       22.8   4 140.8  95 3.92 3.150 22.90  1  0    4    2
## Fiat 128       32.4   4  78.7  66 4.08 2.200 19.47  1  1    4    1
## Honda Civic    30.4   4  75.7  52 4.93 1.615 18.52  1  1    4    2
## Toyota Corolla 33.9   4  71.1  65 4.22 1.835 19.90  1  1    4    1
## Toyota Corona  21.5   4 120.1  97 3.70 2.465 20.01  1  0    3    1
## Fiat X1-9      27.3   4  79.0  66 4.08 1.935 18.90  1  1    4    1
## Porsche 914-2  26.0   4 120.3  91 4.43 2.140 16.70  0  1    5    2
## Lotus Europa   30.4   4  95.1 113 3.77 1.513 16.90  1  1    5    2
## Volvo 142E     21.4   4 121.0 109 4.11 2.780 18.60  1  1    4    2
## 
## $`6`
##                 mpg cyl  disp  hp drat    wt  qsec vs am gear carb
## Mazda RX4      21.0   6 160.0 110 3.90 2.620 16.46  0  1    4    4
## Mazda RX4 Wag  21.0   6 160.0 110 3.90 2.875 17.02  0  1    4    4
## Hornet 4 Drive 21.4   6 258.0 110 3.08 3.215 19.44  1  0    3    1
## Valiant        18.1   6 225.0 105 2.76 3.460 20.22  1  0    3    1
## Merc 280       19.2   6 167.6 123 3.92 3.440 18.30  1  0    4    4
## Merc 280C      17.8   6 167.6 123 3.92 3.440 18.90  1  0    4    4
## Ferrari Dino   19.7   6 145.0 175 3.62 2.770 15.50  0  1    5    6
## 
## $`8`
##                      mpg cyl  disp  hp drat    wt  qsec vs am gear carb
## Hornet Sportabout   18.7   8 360.0 175 3.15 3.440 17.02  0  0    3    2
## Duster 360          14.3   8 360.0 245 3.21 3.570 15.84  0  0    3    4
## Merc 450SE          16.4   8 275.8 180 3.07 4.070 17.40  0  0    3    3
## Merc 450SL          17.3   8 275.8 180 3.07 3.730 17.60  0  0    3    3
## Merc 450SLC         15.2   8 275.8 180 3.07 3.780 18.00  0  0    3    3
## Cadillac Fleetwood  10.4   8 472.0 205 2.93 5.250 17.98  0  0    3    4
## Lincoln Continental 10.4   8 460.0 215 3.00 5.424 17.82  0  0    3    4
## Chrysler Imperial   14.7   8 440.0 230 3.23 5.345 17.42  0  0    3    4
## Dodge Challenger    15.5   8 318.0 150 2.76 3.520 16.87  0  0    3    2
## AMC Javelin         15.2   8 304.0 150 3.15 3.435 17.30  0  0    3    2
## Camaro Z28          13.3   8 350.0 245 3.73 3.840 15.41  0  0    3    4
## Pontiac Firebird    19.2   8 400.0 175 3.08 3.845 17.05  0  0    3    2
## Ford Pantera L      15.8   8 351.0 264 4.22 3.170 14.50  0  1    5    4
## Maserati Bora       15.0   8 301.0 335 3.54 3.570 14.60  0  1    5    8</code></pre>
<div class="sourceCode" id="cb306"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb306-1"><a href="ggplot2-60-minutos.html#cb306-1" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span></span>
<span id="cb306-2"><a href="ggplot2-60-minutos.html#cb306-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">split</span>(.<span class="sc">$</span>cyl) <span class="sc">%&gt;%</span></span>
<span id="cb306-3"><a href="ggplot2-60-minutos.html#cb306-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="sc">~</span> <span class="fu">lm</span>(mpg <span class="sc">~</span> wt, <span class="at">data =</span> .x)) </span></code></pre></div>
<pre><code>## $`4`
## 
## Call:
## lm(formula = mpg ~ wt, data = .x)
## 
## Coefficients:
## (Intercept)           wt  
##      39.571       -5.647  
## 
## 
## $`6`
## 
## Call:
## lm(formula = mpg ~ wt, data = .x)
## 
## Coefficients:
## (Intercept)           wt  
##       28.41        -2.78  
## 
## 
## $`8`
## 
## Call:
## lm(formula = mpg ~ wt, data = .x)
## 
## Coefficients:
## (Intercept)           wt  
##      23.868       -2.192</code></pre>
<div class="sourceCode" id="cb308"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb308-1"><a href="ggplot2-60-minutos.html#cb308-1" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span></span>
<span id="cb308-2"><a href="ggplot2-60-minutos.html#cb308-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">split</span>(.<span class="sc">$</span>cyl) <span class="sc">%&gt;%</span></span>
<span id="cb308-3"><a href="ggplot2-60-minutos.html#cb308-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="sc">~</span> <span class="fu">lm</span>(mpg <span class="sc">~</span> wt, <span class="at">data =</span> .x)) <span class="sc">%&gt;%</span></span>
<span id="cb308-4"><a href="ggplot2-60-minutos.html#cb308-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(summary) </span></code></pre></div>
<pre><code>## $`4`
## 
## Call:
## lm(formula = mpg ~ wt, data = .x)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -4.1513 -1.9795 -0.6272  1.9299  5.2523 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)   39.571      4.347   9.104 7.77e-06 ***
## wt            -5.647      1.850  -3.052   0.0137 *  
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 3.332 on 9 degrees of freedom
## Multiple R-squared:  0.5086, Adjusted R-squared:  0.454 
## F-statistic: 9.316 on 1 and 9 DF,  p-value: 0.01374
## 
## 
## $`6`
## 
## Call:
## lm(formula = mpg ~ wt, data = .x)
## 
## Residuals:
##      Mazda RX4  Mazda RX4 Wag Hornet 4 Drive        Valiant       Merc 280 
##        -0.1250         0.5840         1.9292        -0.6897         0.3547 
##      Merc 280C   Ferrari Dino 
##        -1.0453        -1.0080 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)   
## (Intercept)   28.409      4.184   6.789  0.00105 **
## wt            -2.780      1.335  -2.083  0.09176 . 
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 1.165 on 5 degrees of freedom
## Multiple R-squared:  0.4645, Adjusted R-squared:  0.3574 
## F-statistic: 4.337 on 1 and 5 DF,  p-value: 0.09176
## 
## 
## $`8`
## 
## Call:
## lm(formula = mpg ~ wt, data = .x)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -2.1491 -1.4664 -0.8458  1.5711  3.7619 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  23.8680     3.0055   7.942 4.05e-06 ***
## wt           -2.1924     0.7392  -2.966   0.0118 *  
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 2.024 on 12 degrees of freedom
## Multiple R-squared:  0.423,  Adjusted R-squared:  0.3749 
## F-statistic: 8.796 on 1 and 12 DF,  p-value: 0.01179</code></pre>
<div class="sourceCode" id="cb310"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb310-1"><a href="ggplot2-60-minutos.html#cb310-1" aria-hidden="true" tabindex="-1"></a><span class="co"># original  </span></span>
<span id="cb310-2"><a href="ggplot2-60-minutos.html#cb310-2" aria-hidden="true" tabindex="-1"></a>  mtcars <span class="sc">%&gt;%</span></span>
<span id="cb310-3"><a href="ggplot2-60-minutos.html#cb310-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">split</span>(.<span class="sc">$</span>cyl) <span class="sc">%&gt;%</span></span>
<span id="cb310-4"><a href="ggplot2-60-minutos.html#cb310-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="sc">~</span> <span class="fu">lm</span>(mpg <span class="sc">~</span> wt, <span class="at">data =</span> .x)) <span class="sc">%&gt;%</span></span>
<span id="cb310-5"><a href="ggplot2-60-minutos.html#cb310-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(summary) <span class="sc">%&gt;%</span></span>
<span id="cb310-6"><a href="ggplot2-60-minutos.html#cb310-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_dbl</span>(<span class="st">&quot;r.squared&quot;</span>)</span></code></pre></div>
<pre><code>##         4         6         8 
## 0.5086326 0.4645102 0.4229655</code></pre>
<div class="sourceCode" id="cb312"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb312-1"><a href="ggplot2-60-minutos.html#cb312-1" aria-hidden="true" tabindex="-1"></a><span class="co"># If each element of the output is a data frame, use</span></span>
<span id="cb312-2"><a href="ggplot2-60-minutos.html#cb312-2" aria-hidden="true" tabindex="-1"></a><span class="co"># map_dfr to row-bind them together:</span></span>
<span id="cb312-3"><a href="ggplot2-60-minutos.html#cb312-3" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span></span>
<span id="cb312-4"><a href="ggplot2-60-minutos.html#cb312-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">split</span>(.<span class="sc">$</span>cyl) <span class="sc">%&gt;%</span></span>
<span id="cb312-5"><a href="ggplot2-60-minutos.html#cb312-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="sc">~</span> <span class="fu">lm</span>(mpg <span class="sc">~</span> wt, <span class="at">data =</span> .x)) <span class="sc">%&gt;%</span></span>
<span id="cb312-6"><a href="ggplot2-60-minutos.html#cb312-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_dfr</span>(<span class="sc">~</span> <span class="fu">as.data.frame</span>(<span class="fu">t</span>(<span class="fu">as.matrix</span>(<span class="fu">coef</span>(.)))))</span></code></pre></div>
<pre><code>##   (Intercept)        wt
## 1    39.57120 -5.647025
## 2    28.40884 -2.780106
## 3    23.86803 -2.192438</code></pre>
<div class="sourceCode" id="cb314"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb314-1"><a href="ggplot2-60-minutos.html#cb314-1" aria-hidden="true" tabindex="-1"></a><span class="co"># (if you also want to preserve the variable names see</span></span>
<span id="cb314-2"><a href="ggplot2-60-minutos.html#cb314-2" aria-hidden="true" tabindex="-1"></a><span class="co"># the broom package)</span></span>
<span id="cb314-3"><a href="ggplot2-60-minutos.html#cb314-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb314-4"><a href="ggplot2-60-minutos.html#cb314-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb314-5"><a href="ggplot2-60-minutos.html#cb314-5" aria-hidden="true" tabindex="-1"></a><span class="co">#nest, unest() estudar!</span></span>
<span id="cb314-6"><a href="ggplot2-60-minutos.html#cb314-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb314-7"><a href="ggplot2-60-minutos.html#cb314-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb314-8"><a href="ggplot2-60-minutos.html#cb314-8" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span> </span>
<span id="cb314-9"><a href="ggplot2-60-minutos.html#cb314-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(cyl) <span class="sc">%&gt;%</span> </span>
<span id="cb314-10"><a href="ggplot2-60-minutos.html#cb314-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>()</span></code></pre></div>
<pre><code>## # A tibble: 3 × 2
## # Groups:   cyl [3]
##     cyl data              
##   &lt;dbl&gt; &lt;list&gt;            
## 1     6 &lt;tibble [7 × 10]&gt; 
## 2     4 &lt;tibble [11 × 10]&gt;
## 3     8 &lt;tibble [14 × 10]&gt;</code></pre>
<div class="sourceCode" id="cb316"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb316-1"><a href="ggplot2-60-minutos.html#cb316-1" aria-hidden="true" tabindex="-1"></a><span class="co">#mtcars %&gt;% </span></span>
<span id="cb316-2"><a href="ggplot2-60-minutos.html#cb316-2" aria-hidden="true" tabindex="-1"></a><span class="co">#  group_by(cyl) %&gt;% </span></span>
<span id="cb316-3"><a href="ggplot2-60-minutos.html#cb316-3" aria-hidden="true" tabindex="-1"></a><span class="co">#  nest() %&gt;%</span></span>
<span id="cb316-4"><a href="ggplot2-60-minutos.html#cb316-4" aria-hidden="true" tabindex="-1"></a><span class="co">#  map(~ lm(mpg ~ wt, data = .x)) </span></span></code></pre></div>
</div>
<div id="map-functions-1" class="section level2 hasAnchor" number="3.21">
<h2><span class="header-section-number">3.21</span> map functions<a href="ggplot2-60-minutos.html#map-functions-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb317"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb317-1"><a href="ggplot2-60-minutos.html#cb317-1" aria-hidden="true" tabindex="-1"></a><span class="fu">example</span>(<span class="st">&quot;map&quot;</span>)</span>
<span id="cb317-2"><a href="ggplot2-60-minutos.html#cb317-2" aria-hidden="true" tabindex="-1"></a><span class="fu">example</span>(<span class="st">&quot;map_at&quot;</span>)</span>
<span id="cb317-3"><a href="ggplot2-60-minutos.html#cb317-3" aria-hidden="true" tabindex="-1"></a><span class="fu">example</span>(<span class="st">&quot;map_chr&quot;</span>)</span>
<span id="cb317-4"><a href="ggplot2-60-minutos.html#cb317-4" aria-hidden="true" tabindex="-1"></a><span class="fu">example</span>(<span class="st">&quot;map_dbl&quot;</span>)</span>
<span id="cb317-5"><a href="ggplot2-60-minutos.html#cb317-5" aria-hidden="true" tabindex="-1"></a><span class="fu">example</span>(<span class="st">&quot;map_df&quot;</span>)</span>
<span id="cb317-6"><a href="ggplot2-60-minutos.html#cb317-6" aria-hidden="true" tabindex="-1"></a><span class="fu">example</span>(<span class="st">&quot;map_dfc&quot;</span>)</span>
<span id="cb317-7"><a href="ggplot2-60-minutos.html#cb317-7" aria-hidden="true" tabindex="-1"></a><span class="fu">example</span>(<span class="st">&quot;map_dfr&quot;</span>)</span>
<span id="cb317-8"><a href="ggplot2-60-minutos.html#cb317-8" aria-hidden="true" tabindex="-1"></a><span class="fu">example</span>(<span class="st">&quot;map_int&quot;</span>)</span>
<span id="cb317-9"><a href="ggplot2-60-minutos.html#cb317-9" aria-hidden="true" tabindex="-1"></a><span class="fu">example</span>(<span class="st">&quot;map_lgl&quot;</span>)</span>
<span id="cb317-10"><a href="ggplot2-60-minutos.html#cb317-10" aria-hidden="true" tabindex="-1"></a><span class="fu">example</span>(<span class="st">&quot;map_vec&quot;</span>)</span></code></pre></div>
</div>
<div id="map2-functions-1" class="section level2 hasAnchor" number="3.22">
<h2><span class="header-section-number">3.22</span> map2 functions<a href="ggplot2-60-minutos.html#map2-functions-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb318"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb318-1"><a href="ggplot2-60-minutos.html#cb318-1" aria-hidden="true" tabindex="-1"></a><span class="fu">example</span>(<span class="st">&quot;map2&quot;</span>)</span>
<span id="cb318-2"><a href="ggplot2-60-minutos.html#cb318-2" aria-hidden="true" tabindex="-1"></a><span class="fu">example</span>(<span class="st">&quot;map2_chr&quot;</span>)</span>
<span id="cb318-3"><a href="ggplot2-60-minutos.html#cb318-3" aria-hidden="true" tabindex="-1"></a><span class="fu">example</span>(<span class="st">&quot;map2_dbl&quot;</span>)</span>
<span id="cb318-4"><a href="ggplot2-60-minutos.html#cb318-4" aria-hidden="true" tabindex="-1"></a><span class="fu">example</span>(<span class="st">&quot;map2_df&quot;</span>)</span>
<span id="cb318-5"><a href="ggplot2-60-minutos.html#cb318-5" aria-hidden="true" tabindex="-1"></a><span class="fu">example</span>(<span class="st">&quot;map2_dfc&quot;</span>)</span>
<span id="cb318-6"><a href="ggplot2-60-minutos.html#cb318-6" aria-hidden="true" tabindex="-1"></a><span class="fu">example</span>(<span class="st">&quot;map2_dfr&quot;</span>)</span>
<span id="cb318-7"><a href="ggplot2-60-minutos.html#cb318-7" aria-hidden="true" tabindex="-1"></a><span class="fu">example</span>(<span class="st">&quot;map2_int&quot;</span>)</span>
<span id="cb318-8"><a href="ggplot2-60-minutos.html#cb318-8" aria-hidden="true" tabindex="-1"></a><span class="fu">example</span>(<span class="st">&quot;map2_lgl&quot;</span>)</span>
<span id="cb318-9"><a href="ggplot2-60-minutos.html#cb318-9" aria-hidden="true" tabindex="-1"></a><span class="fu">example</span>(<span class="st">&quot;map2_raw&quot;</span>)</span>
<span id="cb318-10"><a href="ggplot2-60-minutos.html#cb318-10" aria-hidden="true" tabindex="-1"></a><span class="fu">example</span>(<span class="st">&quot;map2_vec&quot;</span>)</span></code></pre></div>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<blockquote>
<p>921c9f1d4aaaee5d965c09e5d0d58cdfc6baba3f</p>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>
</blockquote>

<p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
# tidyr</p>
<p>More details in <a href="https://tidyr.tidyverse.org/articles/nest.html">https://tidyr.tidyverse.org/articles/nest.html</a></p>
</div>
<div id="nest" class="section level2 hasAnchor" number="3.23">
<h2><span class="header-section-number">3.23</span> nest()<a href="ggplot2-60-minutos.html#nest" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb319"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb319-1"><a href="ggplot2-60-minutos.html#cb319-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb319-2"><a href="ggplot2-60-minutos.html#cb319-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb319-3"><a href="ggplot2-60-minutos.html#cb319-3" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span> </span>
<span id="cb319-4"><a href="ggplot2-60-minutos.html#cb319-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(cyl) <span class="sc">%&gt;%</span> </span>
<span id="cb319-5"><a href="ggplot2-60-minutos.html#cb319-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>() </span></code></pre></div>
<pre><code>## # A tibble: 3 × 2
## # Groups:   cyl [3]
##     cyl data              
##   &lt;dbl&gt; &lt;list&gt;            
## 1     6 &lt;tibble [7 × 10]&gt; 
## 2     4 &lt;tibble [11 × 10]&gt;
## 3     8 &lt;tibble [14 × 10]&gt;</code></pre>
<div class="sourceCode" id="cb321"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb321-1"><a href="ggplot2-60-minutos.html#cb321-1" aria-hidden="true" tabindex="-1"></a>um<span class="ot">&lt;-</span> mtcars <span class="sc">%&gt;%</span> </span>
<span id="cb321-2"><a href="ggplot2-60-minutos.html#cb321-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(cyl) <span class="sc">%&gt;%</span> </span>
<span id="cb321-3"><a href="ggplot2-60-minutos.html#cb321-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span></span>
<span id="cb321-4"><a href="ggplot2-60-minutos.html#cb321-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb321-5"><a href="ggplot2-60-minutos.html#cb321-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">linMod =</span> <span class="fu">map</span>(data, <span class="sc">~</span><span class="fu">lm</span>(mpg <span class="sc">~</span> wt, <span class="at">data =</span> .)),</span>
<span id="cb321-6"><a href="ggplot2-60-minutos.html#cb321-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">coeffs =</span> <span class="fu">map</span>(linMod, coefficients),</span>
<span id="cb321-7"><a href="ggplot2-60-minutos.html#cb321-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">slope =</span> <span class="fu">map_dbl</span>(coeffs, <span class="dv">2</span>))</span>
<span id="cb321-8"><a href="ggplot2-60-minutos.html#cb321-8" aria-hidden="true" tabindex="-1"></a>um</span></code></pre></div>
<pre><code>## # A tibble: 3 × 5
## # Groups:   cyl [3]
##     cyl data               linMod coeffs    slope
##   &lt;dbl&gt; &lt;list&gt;             &lt;list&gt; &lt;list&gt;    &lt;dbl&gt;
## 1     6 &lt;tibble [7 × 10]&gt;  &lt;lm&gt;   &lt;dbl [2]&gt; -2.78
## 2     4 &lt;tibble [11 × 10]&gt; &lt;lm&gt;   &lt;dbl [2]&gt; -5.65
## 3     8 &lt;tibble [14 × 10]&gt; &lt;lm&gt;   &lt;dbl [2]&gt; -2.19</code></pre>
<div class="sourceCode" id="cb323"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb323-1"><a href="ggplot2-60-minutos.html#cb323-1" aria-hidden="true" tabindex="-1"></a>um<span class="sc">$</span>linMod</span></code></pre></div>
<pre><code>## [[1]]
## 
## Call:
## lm(formula = mpg ~ wt, data = .)
## 
## Coefficients:
## (Intercept)           wt  
##       28.41        -2.78  
## 
## 
## [[2]]
## 
## Call:
## lm(formula = mpg ~ wt, data = .)
## 
## Coefficients:
## (Intercept)           wt  
##      39.571       -5.647  
## 
## 
## [[3]]
## 
## Call:
## lm(formula = mpg ~ wt, data = .)
## 
## Coefficients:
## (Intercept)           wt  
##      23.868       -2.192</code></pre>
<div class="sourceCode" id="cb325"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb325-1"><a href="ggplot2-60-minutos.html#cb325-1" aria-hidden="true" tabindex="-1"></a>um<span class="sc">$</span>coeffs</span></code></pre></div>
<pre><code>## [[1]]
## (Intercept)          wt 
##   28.408845   -2.780106 
## 
## [[2]]
## (Intercept)          wt 
##   39.571196   -5.647025 
## 
## [[3]]
## (Intercept)          wt 
##   23.868029   -2.192438</code></pre>
<div class="sourceCode" id="cb327"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb327-1"><a href="ggplot2-60-minutos.html#cb327-1" aria-hidden="true" tabindex="-1"></a>um<span class="sc">$</span>slope</span></code></pre></div>
<pre><code>## [1] -2.780106 -5.647025 -2.192438</code></pre>
<div class="sourceCode" id="cb329"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb329-1"><a href="ggplot2-60-minutos.html#cb329-1" aria-hidden="true" tabindex="-1"></a>um<span class="sc">$</span>linMod[[<span class="dv">1</span>]]</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = mpg ~ wt, data = .)
## 
## Coefficients:
## (Intercept)           wt  
##       28.41        -2.78</code></pre>
<div class="sourceCode" id="cb331"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb331-1"><a href="ggplot2-60-minutos.html#cb331-1" aria-hidden="true" tabindex="-1"></a>dois<span class="ot">&lt;-</span> mtcars <span class="sc">%&gt;%</span> </span>
<span id="cb331-2"><a href="ggplot2-60-minutos.html#cb331-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(cyl) <span class="sc">%&gt;%</span> </span>
<span id="cb331-3"><a href="ggplot2-60-minutos.html#cb331-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb331-4"><a href="ggplot2-60-minutos.html#cb331-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">model =</span> <span class="fu">map</span>(data, <span class="cf">function</span>(df) <span class="fu">lm</span>(mpg <span class="sc">~</span> wt, <span class="at">data =</span> df)))</span>
<span id="cb331-5"><a href="ggplot2-60-minutos.html#cb331-5" aria-hidden="true" tabindex="-1"></a>dois</span></code></pre></div>
<pre><code>## # A tibble: 3 × 3
## # Groups:   cyl [3]
##     cyl data               model 
##   &lt;dbl&gt; &lt;list&gt;             &lt;list&gt;
## 1     6 &lt;tibble [7 × 10]&gt;  &lt;lm&gt;  
## 2     4 &lt;tibble [11 × 10]&gt; &lt;lm&gt;  
## 3     8 &lt;tibble [14 × 10]&gt; &lt;lm&gt;</code></pre>
<div class="sourceCode" id="cb333"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb333-1"><a href="ggplot2-60-minutos.html#cb333-1" aria-hidden="true" tabindex="-1"></a>dois<span class="sc">$</span>cyl</span></code></pre></div>
<pre><code>## [1] 6 4 8</code></pre>
<div class="sourceCode" id="cb335"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb335-1"><a href="ggplot2-60-minutos.html#cb335-1" aria-hidden="true" tabindex="-1"></a>dois<span class="sc">$</span>data</span></code></pre></div>
<pre><code>## [[1]]
## # A tibble: 7 × 10
##     mpg  disp    hp  drat    wt  qsec    vs    am  gear  carb
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1  21    160    110  3.9   2.62  16.5     0     1     4     4
## 2  21    160    110  3.9   2.88  17.0     0     1     4     4
## 3  21.4  258    110  3.08  3.22  19.4     1     0     3     1
## 4  18.1  225    105  2.76  3.46  20.2     1     0     3     1
## 5  19.2  168.   123  3.92  3.44  18.3     1     0     4     4
## 6  17.8  168.   123  3.92  3.44  18.9     1     0     4     4
## 7  19.7  145    175  3.62  2.77  15.5     0     1     5     6
## 
## [[2]]
## # A tibble: 11 × 10
##      mpg  disp    hp  drat    wt  qsec    vs    am  gear  carb
##    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1  22.8 108      93  3.85  2.32  18.6     1     1     4     1
##  2  24.4 147.     62  3.69  3.19  20       1     0     4     2
##  3  22.8 141.     95  3.92  3.15  22.9     1     0     4     2
##  4  32.4  78.7    66  4.08  2.2   19.5     1     1     4     1
##  5  30.4  75.7    52  4.93  1.62  18.5     1     1     4     2
##  6  33.9  71.1    65  4.22  1.84  19.9     1     1     4     1
##  7  21.5 120.     97  3.7   2.46  20.0     1     0     3     1
##  8  27.3  79      66  4.08  1.94  18.9     1     1     4     1
##  9  26   120.     91  4.43  2.14  16.7     0     1     5     2
## 10  30.4  95.1   113  3.77  1.51  16.9     1     1     5     2
## 11  21.4 121     109  4.11  2.78  18.6     1     1     4     2
## 
## [[3]]
## # A tibble: 14 × 10
##      mpg  disp    hp  drat    wt  qsec    vs    am  gear  carb
##    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1  18.7  360    175  3.15  3.44  17.0     0     0     3     2
##  2  14.3  360    245  3.21  3.57  15.8     0     0     3     4
##  3  16.4  276.   180  3.07  4.07  17.4     0     0     3     3
##  4  17.3  276.   180  3.07  3.73  17.6     0     0     3     3
##  5  15.2  276.   180  3.07  3.78  18       0     0     3     3
##  6  10.4  472    205  2.93  5.25  18.0     0     0     3     4
##  7  10.4  460    215  3     5.42  17.8     0     0     3     4
##  8  14.7  440    230  3.23  5.34  17.4     0     0     3     4
##  9  15.5  318    150  2.76  3.52  16.9     0     0     3     2
## 10  15.2  304    150  3.15  3.44  17.3     0     0     3     2
## 11  13.3  350    245  3.73  3.84  15.4     0     0     3     4
## 12  19.2  400    175  3.08  3.84  17.0     0     0     3     2
## 13  15.8  351    264  4.22  3.17  14.5     0     1     5     4
## 14  15    301    335  3.54  3.57  14.6     0     1     5     8</code></pre>
<div class="sourceCode" id="cb337"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb337-1"><a href="ggplot2-60-minutos.html#cb337-1" aria-hidden="true" tabindex="-1"></a>dois<span class="sc">$</span>model</span></code></pre></div>
<pre><code>## [[1]]
## 
## Call:
## lm(formula = mpg ~ wt, data = df)
## 
## Coefficients:
## (Intercept)           wt  
##       28.41        -2.78  
## 
## 
## [[2]]
## 
## Call:
## lm(formula = mpg ~ wt, data = df)
## 
## Coefficients:
## (Intercept)           wt  
##      39.571       -5.647  
## 
## 
## [[3]]
## 
## Call:
## lm(formula = mpg ~ wt, data = df)
## 
## Coefficients:
## (Intercept)           wt  
##      23.868       -2.192</code></pre>
<div class="sourceCode" id="cb339"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb339-1"><a href="ggplot2-60-minutos.html#cb339-1" aria-hidden="true" tabindex="-1"></a>dois<span class="sc">$</span>model[[<span class="dv">3</span>]]</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = mpg ~ wt, data = df)
## 
## Coefficients:
## (Intercept)           wt  
##      23.868       -2.192</code></pre>
<div class="sourceCode" id="cb341"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb341-1"><a href="ggplot2-60-minutos.html#cb341-1" aria-hidden="true" tabindex="-1"></a>tres<span class="ot">&lt;-</span> dois <span class="sc">%&gt;%</span> </span>
<span id="cb341-2"><a href="ggplot2-60-minutos.html#cb341-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">model =</span> <span class="fu">map</span>(model, predict))</span>
<span id="cb341-3"><a href="ggplot2-60-minutos.html#cb341-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb341-4"><a href="ggplot2-60-minutos.html#cb341-4" aria-hidden="true" tabindex="-1"></a>tres</span></code></pre></div>
<pre><code>## # A tibble: 3 × 3
## # Groups:   cyl [3]
##     cyl data               model     
##   &lt;dbl&gt; &lt;list&gt;             &lt;list&gt;    
## 1     6 &lt;tibble [7 × 10]&gt;  &lt;dbl [7]&gt; 
## 2     4 &lt;tibble [11 × 10]&gt; &lt;dbl [11]&gt;
## 3     8 &lt;tibble [14 × 10]&gt; &lt;dbl [14]&gt;</code></pre>
<div class="sourceCode" id="cb343"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb343-1"><a href="ggplot2-60-minutos.html#cb343-1" aria-hidden="true" tabindex="-1"></a>tres<span class="sc">$</span>model</span></code></pre></div>
<pre><code>## [[1]]
##        1        2        3        4        5        6        7 
## 21.12497 20.41604 19.47080 18.78968 18.84528 18.84528 20.70795 
## 
## [[2]]
##        1        2        3        4        5        6        7        8 
## 26.47010 21.55719 21.78307 27.14774 30.45125 29.20890 25.65128 28.64420 
##        9       10       11 
## 27.48656 31.02725 23.87247 
## 
## [[3]]
##        1        2        3        4        5        6        7        8 
## 16.32604 16.04103 14.94481 15.69024 15.58061 12.35773 11.97625 12.14945 
##        9       10       11       12       13       14 
## 16.15065 16.33700 15.44907 15.43811 16.91800 16.04103</code></pre>
<div class="sourceCode" id="cb345"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb345-1"><a href="ggplot2-60-minutos.html#cb345-1" aria-hidden="true" tabindex="-1"></a>tres<span class="sc">$</span>model[[<span class="dv">3</span>]]</span></code></pre></div>
<pre><code>##        1        2        3        4        5        6        7        8 
## 16.32604 16.04103 14.94481 15.69024 15.58061 12.35773 11.97625 12.14945 
##        9       10       11       12       13       14 
## 16.15065 16.33700 15.44907 15.43811 16.91800 16.04103</code></pre>
</div>
<div id="unnest" class="section level2 hasAnchor" number="3.24">
<h2><span class="header-section-number">3.24</span> unnest()<a href="ggplot2-60-minutos.html#unnest" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb347"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb347-1"><a href="ggplot2-60-minutos.html#cb347-1" aria-hidden="true" tabindex="-1"></a>um <span class="sc">%&gt;%</span> </span>
<span id="cb347-2"><a href="ggplot2-60-minutos.html#cb347-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(data)</span></code></pre></div>
<pre><code>## # A tibble: 32 × 14
## # Groups:   cyl [3]
##      cyl   mpg  disp    hp  drat    wt  qsec    vs    am  gear  carb linMod
##    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;list&gt;
##  1     6  21    160    110  3.9   2.62  16.5     0     1     4     4 &lt;lm&gt;  
##  2     6  21    160    110  3.9   2.88  17.0     0     1     4     4 &lt;lm&gt;  
##  3     6  21.4  258    110  3.08  3.22  19.4     1     0     3     1 &lt;lm&gt;  
##  4     6  18.1  225    105  2.76  3.46  20.2     1     0     3     1 &lt;lm&gt;  
##  5     6  19.2  168.   123  3.92  3.44  18.3     1     0     4     4 &lt;lm&gt;  
##  6     6  17.8  168.   123  3.92  3.44  18.9     1     0     4     4 &lt;lm&gt;  
##  7     6  19.7  145    175  3.62  2.77  15.5     0     1     5     6 &lt;lm&gt;  
##  8     4  22.8  108     93  3.85  2.32  18.6     1     1     4     1 &lt;lm&gt;  
##  9     4  24.4  147.    62  3.69  3.19  20       1     0     4     2 &lt;lm&gt;  
## 10     4  22.8  141.    95  3.92  3.15  22.9     1     0     4     2 &lt;lm&gt;  
## # … with 22 more rows, and 2 more variables: coeffs &lt;list&gt;, slope &lt;dbl&gt;</code></pre>
</div>
<div id="exemplos-da-ajuda-do-r" class="section level2 hasAnchor" number="3.25">
<h2><span class="header-section-number">3.25</span> Exemplos da ajuda do R<a href="ggplot2-60-minutos.html#exemplos-da-ajuda-do-r" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb349"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb349-1"><a href="ggplot2-60-minutos.html#cb349-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">3</span>), </span>
<span id="cb349-2"><a href="ggplot2-60-minutos.html#cb349-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">y =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, </span>
<span id="cb349-3"><a href="ggplot2-60-minutos.html#cb349-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">z =</span> <span class="dv">6</span><span class="sc">:</span><span class="dv">1</span>)</span>
<span id="cb349-4"><a href="ggplot2-60-minutos.html#cb349-4" aria-hidden="true" tabindex="-1"></a>df</span></code></pre></div>
<pre><code>## # A tibble: 6 × 3
##       x     y     z
##   &lt;dbl&gt; &lt;int&gt; &lt;int&gt;
## 1     1     1     6
## 2     1     2     5
## 3     1     3     4
## 4     2     4     3
## 5     2     5     2
## 6     3     6     1</code></pre>
<div class="sourceCode" id="cb351"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb351-1"><a href="ggplot2-60-minutos.html#cb351-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Note that we get one row of output for each unique combination of</span></span>
<span id="cb351-2"><a href="ggplot2-60-minutos.html#cb351-2" aria-hidden="true" tabindex="-1"></a><span class="co"># non-nested variables</span></span>
<span id="cb351-3"><a href="ggplot2-60-minutos.html#cb351-3" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb351-4"><a href="ggplot2-60-minutos.html#cb351-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>(<span class="at">data =</span> <span class="fu">c</span>(y, z))</span></code></pre></div>
<pre><code>## # A tibble: 3 × 2
##       x data            
##   &lt;dbl&gt; &lt;list&gt;          
## 1     1 &lt;tibble [3 × 2]&gt;
## 2     2 &lt;tibble [2 × 2]&gt;
## 3     3 &lt;tibble [1 × 2]&gt;</code></pre>
<div class="sourceCode" id="cb353"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb353-1"><a href="ggplot2-60-minutos.html#cb353-1" aria-hidden="true" tabindex="-1"></a><span class="co"># chop does something similar, but retains individual columns</span></span>
<span id="cb353-2"><a href="ggplot2-60-minutos.html#cb353-2" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb353-3"><a href="ggplot2-60-minutos.html#cb353-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">chop</span>(<span class="fu">c</span>(y, z))</span></code></pre></div>
<pre><code>## # A tibble: 3 × 3
##       x           y           z
##   &lt;dbl&gt; &lt;list&lt;int&gt;&gt; &lt;list&lt;int&gt;&gt;
## 1     1         [3]         [3]
## 2     2         [2]         [2]
## 3     3         [1]         [1]</code></pre>
<div class="sourceCode" id="cb355"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb355-1"><a href="ggplot2-60-minutos.html#cb355-1" aria-hidden="true" tabindex="-1"></a><span class="co"># use tidyselect syntax and helpers, just like in dplyr::select()</span></span>
<span id="cb355-2"><a href="ggplot2-60-minutos.html#cb355-2" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb355-3"><a href="ggplot2-60-minutos.html#cb355-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>(<span class="at">data =</span> <span class="fu">any_of</span>(<span class="fu">c</span>(<span class="st">&quot;y&quot;</span>, <span class="st">&quot;z&quot;</span>)))</span></code></pre></div>
<pre><code>## # A tibble: 3 × 2
##       x data            
##   &lt;dbl&gt; &lt;list&gt;          
## 1     1 &lt;tibble [3 × 2]&gt;
## 2     2 &lt;tibble [2 × 2]&gt;
## 3     3 &lt;tibble [1 × 2]&gt;</code></pre>
<div class="sourceCode" id="cb357"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb357-1"><a href="ggplot2-60-minutos.html#cb357-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> </span>
<span id="cb357-2"><a href="ggplot2-60-minutos.html#cb357-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>(<span class="at">data =</span> <span class="sc">!</span>Species)</span></code></pre></div>
<pre><code>## # A tibble: 3 × 2
##   Species    data             
##   &lt;fct&gt;      &lt;list&gt;           
## 1 setosa     &lt;tibble [50 × 4]&gt;
## 2 versicolor &lt;tibble [50 × 4]&gt;
## 3 virginica  &lt;tibble [50 × 4]&gt;</code></pre>
<div class="sourceCode" id="cb359"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb359-1"><a href="ggplot2-60-minutos.html#cb359-1" aria-hidden="true" tabindex="-1"></a>nest_vars <span class="ot">&lt;-</span> <span class="fu">names</span>(iris)[<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>]</span>
<span id="cb359-2"><a href="ggplot2-60-minutos.html#cb359-2" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> </span>
<span id="cb359-3"><a href="ggplot2-60-minutos.html#cb359-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>(<span class="at">data =</span> <span class="fu">any_of</span>(nest_vars))</span></code></pre></div>
<pre><code>## # A tibble: 3 × 2
##   Species    data             
##   &lt;fct&gt;      &lt;list&gt;           
## 1 setosa     &lt;tibble [50 × 4]&gt;
## 2 versicolor &lt;tibble [50 × 4]&gt;
## 3 virginica  &lt;tibble [50 × 4]&gt;</code></pre>
<div class="sourceCode" id="cb361"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb361-1"><a href="ggplot2-60-minutos.html#cb361-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span></span>
<span id="cb361-2"><a href="ggplot2-60-minutos.html#cb361-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>(<span class="at">petal =</span> <span class="fu">starts_with</span>(<span class="st">&quot;Petal&quot;</span>), <span class="at">sepal =</span> <span class="fu">starts_with</span>(<span class="st">&quot;Sepal&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 3 × 3
##   Species    petal             sepal            
##   &lt;fct&gt;      &lt;list&gt;            &lt;list&gt;           
## 1 setosa     &lt;tibble [50 × 2]&gt; &lt;tibble [50 × 2]&gt;
## 2 versicolor &lt;tibble [50 × 2]&gt; &lt;tibble [50 × 2]&gt;
## 3 virginica  &lt;tibble [50 × 2]&gt; &lt;tibble [50 × 2]&gt;</code></pre>
<div class="sourceCode" id="cb363"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb363-1"><a href="ggplot2-60-minutos.html#cb363-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span></span>
<span id="cb363-2"><a href="ggplot2-60-minutos.html#cb363-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>(<span class="at">width =</span> <span class="fu">contains</span>(<span class="st">&quot;Width&quot;</span>), <span class="at">length =</span> <span class="fu">contains</span>(<span class="st">&quot;Length&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 3 × 3
##   Species    width             length           
##   &lt;fct&gt;      &lt;list&gt;            &lt;list&gt;           
## 1 setosa     &lt;tibble [50 × 2]&gt; &lt;tibble [50 × 2]&gt;
## 2 versicolor &lt;tibble [50 × 2]&gt; &lt;tibble [50 × 2]&gt;
## 3 virginica  &lt;tibble [50 × 2]&gt; &lt;tibble [50 × 2]&gt;</code></pre>
<div class="sourceCode" id="cb365"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb365-1"><a href="ggplot2-60-minutos.html#cb365-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Nesting a grouped data frame nests all variables apart from the group vars</span></span>
<span id="cb365-2"><a href="ggplot2-60-minutos.html#cb365-2" aria-hidden="true" tabindex="-1"></a>fish_encounters <span class="sc">%&gt;%</span></span>
<span id="cb365-3"><a href="ggplot2-60-minutos.html#cb365-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(fish) <span class="sc">%&gt;%</span></span>
<span id="cb365-4"><a href="ggplot2-60-minutos.html#cb365-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>()</span></code></pre></div>
<pre><code>## # A tibble: 19 × 2
## # Groups:   fish [19]
##    fish  data             
##    &lt;fct&gt; &lt;list&gt;           
##  1 4842  &lt;tibble [11 × 2]&gt;
##  2 4843  &lt;tibble [11 × 2]&gt;
##  3 4844  &lt;tibble [11 × 2]&gt;
##  4 4845  &lt;tibble [5 × 2]&gt; 
##  5 4847  &lt;tibble [3 × 2]&gt; 
##  6 4848  &lt;tibble [4 × 2]&gt; 
##  7 4849  &lt;tibble [2 × 2]&gt; 
##  8 4850  &lt;tibble [6 × 2]&gt; 
##  9 4851  &lt;tibble [2 × 2]&gt; 
## 10 4854  &lt;tibble [2 × 2]&gt; 
## 11 4855  &lt;tibble [5 × 2]&gt; 
## 12 4857  &lt;tibble [9 × 2]&gt; 
## 13 4858  &lt;tibble [11 × 2]&gt;
## 14 4859  &lt;tibble [5 × 2]&gt; 
## 15 4861  &lt;tibble [11 × 2]&gt;
## 16 4862  &lt;tibble [9 × 2]&gt; 
## 17 4863  &lt;tibble [2 × 2]&gt; 
## 18 4864  &lt;tibble [2 × 2]&gt; 
## 19 4865  &lt;tibble [3 × 2]&gt;</code></pre>
<div class="sourceCode" id="cb367"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb367-1"><a href="ggplot2-60-minutos.html#cb367-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Nesting is often useful for creating per group models</span></span>
<span id="cb367-2"><a href="ggplot2-60-minutos.html#cb367-2" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span></span>
<span id="cb367-3"><a href="ggplot2-60-minutos.html#cb367-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(cyl) <span class="sc">%&gt;%</span></span>
<span id="cb367-4"><a href="ggplot2-60-minutos.html#cb367-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span></span>
<span id="cb367-5"><a href="ggplot2-60-minutos.html#cb367-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">models =</span> <span class="fu">lapply</span>(data, <span class="cf">function</span>(df) <span class="fu">lm</span>(mpg <span class="sc">~</span> wt, <span class="at">data =</span> df)))</span></code></pre></div>
<pre><code>## # A tibble: 3 × 3
## # Groups:   cyl [3]
##     cyl data               models
##   &lt;dbl&gt; &lt;list&gt;             &lt;list&gt;
## 1     6 &lt;tibble [7 × 10]&gt;  &lt;lm&gt;  
## 2     4 &lt;tibble [11 × 10]&gt; &lt;lm&gt;  
## 3     8 &lt;tibble [14 × 10]&gt; &lt;lm&gt;</code></pre>
<div class="sourceCode" id="cb369"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb369-1"><a href="ggplot2-60-minutos.html#cb369-1" aria-hidden="true" tabindex="-1"></a><span class="co"># unnest() is primarily designed to work with lists of data frames</span></span>
<span id="cb369-2"><a href="ggplot2-60-minutos.html#cb369-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb369-3"><a href="ggplot2-60-minutos.html#cb369-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>,</span>
<span id="cb369-4"><a href="ggplot2-60-minutos.html#cb369-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="fu">list</span>(</span>
<span id="cb369-5"><a href="ggplot2-60-minutos.html#cb369-5" aria-hidden="true" tabindex="-1"></a>    <span class="cn">NULL</span>,</span>
<span id="cb369-6"><a href="ggplot2-60-minutos.html#cb369-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tibble</span>(<span class="at">a =</span> <span class="dv">1</span>, <span class="at">b =</span> <span class="dv">2</span>),</span>
<span id="cb369-7"><a href="ggplot2-60-minutos.html#cb369-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tibble</span>(<span class="at">a =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">b =</span> <span class="dv">3</span><span class="sc">:</span><span class="dv">1</span>)</span>
<span id="cb369-8"><a href="ggplot2-60-minutos.html#cb369-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb369-9"><a href="ggplot2-60-minutos.html#cb369-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb369-10"><a href="ggplot2-60-minutos.html#cb369-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb369-11"><a href="ggplot2-60-minutos.html#cb369-11" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb369-12"><a href="ggplot2-60-minutos.html#cb369-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(y)</span></code></pre></div>
<pre><code>## # A tibble: 4 × 3
##       x     a     b
##   &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1     2     1     2
## 2     3     1     3
## 3     3     2     2
## 4     3     3     1</code></pre>
<div class="sourceCode" id="cb371"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb371-1"><a href="ggplot2-60-minutos.html#cb371-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb371-2"><a href="ggplot2-60-minutos.html#cb371-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(y, <span class="at">keep_empty =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## # A tibble: 5 × 3
##       x     a     b
##   &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1     1    NA    NA
## 2     2     1     2
## 3     3     1     3
## 4     3     2     2
## 5     3     3     1</code></pre>
<div class="sourceCode" id="cb373"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb373-1"><a href="ggplot2-60-minutos.html#cb373-1" aria-hidden="true" tabindex="-1"></a><span class="co"># If you have lists of lists, or lists of atomic vectors, instead</span></span>
<span id="cb373-2"><a href="ggplot2-60-minutos.html#cb373-2" aria-hidden="true" tabindex="-1"></a><span class="co"># see hoist(), unnest_wider(), and unnest_longer()</span></span>
<span id="cb373-3"><a href="ggplot2-60-minutos.html#cb373-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb373-4"><a href="ggplot2-60-minutos.html#cb373-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; # You can unnest multiple columns simultaneously</span></span>
<span id="cb373-5"><a href="ggplot2-60-minutos.html#cb373-5" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb373-6"><a href="ggplot2-60-minutos.html#cb373-6" aria-hidden="true" tabindex="-1"></a> <span class="at">a =</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>), <span class="st">&quot;c&quot;</span>),</span>
<span id="cb373-7"><a href="ggplot2-60-minutos.html#cb373-7" aria-hidden="true" tabindex="-1"></a> <span class="at">b =</span> <span class="fu">list</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="dv">3</span>),</span>
<span id="cb373-8"><a href="ggplot2-60-minutos.html#cb373-8" aria-hidden="true" tabindex="-1"></a> <span class="at">c =</span> <span class="fu">c</span>(<span class="dv">11</span>, <span class="dv">22</span>)</span>
<span id="cb373-9"><a href="ggplot2-60-minutos.html#cb373-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb373-10"><a href="ggplot2-60-minutos.html#cb373-10" aria-hidden="true" tabindex="-1"></a>df</span></code></pre></div>
<pre><code>## # A tibble: 2 × 3
##   a         b             c
##   &lt;list&gt;    &lt;list&gt;    &lt;dbl&gt;
## 1 &lt;chr [2]&gt; &lt;int [2]&gt;    11
## 2 &lt;chr [1]&gt; &lt;dbl [1]&gt;    22</code></pre>
<div class="sourceCode" id="cb375"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb375-1"><a href="ggplot2-60-minutos.html#cb375-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb375-2"><a href="ggplot2-60-minutos.html#cb375-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(<span class="fu">c</span>(a, b))</span></code></pre></div>
<pre><code>## # A tibble: 3 × 3
##   a         b     c
##   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 a         1    11
## 2 b         2    11
## 3 c         3    22</code></pre>
<div class="sourceCode" id="cb377"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb377-1"><a href="ggplot2-60-minutos.html#cb377-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compare with unnesting one column at a time, which generates</span></span>
<span id="cb377-2"><a href="ggplot2-60-minutos.html#cb377-2" aria-hidden="true" tabindex="-1"></a><span class="co"># the Cartesian product</span></span>
<span id="cb377-3"><a href="ggplot2-60-minutos.html#cb377-3" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb377-4"><a href="ggplot2-60-minutos.html#cb377-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(a) <span class="sc">%&gt;%</span> </span>
<span id="cb377-5"><a href="ggplot2-60-minutos.html#cb377-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(b)</span></code></pre></div>
<pre><code>## # A tibble: 5 × 3
##   a         b     c
##   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 a         1    11
## 2 a         2    11
## 3 b         1    11
## 4 b         2    11
## 5 c         3    22</code></pre>
</div>
<div id="mais-detalhes" class="section level2 hasAnchor" number="3.26">
<h2><span class="header-section-number">3.26</span> Mais detalhes<a href="ggplot2-60-minutos.html#mais-detalhes" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="https://github.com/tidymodels/broom/blob/main/vignettes/broom_and_dplyr.Rmd">https://github.com/tidymodels/broom/blob/main/vignettes/broom_and_dplyr.Rmd</a></p>
<p>=======
# tidyr</p>
<p>More details in <a href="https://tidyr.tidyverse.org/articles/nest.html">https://tidyr.tidyverse.org/articles/nest.html</a></p>
</div>
<div id="nest-1" class="section level2 hasAnchor" number="3.27">
<h2><span class="header-section-number">3.27</span> nest()<a href="ggplot2-60-minutos.html#nest-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb379"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb379-1"><a href="ggplot2-60-minutos.html#cb379-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb379-2"><a href="ggplot2-60-minutos.html#cb379-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb379-3"><a href="ggplot2-60-minutos.html#cb379-3" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span> </span>
<span id="cb379-4"><a href="ggplot2-60-minutos.html#cb379-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(cyl) <span class="sc">%&gt;%</span> </span>
<span id="cb379-5"><a href="ggplot2-60-minutos.html#cb379-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>() </span></code></pre></div>
<pre><code>## # A tibble: 3 × 2
## # Groups:   cyl [3]
##     cyl data              
##   &lt;dbl&gt; &lt;list&gt;            
## 1     6 &lt;tibble [7 × 10]&gt; 
## 2     4 &lt;tibble [11 × 10]&gt;
## 3     8 &lt;tibble [14 × 10]&gt;</code></pre>
<div class="sourceCode" id="cb381"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb381-1"><a href="ggplot2-60-minutos.html#cb381-1" aria-hidden="true" tabindex="-1"></a>um<span class="ot">&lt;-</span> mtcars <span class="sc">%&gt;%</span> </span>
<span id="cb381-2"><a href="ggplot2-60-minutos.html#cb381-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(cyl) <span class="sc">%&gt;%</span> </span>
<span id="cb381-3"><a href="ggplot2-60-minutos.html#cb381-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span></span>
<span id="cb381-4"><a href="ggplot2-60-minutos.html#cb381-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb381-5"><a href="ggplot2-60-minutos.html#cb381-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">linMod =</span> <span class="fu">map</span>(data, <span class="sc">~</span><span class="fu">lm</span>(mpg <span class="sc">~</span> wt, <span class="at">data =</span> .)),</span>
<span id="cb381-6"><a href="ggplot2-60-minutos.html#cb381-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">coeffs =</span> <span class="fu">map</span>(linMod, coefficients),</span>
<span id="cb381-7"><a href="ggplot2-60-minutos.html#cb381-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">slope =</span> <span class="fu">map_dbl</span>(coeffs, <span class="dv">2</span>))</span>
<span id="cb381-8"><a href="ggplot2-60-minutos.html#cb381-8" aria-hidden="true" tabindex="-1"></a>um</span></code></pre></div>
<pre><code>## # A tibble: 3 × 5
## # Groups:   cyl [3]
##     cyl data               linMod coeffs    slope
##   &lt;dbl&gt; &lt;list&gt;             &lt;list&gt; &lt;list&gt;    &lt;dbl&gt;
## 1     6 &lt;tibble [7 × 10]&gt;  &lt;lm&gt;   &lt;dbl [2]&gt; -2.78
## 2     4 &lt;tibble [11 × 10]&gt; &lt;lm&gt;   &lt;dbl [2]&gt; -5.65
## 3     8 &lt;tibble [14 × 10]&gt; &lt;lm&gt;   &lt;dbl [2]&gt; -2.19</code></pre>
<div class="sourceCode" id="cb383"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb383-1"><a href="ggplot2-60-minutos.html#cb383-1" aria-hidden="true" tabindex="-1"></a>um<span class="sc">$</span>linMod</span></code></pre></div>
<pre><code>## [[1]]
## 
## Call:
## lm(formula = mpg ~ wt, data = .)
## 
## Coefficients:
## (Intercept)           wt  
##       28.41        -2.78  
## 
## 
## [[2]]
## 
## Call:
## lm(formula = mpg ~ wt, data = .)
## 
## Coefficients:
## (Intercept)           wt  
##      39.571       -5.647  
## 
## 
## [[3]]
## 
## Call:
## lm(formula = mpg ~ wt, data = .)
## 
## Coefficients:
## (Intercept)           wt  
##      23.868       -2.192</code></pre>
<div class="sourceCode" id="cb385"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb385-1"><a href="ggplot2-60-minutos.html#cb385-1" aria-hidden="true" tabindex="-1"></a>um<span class="sc">$</span>coeffs</span></code></pre></div>
<pre><code>## [[1]]
## (Intercept)          wt 
##   28.408845   -2.780106 
## 
## [[2]]
## (Intercept)          wt 
##   39.571196   -5.647025 
## 
## [[3]]
## (Intercept)          wt 
##   23.868029   -2.192438</code></pre>
<div class="sourceCode" id="cb387"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb387-1"><a href="ggplot2-60-minutos.html#cb387-1" aria-hidden="true" tabindex="-1"></a>um<span class="sc">$</span>slope</span></code></pre></div>
<pre><code>## [1] -2.780106 -5.647025 -2.192438</code></pre>
<div class="sourceCode" id="cb389"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb389-1"><a href="ggplot2-60-minutos.html#cb389-1" aria-hidden="true" tabindex="-1"></a>um<span class="sc">$</span>linMod[[<span class="dv">1</span>]]</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = mpg ~ wt, data = .)
## 
## Coefficients:
## (Intercept)           wt  
##       28.41        -2.78</code></pre>
<div class="sourceCode" id="cb391"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb391-1"><a href="ggplot2-60-minutos.html#cb391-1" aria-hidden="true" tabindex="-1"></a>dois<span class="ot">&lt;-</span> mtcars <span class="sc">%&gt;%</span> </span>
<span id="cb391-2"><a href="ggplot2-60-minutos.html#cb391-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(cyl) <span class="sc">%&gt;%</span> </span>
<span id="cb391-3"><a href="ggplot2-60-minutos.html#cb391-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb391-4"><a href="ggplot2-60-minutos.html#cb391-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">model =</span> <span class="fu">map</span>(data, <span class="cf">function</span>(df) <span class="fu">lm</span>(mpg <span class="sc">~</span> wt, <span class="at">data =</span> df)))</span>
<span id="cb391-5"><a href="ggplot2-60-minutos.html#cb391-5" aria-hidden="true" tabindex="-1"></a>dois</span></code></pre></div>
<pre><code>## # A tibble: 3 × 3
## # Groups:   cyl [3]
##     cyl data               model 
##   &lt;dbl&gt; &lt;list&gt;             &lt;list&gt;
## 1     6 &lt;tibble [7 × 10]&gt;  &lt;lm&gt;  
## 2     4 &lt;tibble [11 × 10]&gt; &lt;lm&gt;  
## 3     8 &lt;tibble [14 × 10]&gt; &lt;lm&gt;</code></pre>
<div class="sourceCode" id="cb393"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb393-1"><a href="ggplot2-60-minutos.html#cb393-1" aria-hidden="true" tabindex="-1"></a>dois<span class="sc">$</span>cyl</span></code></pre></div>
<pre><code>## [1] 6 4 8</code></pre>
<div class="sourceCode" id="cb395"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb395-1"><a href="ggplot2-60-minutos.html#cb395-1" aria-hidden="true" tabindex="-1"></a>dois<span class="sc">$</span>data</span></code></pre></div>
<pre><code>## [[1]]
## # A tibble: 7 × 10
##     mpg  disp    hp  drat    wt  qsec    vs    am  gear  carb
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1  21    160    110  3.9   2.62  16.5     0     1     4     4
## 2  21    160    110  3.9   2.88  17.0     0     1     4     4
## 3  21.4  258    110  3.08  3.22  19.4     1     0     3     1
## 4  18.1  225    105  2.76  3.46  20.2     1     0     3     1
## 5  19.2  168.   123  3.92  3.44  18.3     1     0     4     4
## 6  17.8  168.   123  3.92  3.44  18.9     1     0     4     4
## 7  19.7  145    175  3.62  2.77  15.5     0     1     5     6
## 
## [[2]]
## # A tibble: 11 × 10
##      mpg  disp    hp  drat    wt  qsec    vs    am  gear  carb
##    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1  22.8 108      93  3.85  2.32  18.6     1     1     4     1
##  2  24.4 147.     62  3.69  3.19  20       1     0     4     2
##  3  22.8 141.     95  3.92  3.15  22.9     1     0     4     2
##  4  32.4  78.7    66  4.08  2.2   19.5     1     1     4     1
##  5  30.4  75.7    52  4.93  1.62  18.5     1     1     4     2
##  6  33.9  71.1    65  4.22  1.84  19.9     1     1     4     1
##  7  21.5 120.     97  3.7   2.46  20.0     1     0     3     1
##  8  27.3  79      66  4.08  1.94  18.9     1     1     4     1
##  9  26   120.     91  4.43  2.14  16.7     0     1     5     2
## 10  30.4  95.1   113  3.77  1.51  16.9     1     1     5     2
## 11  21.4 121     109  4.11  2.78  18.6     1     1     4     2
## 
## [[3]]
## # A tibble: 14 × 10
##      mpg  disp    hp  drat    wt  qsec    vs    am  gear  carb
##    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1  18.7  360    175  3.15  3.44  17.0     0     0     3     2
##  2  14.3  360    245  3.21  3.57  15.8     0     0     3     4
##  3  16.4  276.   180  3.07  4.07  17.4     0     0     3     3
##  4  17.3  276.   180  3.07  3.73  17.6     0     0     3     3
##  5  15.2  276.   180  3.07  3.78  18       0     0     3     3
##  6  10.4  472    205  2.93  5.25  18.0     0     0     3     4
##  7  10.4  460    215  3     5.42  17.8     0     0     3     4
##  8  14.7  440    230  3.23  5.34  17.4     0     0     3     4
##  9  15.5  318    150  2.76  3.52  16.9     0     0     3     2
## 10  15.2  304    150  3.15  3.44  17.3     0     0     3     2
## 11  13.3  350    245  3.73  3.84  15.4     0     0     3     4
## 12  19.2  400    175  3.08  3.84  17.0     0     0     3     2
## 13  15.8  351    264  4.22  3.17  14.5     0     1     5     4
## 14  15    301    335  3.54  3.57  14.6     0     1     5     8</code></pre>
<div class="sourceCode" id="cb397"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb397-1"><a href="ggplot2-60-minutos.html#cb397-1" aria-hidden="true" tabindex="-1"></a>dois<span class="sc">$</span>model</span></code></pre></div>
<pre><code>## [[1]]
## 
## Call:
## lm(formula = mpg ~ wt, data = df)
## 
## Coefficients:
## (Intercept)           wt  
##       28.41        -2.78  
## 
## 
## [[2]]
## 
## Call:
## lm(formula = mpg ~ wt, data = df)
## 
## Coefficients:
## (Intercept)           wt  
##      39.571       -5.647  
## 
## 
## [[3]]
## 
## Call:
## lm(formula = mpg ~ wt, data = df)
## 
## Coefficients:
## (Intercept)           wt  
##      23.868       -2.192</code></pre>
<div class="sourceCode" id="cb399"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb399-1"><a href="ggplot2-60-minutos.html#cb399-1" aria-hidden="true" tabindex="-1"></a>dois<span class="sc">$</span>model[[<span class="dv">3</span>]]</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = mpg ~ wt, data = df)
## 
## Coefficients:
## (Intercept)           wt  
##      23.868       -2.192</code></pre>
<div class="sourceCode" id="cb401"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb401-1"><a href="ggplot2-60-minutos.html#cb401-1" aria-hidden="true" tabindex="-1"></a>tres<span class="ot">&lt;-</span> dois <span class="sc">%&gt;%</span> </span>
<span id="cb401-2"><a href="ggplot2-60-minutos.html#cb401-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">model =</span> <span class="fu">map</span>(model, predict))</span>
<span id="cb401-3"><a href="ggplot2-60-minutos.html#cb401-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb401-4"><a href="ggplot2-60-minutos.html#cb401-4" aria-hidden="true" tabindex="-1"></a>tres</span></code></pre></div>
<pre><code>## # A tibble: 3 × 3
## # Groups:   cyl [3]
##     cyl data               model     
##   &lt;dbl&gt; &lt;list&gt;             &lt;list&gt;    
## 1     6 &lt;tibble [7 × 10]&gt;  &lt;dbl [7]&gt; 
## 2     4 &lt;tibble [11 × 10]&gt; &lt;dbl [11]&gt;
## 3     8 &lt;tibble [14 × 10]&gt; &lt;dbl [14]&gt;</code></pre>
<div class="sourceCode" id="cb403"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb403-1"><a href="ggplot2-60-minutos.html#cb403-1" aria-hidden="true" tabindex="-1"></a>tres<span class="sc">$</span>model</span></code></pre></div>
<pre><code>## [[1]]
##        1        2        3        4        5        6        7 
## 21.12497 20.41604 19.47080 18.78968 18.84528 18.84528 20.70795 
## 
## [[2]]
##        1        2        3        4        5        6        7        8 
## 26.47010 21.55719 21.78307 27.14774 30.45125 29.20890 25.65128 28.64420 
##        9       10       11 
## 27.48656 31.02725 23.87247 
## 
## [[3]]
##        1        2        3        4        5        6        7        8 
## 16.32604 16.04103 14.94481 15.69024 15.58061 12.35773 11.97625 12.14945 
##        9       10       11       12       13       14 
## 16.15065 16.33700 15.44907 15.43811 16.91800 16.04103</code></pre>
<div class="sourceCode" id="cb405"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb405-1"><a href="ggplot2-60-minutos.html#cb405-1" aria-hidden="true" tabindex="-1"></a>tres<span class="sc">$</span>model[[<span class="dv">3</span>]]</span></code></pre></div>
<pre><code>##        1        2        3        4        5        6        7        8 
## 16.32604 16.04103 14.94481 15.69024 15.58061 12.35773 11.97625 12.14945 
##        9       10       11       12       13       14 
## 16.15065 16.33700 15.44907 15.43811 16.91800 16.04103</code></pre>
</div>
<div id="unnest-1" class="section level2 hasAnchor" number="3.28">
<h2><span class="header-section-number">3.28</span> unnest()<a href="ggplot2-60-minutos.html#unnest-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb407"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb407-1"><a href="ggplot2-60-minutos.html#cb407-1" aria-hidden="true" tabindex="-1"></a>um <span class="sc">%&gt;%</span> </span>
<span id="cb407-2"><a href="ggplot2-60-minutos.html#cb407-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(data)</span></code></pre></div>
<pre><code>## # A tibble: 32 × 14
## # Groups:   cyl [3]
##      cyl   mpg  disp    hp  drat    wt  qsec    vs    am  gear  carb linMod
##    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;list&gt;
##  1     6  21    160    110  3.9   2.62  16.5     0     1     4     4 &lt;lm&gt;  
##  2     6  21    160    110  3.9   2.88  17.0     0     1     4     4 &lt;lm&gt;  
##  3     6  21.4  258    110  3.08  3.22  19.4     1     0     3     1 &lt;lm&gt;  
##  4     6  18.1  225    105  2.76  3.46  20.2     1     0     3     1 &lt;lm&gt;  
##  5     6  19.2  168.   123  3.92  3.44  18.3     1     0     4     4 &lt;lm&gt;  
##  6     6  17.8  168.   123  3.92  3.44  18.9     1     0     4     4 &lt;lm&gt;  
##  7     6  19.7  145    175  3.62  2.77  15.5     0     1     5     6 &lt;lm&gt;  
##  8     4  22.8  108     93  3.85  2.32  18.6     1     1     4     1 &lt;lm&gt;  
##  9     4  24.4  147.    62  3.69  3.19  20       1     0     4     2 &lt;lm&gt;  
## 10     4  22.8  141.    95  3.92  3.15  22.9     1     0     4     2 &lt;lm&gt;  
## # … with 22 more rows, and 2 more variables: coeffs &lt;list&gt;, slope &lt;dbl&gt;</code></pre>
</div>
<div id="exemplos-da-ajuda-do-r-1" class="section level2 hasAnchor" number="3.29">
<h2><span class="header-section-number">3.29</span> Exemplos da ajuda do R<a href="ggplot2-60-minutos.html#exemplos-da-ajuda-do-r-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="sourceCode" id="cb409"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb409-1"><a href="ggplot2-60-minutos.html#cb409-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">3</span>), </span>
<span id="cb409-2"><a href="ggplot2-60-minutos.html#cb409-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">y =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, </span>
<span id="cb409-3"><a href="ggplot2-60-minutos.html#cb409-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">z =</span> <span class="dv">6</span><span class="sc">:</span><span class="dv">1</span>)</span>
<span id="cb409-4"><a href="ggplot2-60-minutos.html#cb409-4" aria-hidden="true" tabindex="-1"></a>df</span></code></pre></div>
<pre><code>## # A tibble: 6 × 3
##       x     y     z
##   &lt;dbl&gt; &lt;int&gt; &lt;int&gt;
## 1     1     1     6
## 2     1     2     5
## 3     1     3     4
## 4     2     4     3
## 5     2     5     2
## 6     3     6     1</code></pre>
<div class="sourceCode" id="cb411"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb411-1"><a href="ggplot2-60-minutos.html#cb411-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Note that we get one row of output for each unique combination of</span></span>
<span id="cb411-2"><a href="ggplot2-60-minutos.html#cb411-2" aria-hidden="true" tabindex="-1"></a><span class="co"># non-nested variables</span></span>
<span id="cb411-3"><a href="ggplot2-60-minutos.html#cb411-3" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb411-4"><a href="ggplot2-60-minutos.html#cb411-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>(<span class="at">data =</span> <span class="fu">c</span>(y, z))</span></code></pre></div>
<pre><code>## # A tibble: 3 × 2
##       x data            
##   &lt;dbl&gt; &lt;list&gt;          
## 1     1 &lt;tibble [3 × 2]&gt;
## 2     2 &lt;tibble [2 × 2]&gt;
## 3     3 &lt;tibble [1 × 2]&gt;</code></pre>
<div class="sourceCode" id="cb413"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb413-1"><a href="ggplot2-60-minutos.html#cb413-1" aria-hidden="true" tabindex="-1"></a><span class="co"># chop does something similar, but retains individual columns</span></span>
<span id="cb413-2"><a href="ggplot2-60-minutos.html#cb413-2" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb413-3"><a href="ggplot2-60-minutos.html#cb413-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">chop</span>(<span class="fu">c</span>(y, z))</span></code></pre></div>
<pre><code>## # A tibble: 3 × 3
##       x           y           z
##   &lt;dbl&gt; &lt;list&lt;int&gt;&gt; &lt;list&lt;int&gt;&gt;
## 1     1         [3]         [3]
## 2     2         [2]         [2]
## 3     3         [1]         [1]</code></pre>
<div class="sourceCode" id="cb415"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb415-1"><a href="ggplot2-60-minutos.html#cb415-1" aria-hidden="true" tabindex="-1"></a><span class="co"># use tidyselect syntax and helpers, just like in dplyr::select()</span></span>
<span id="cb415-2"><a href="ggplot2-60-minutos.html#cb415-2" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb415-3"><a href="ggplot2-60-minutos.html#cb415-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>(<span class="at">data =</span> <span class="fu">any_of</span>(<span class="fu">c</span>(<span class="st">&quot;y&quot;</span>, <span class="st">&quot;z&quot;</span>)))</span></code></pre></div>
<pre><code>## # A tibble: 3 × 2
##       x data            
##   &lt;dbl&gt; &lt;list&gt;          
## 1     1 &lt;tibble [3 × 2]&gt;
## 2     2 &lt;tibble [2 × 2]&gt;
## 3     3 &lt;tibble [1 × 2]&gt;</code></pre>
<div class="sourceCode" id="cb417"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb417-1"><a href="ggplot2-60-minutos.html#cb417-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> </span>
<span id="cb417-2"><a href="ggplot2-60-minutos.html#cb417-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>(<span class="at">data =</span> <span class="sc">!</span>Species)</span></code></pre></div>
<pre><code>## # A tibble: 3 × 2
##   Species    data             
##   &lt;fct&gt;      &lt;list&gt;           
## 1 setosa     &lt;tibble [50 × 4]&gt;
## 2 versicolor &lt;tibble [50 × 4]&gt;
## 3 virginica  &lt;tibble [50 × 4]&gt;</code></pre>
<div class="sourceCode" id="cb419"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb419-1"><a href="ggplot2-60-minutos.html#cb419-1" aria-hidden="true" tabindex="-1"></a>nest_vars <span class="ot">&lt;-</span> <span class="fu">names</span>(iris)[<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>]</span>
<span id="cb419-2"><a href="ggplot2-60-minutos.html#cb419-2" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span> </span>
<span id="cb419-3"><a href="ggplot2-60-minutos.html#cb419-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>(<span class="at">data =</span> <span class="fu">any_of</span>(nest_vars))</span></code></pre></div>
<pre><code>## # A tibble: 3 × 2
##   Species    data             
##   &lt;fct&gt;      &lt;list&gt;           
## 1 setosa     &lt;tibble [50 × 4]&gt;
## 2 versicolor &lt;tibble [50 × 4]&gt;
## 3 virginica  &lt;tibble [50 × 4]&gt;</code></pre>
<div class="sourceCode" id="cb421"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb421-1"><a href="ggplot2-60-minutos.html#cb421-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span></span>
<span id="cb421-2"><a href="ggplot2-60-minutos.html#cb421-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>(<span class="at">petal =</span> <span class="fu">starts_with</span>(<span class="st">&quot;Petal&quot;</span>), <span class="at">sepal =</span> <span class="fu">starts_with</span>(<span class="st">&quot;Sepal&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 3 × 3
##   Species    petal             sepal            
##   &lt;fct&gt;      &lt;list&gt;            &lt;list&gt;           
## 1 setosa     &lt;tibble [50 × 2]&gt; &lt;tibble [50 × 2]&gt;
## 2 versicolor &lt;tibble [50 × 2]&gt; &lt;tibble [50 × 2]&gt;
## 3 virginica  &lt;tibble [50 × 2]&gt; &lt;tibble [50 × 2]&gt;</code></pre>
<div class="sourceCode" id="cb423"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb423-1"><a href="ggplot2-60-minutos.html#cb423-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span></span>
<span id="cb423-2"><a href="ggplot2-60-minutos.html#cb423-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>(<span class="at">width =</span> <span class="fu">contains</span>(<span class="st">&quot;Width&quot;</span>), <span class="at">length =</span> <span class="fu">contains</span>(<span class="st">&quot;Length&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 3 × 3
##   Species    width             length           
##   &lt;fct&gt;      &lt;list&gt;            &lt;list&gt;           
## 1 setosa     &lt;tibble [50 × 2]&gt; &lt;tibble [50 × 2]&gt;
## 2 versicolor &lt;tibble [50 × 2]&gt; &lt;tibble [50 × 2]&gt;
## 3 virginica  &lt;tibble [50 × 2]&gt; &lt;tibble [50 × 2]&gt;</code></pre>
<div class="sourceCode" id="cb425"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb425-1"><a href="ggplot2-60-minutos.html#cb425-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Nesting a grouped data frame nests all variables apart from the group vars</span></span>
<span id="cb425-2"><a href="ggplot2-60-minutos.html#cb425-2" aria-hidden="true" tabindex="-1"></a>fish_encounters <span class="sc">%&gt;%</span></span>
<span id="cb425-3"><a href="ggplot2-60-minutos.html#cb425-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(fish) <span class="sc">%&gt;%</span></span>
<span id="cb425-4"><a href="ggplot2-60-minutos.html#cb425-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>()</span></code></pre></div>
<pre><code>## # A tibble: 19 × 2
## # Groups:   fish [19]
##    fish  data             
##    &lt;fct&gt; &lt;list&gt;           
##  1 4842  &lt;tibble [11 × 2]&gt;
##  2 4843  &lt;tibble [11 × 2]&gt;
##  3 4844  &lt;tibble [11 × 2]&gt;
##  4 4845  &lt;tibble [5 × 2]&gt; 
##  5 4847  &lt;tibble [3 × 2]&gt; 
##  6 4848  &lt;tibble [4 × 2]&gt; 
##  7 4849  &lt;tibble [2 × 2]&gt; 
##  8 4850  &lt;tibble [6 × 2]&gt; 
##  9 4851  &lt;tibble [2 × 2]&gt; 
## 10 4854  &lt;tibble [2 × 2]&gt; 
## 11 4855  &lt;tibble [5 × 2]&gt; 
## 12 4857  &lt;tibble [9 × 2]&gt; 
## 13 4858  &lt;tibble [11 × 2]&gt;
## 14 4859  &lt;tibble [5 × 2]&gt; 
## 15 4861  &lt;tibble [11 × 2]&gt;
## 16 4862  &lt;tibble [9 × 2]&gt; 
## 17 4863  &lt;tibble [2 × 2]&gt; 
## 18 4864  &lt;tibble [2 × 2]&gt; 
## 19 4865  &lt;tibble [3 × 2]&gt;</code></pre>
<div class="sourceCode" id="cb427"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb427-1"><a href="ggplot2-60-minutos.html#cb427-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Nesting is often useful for creating per group models</span></span>
<span id="cb427-2"><a href="ggplot2-60-minutos.html#cb427-2" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span></span>
<span id="cb427-3"><a href="ggplot2-60-minutos.html#cb427-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(cyl) <span class="sc">%&gt;%</span></span>
<span id="cb427-4"><a href="ggplot2-60-minutos.html#cb427-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span></span>
<span id="cb427-5"><a href="ggplot2-60-minutos.html#cb427-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">models =</span> <span class="fu">lapply</span>(data, <span class="cf">function</span>(df) <span class="fu">lm</span>(mpg <span class="sc">~</span> wt, <span class="at">data =</span> df)))</span></code></pre></div>
<pre><code>## # A tibble: 3 × 3
## # Groups:   cyl [3]
##     cyl data               models
##   &lt;dbl&gt; &lt;list&gt;             &lt;list&gt;
## 1     6 &lt;tibble [7 × 10]&gt;  &lt;lm&gt;  
## 2     4 &lt;tibble [11 × 10]&gt; &lt;lm&gt;  
## 3     8 &lt;tibble [14 × 10]&gt; &lt;lm&gt;</code></pre>
<div class="sourceCode" id="cb429"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb429-1"><a href="ggplot2-60-minutos.html#cb429-1" aria-hidden="true" tabindex="-1"></a><span class="co"># unnest() is primarily designed to work with lists of data frames</span></span>
<span id="cb429-2"><a href="ggplot2-60-minutos.html#cb429-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb429-3"><a href="ggplot2-60-minutos.html#cb429-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>,</span>
<span id="cb429-4"><a href="ggplot2-60-minutos.html#cb429-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="fu">list</span>(</span>
<span id="cb429-5"><a href="ggplot2-60-minutos.html#cb429-5" aria-hidden="true" tabindex="-1"></a>    <span class="cn">NULL</span>,</span>
<span id="cb429-6"><a href="ggplot2-60-minutos.html#cb429-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tibble</span>(<span class="at">a =</span> <span class="dv">1</span>, <span class="at">b =</span> <span class="dv">2</span>),</span>
<span id="cb429-7"><a href="ggplot2-60-minutos.html#cb429-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">tibble</span>(<span class="at">a =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">b =</span> <span class="dv">3</span><span class="sc">:</span><span class="dv">1</span>)</span>
<span id="cb429-8"><a href="ggplot2-60-minutos.html#cb429-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb429-9"><a href="ggplot2-60-minutos.html#cb429-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb429-10"><a href="ggplot2-60-minutos.html#cb429-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb429-11"><a href="ggplot2-60-minutos.html#cb429-11" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb429-12"><a href="ggplot2-60-minutos.html#cb429-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(y)</span></code></pre></div>
<pre><code>## # A tibble: 4 × 3
##       x     a     b
##   &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1     2     1     2
## 2     3     1     3
## 3     3     2     2
## 4     3     3     1</code></pre>
<div class="sourceCode" id="cb431"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb431-1"><a href="ggplot2-60-minutos.html#cb431-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb431-2"><a href="ggplot2-60-minutos.html#cb431-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(y, <span class="at">keep_empty =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## # A tibble: 5 × 3
##       x     a     b
##   &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1     1    NA    NA
## 2     2     1     2
## 3     3     1     3
## 4     3     2     2
## 5     3     3     1</code></pre>
<div class="sourceCode" id="cb433"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb433-1"><a href="ggplot2-60-minutos.html#cb433-1" aria-hidden="true" tabindex="-1"></a><span class="co"># If you have lists of lists, or lists of atomic vectors, instead</span></span>
<span id="cb433-2"><a href="ggplot2-60-minutos.html#cb433-2" aria-hidden="true" tabindex="-1"></a><span class="co"># see hoist(), unnest_wider(), and unnest_longer()</span></span>
<span id="cb433-3"><a href="ggplot2-60-minutos.html#cb433-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb433-4"><a href="ggplot2-60-minutos.html#cb433-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&#39; # You can unnest multiple columns simultaneously</span></span>
<span id="cb433-5"><a href="ggplot2-60-minutos.html#cb433-5" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb433-6"><a href="ggplot2-60-minutos.html#cb433-6" aria-hidden="true" tabindex="-1"></a> <span class="at">a =</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>), <span class="st">&quot;c&quot;</span>),</span>
<span id="cb433-7"><a href="ggplot2-60-minutos.html#cb433-7" aria-hidden="true" tabindex="-1"></a> <span class="at">b =</span> <span class="fu">list</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="dv">3</span>),</span>
<span id="cb433-8"><a href="ggplot2-60-minutos.html#cb433-8" aria-hidden="true" tabindex="-1"></a> <span class="at">c =</span> <span class="fu">c</span>(<span class="dv">11</span>, <span class="dv">22</span>)</span>
<span id="cb433-9"><a href="ggplot2-60-minutos.html#cb433-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb433-10"><a href="ggplot2-60-minutos.html#cb433-10" aria-hidden="true" tabindex="-1"></a>df</span></code></pre></div>
<pre><code>## # A tibble: 2 × 3
##   a         b             c
##   &lt;list&gt;    &lt;list&gt;    &lt;dbl&gt;
## 1 &lt;chr [2]&gt; &lt;int [2]&gt;    11
## 2 &lt;chr [1]&gt; &lt;dbl [1]&gt;    22</code></pre>
<div class="sourceCode" id="cb435"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb435-1"><a href="ggplot2-60-minutos.html#cb435-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb435-2"><a href="ggplot2-60-minutos.html#cb435-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(<span class="fu">c</span>(a, b))</span></code></pre></div>
<pre><code>## # A tibble: 3 × 3
##   a         b     c
##   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 a         1    11
## 2 b         2    11
## 3 c         3    22</code></pre>
<div class="sourceCode" id="cb437"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb437-1"><a href="ggplot2-60-minutos.html#cb437-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compare with unnesting one column at a time, which generates</span></span>
<span id="cb437-2"><a href="ggplot2-60-minutos.html#cb437-2" aria-hidden="true" tabindex="-1"></a><span class="co"># the Cartesian product</span></span>
<span id="cb437-3"><a href="ggplot2-60-minutos.html#cb437-3" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb437-4"><a href="ggplot2-60-minutos.html#cb437-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(a) <span class="sc">%&gt;%</span> </span>
<span id="cb437-5"><a href="ggplot2-60-minutos.html#cb437-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(b)</span></code></pre></div>
<pre><code>## # A tibble: 5 × 3
##   a         b     c
##   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 a         1    11
## 2 a         2    11
## 3 b         1    11
## 4 b         2    11
## 5 c         3    22</code></pre>
</div>
<div id="mais-detalhes-1" class="section level2 hasAnchor" number="3.30">
<h2><span class="header-section-number">3.30</span> Mais detalhes<a href="ggplot2-60-minutos.html#mais-detalhes-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><a href="https://github.com/tidymodels/broom/blob/main/vignettes/broom_and_dplyr.Rmd">https://github.com/tidymodels/broom/blob/main/vignettes/broom_and_dplyr.Rmd</a></p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="dplyr-60-minutos.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="broom-and-dplyr.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/02_ggplot2.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["learning_R.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
